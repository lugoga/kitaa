<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.550">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Masumbuko Semba">
<meta name="dcterms.date" content="2024-05-05">
<meta name="description" content="Data visualization simplifies complex information, making it easier to understand and leading to more informed decision-making">

<title>DATIKA - Data Visualization</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/cookie-consent/cookie-consent.js"></script>
<link href="../../site_libs/cookie-consent/cookie-consent.css" rel="stylesheet">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script async="" src="https://www.googletagmanager.com/gtag/js?id=<Insert your ID here>"></script>

<script type="text/plain" cookie-consent="tracking">

window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', '<Insert your ID here>', { 'anonymize_ip': true});
</script>

<script type="text/javascript" charset="UTF-8">
document.addEventListener('DOMContentLoaded', function () {
cookieconsent.run({
  "notice_banner_type":"simple",
  "consent_type":"implied",
  "palette":"light",
  "language":"en",
  "page_load_consent_levels":["strictly-necessary","functionality","tracking","targeting"],
  "notice_banner_reject_button_hide":false,
  "preferences_center_close_button_hide":false,
  "website_name":""
  ,
"language":"en"
  });
});
</script> 
  
<script src="../../site_libs/quarto-diagram/mermaid.min.js"></script>
<script src="../../site_libs/quarto-diagram/mermaid-init.js"></script>
<link href="../../site_libs/quarto-diagram/mermaid.css" rel="stylesheet">

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<meta name="twitter:title" content="DATIKA - Data Visualization">
<meta name="twitter:description" content="Data visualization simplifies complex information, making it easier to understand and leading to more informed decision-making">
<meta name="twitter:image" content="https://images.unsplash.com/photo-1565106430482-8f6e74349ca1?ixlib=rb-1.2.1&amp;q=80&amp;cs=tinysrgb&amp;fm=jpg&amp;crop=entropy&amp;w=3600">
<meta name="twitter:creator" content="@semba2024">
<meta name="twitter:card" content="summary_large_image">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top quarto-banner">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">DATIKA</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../blog.html"> 
<span class="menu-text">Posts</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../slides.html"> 
<span class="menu-text">Presentations</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../books.html"> 
<span class="menu-text">Books</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../data.html"> 
<span class="menu-text">Datasets</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../photos.html"> 
<span class="menu-text">Gallery</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../about.html"> 
<span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/lugoga/kitaa"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="../../blog.xml"> <i class="bi bi-rss" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-ressources" role="button" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Ressources</span>
    </a>
    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="nav-menu-ressources">    
        <li>
    <a class="dropdown-item" href="https://semba-blog.netlify.app/">
 <span class="dropdown-text">Semba blog</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://lugoga.github.io/semba-quarto/">
 <span class="dropdown-text">Semba website</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://nyamisi.github.io/nyamisi/blog.html">
 <span class="dropdown-text">Nyamisi blog</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://rweekly.org/">
 <span class="dropdown-text">R Weekly</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://www.r-bloggers.com/">
 <span class="dropdown-text">R Bloggers</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="../../archive.html"> 
<span class="menu-text">Archive</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
          <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Data Visualization</h1>
                  <div>
        <div class="description">
          Data visualization simplifies complex information, making it easier to understand and leading to more informed decision-making
        </div>
      </div>
                          <div class="quarto-categories">
                <div class="quarto-category">Data Science</div>
                <div class="quarto-category">Data Visualization</div>
              </div>
                  </div>
  </div>
    
  <div class="quarto-title-meta-author">
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-heading">Affiliation</div>
    
      <div class="quarto-title-meta-contents">
      <p class="author"><a href="https://semba.netlify.app">Masumbuko Semba</a> <a href="https://orcid.org/0000-0002-5002-9747" class="quarto-title-author-orcid"> <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo1N0NEMjA4MDI1MjA2ODExOTk0QzkzNTEzRjZEQTg1NyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDozM0NDOEJGNEZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDozM0NDOEJGM0ZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IE1hY2ludG9zaCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkZDN0YxMTc0MDcyMDY4MTE5NUZFRDc5MUM2MUUwNEREIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjU3Q0QyMDgwMjUyMDY4MTE5OTRDOTM1MTNGNkRBODU3Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+84NovQAAAR1JREFUeNpiZEADy85ZJgCpeCB2QJM6AMQLo4yOL0AWZETSqACk1gOxAQN+cAGIA4EGPQBxmJA0nwdpjjQ8xqArmczw5tMHXAaALDgP1QMxAGqzAAPxQACqh4ER6uf5MBlkm0X4EGayMfMw/Pr7Bd2gRBZogMFBrv01hisv5jLsv9nLAPIOMnjy8RDDyYctyAbFM2EJbRQw+aAWw/LzVgx7b+cwCHKqMhjJFCBLOzAR6+lXX84xnHjYyqAo5IUizkRCwIENQQckGSDGY4TVgAPEaraQr2a4/24bSuoExcJCfAEJihXkWDj3ZAKy9EJGaEo8T0QSxkjSwORsCAuDQCD+QILmD1A9kECEZgxDaEZhICIzGcIyEyOl2RkgwAAhkmC+eAm0TAAAAABJRU5ErkJggg=="></a></p>
    </div>
    <div class="quarto-title-meta-contents">
          <p class="affiliation">
              <a href="https://semba.netlify.app/">
              Nelson Mandela African Institution of Science and Technology
              </a>
            </p>
        </div>
    </div>

  <div class="quarto-title-meta">

        
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">May 5, 2024</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#welcome" id="toc-welcome" class="nav-link active" data-scroll-target="#welcome">Welcome!</a>
  <ul class="collapse">
  <li><a href="#what-is-data-visualization" id="toc-what-is-data-visualization" class="nav-link" data-scroll-target="#what-is-data-visualization">What is data visualization?</a></li>
  </ul></li>
  <li><a href="#introduction-to-data-visualization-and-distributions" id="toc-introduction-to-data-visualization-and-distributions" class="nav-link" data-scroll-target="#introduction-to-data-visualization-and-distributions">Introduction to Data Visualization and Distributions</a>
  <ul class="collapse">
  <li><a href="#overview" id="toc-overview" class="nav-link" data-scroll-target="#overview">Overview</a></li>
  <li><a href="#introduction-to-data-visualization" id="toc-introduction-to-data-visualization" class="nav-link" data-scroll-target="#introduction-to-data-visualization">Introduction to Data Visualization</a>
  <ul class="collapse">
  <li><a href="#key-point" id="toc-key-point" class="nav-link" data-scroll-target="#key-point">Key Point:</a></li>
  <li><a href="#code" id="toc-code" class="nav-link" data-scroll-target="#code">Code:</a></li>
  </ul></li>
  <li><a href="#introduction-to-distributions" id="toc-introduction-to-distributions" class="nav-link" data-scroll-target="#introduction-to-distributions">Introduction to Distributions</a>
  <ul class="collapse">
  <li><a href="#key-points" id="toc-key-points" class="nav-link" data-scroll-target="#key-points">Key Points:</a></li>
  <li><a href="#data-types" id="toc-data-types" class="nav-link" data-scroll-target="#data-types">Data Types</a></li>
  <li><a href="#exercise" id="toc-exercise" class="nav-link" data-scroll-target="#exercise">Exercise</a></li>
  </ul></li>
  <li><a href="#describe-heights-to-et" id="toc-describe-heights-to-et" class="nav-link" data-scroll-target="#describe-heights-to-et">Describe Heights to ET</a>
  <ul class="collapse">
  <li><a href="#key-point-1" id="toc-key-point-1" class="nav-link" data-scroll-target="#key-point-1">key point:</a></li>
  <li><a href="#code-1" id="toc-code-1" class="nav-link" data-scroll-target="#code-1">Code:</a></li>
  </ul></li>
  <li><a href="#cumulative-distribution-function" id="toc-cumulative-distribution-function" class="nav-link" data-scroll-target="#cumulative-distribution-function">Cumulative Distribution Function</a>
  <ul class="collapse">
  <li><a href="#code-for-cdf" id="toc-code-for-cdf" class="nav-link" data-scroll-target="#code-for-cdf">Code for CDF:</a></li>
  <li><a href="#code-for-student-height" id="toc-code-for-student-height" class="nav-link" data-scroll-target="#code-for-student-height">Code for student height:</a></li>
  </ul></li>
  <li><a href="#smooth-density-plots" id="toc-smooth-density-plots" class="nav-link" data-scroll-target="#smooth-density-plots">Smooth Density Plots</a>
  <ul class="collapse">
  <li><a href="#key-point-2" id="toc-key-point-2" class="nav-link" data-scroll-target="#key-point-2">Key Point:</a></li>
  </ul></li>
  <li><a href="#normal-distribution" id="toc-normal-distribution" class="nav-link" data-scroll-target="#normal-distribution">Normal Distribution</a>
  <ul class="collapse">
  <li><a href="#key-points-1" id="toc-key-points-1" class="nav-link" data-scroll-target="#key-points-1">Key Points:</a></li>
  </ul></li>
  <li><a href="#equation-for-the-normal-distribution" id="toc-equation-for-the-normal-distribution" class="nav-link" data-scroll-target="#equation-for-the-normal-distribution">Equation for the normal distribution</a>
  <ul class="collapse">
  <li><a href="#code-2" id="toc-code-2" class="nav-link" data-scroll-target="#code-2">Code:</a></li>
  <li><a href="#the-68-95-99.7-rule" id="toc-the-68-95-99.7-rule" class="nav-link" data-scroll-target="#the-68-95-99.7-rule">The 68-95-99.7 Rule</a></li>
  </ul></li>
  <li><a href="#the-normal-cdf-and-pnorm" id="toc-the-normal-cdf-and-pnorm" class="nav-link" data-scroll-target="#the-normal-cdf-and-pnorm">The Normal CDF and pnorm</a>
  <ul class="collapse">
  <li><a href="#key-points-2" id="toc-key-points-2" class="nav-link" data-scroll-target="#key-points-2">Key points:</a></li>
  <li><a href="#code-using-pnorm-to-calculate-probabilities" id="toc-code-using-pnorm-to-calculate-probabilities" class="nav-link" data-scroll-target="#code-using-pnorm-to-calculate-probabilities">Code: Using pnorm to calculate probabilities</a></li>
  <li><a href="#code-discretization-and-the-normal-approximation" id="toc-code-discretization-and-the-normal-approximation" class="nav-link" data-scroll-target="#code-discretization-and-the-normal-approximation">Code: Discretization and the normal approximation</a></li>
  </ul></li>
  <li><a href="#definition-of-quantiles" id="toc-definition-of-quantiles" class="nav-link" data-scroll-target="#definition-of-quantiles">Definition of quantiles</a>
  <ul class="collapse">
  <li><a href="#definition-of-quantiles-1" id="toc-definition-of-quantiles-1" class="nav-link" data-scroll-target="#definition-of-quantiles-1">Definition of quantiles</a></li>
  <li><a href="#using-the-quantile-function" id="toc-using-the-quantile-function" class="nav-link" data-scroll-target="#using-the-quantile-function">Using the quantile function</a></li>
  <li><a href="#percentiles" id="toc-percentiles" class="nav-link" data-scroll-target="#percentiles">Percentiles</a></li>
  <li><a href="#quartiles" id="toc-quartiles" class="nav-link" data-scroll-target="#quartiles">Quartiles</a></li>
  <li><a href="#examples" id="toc-examples" class="nav-link" data-scroll-target="#examples">Examples</a></li>
  </ul></li>
  <li><a href="#finding-quantile-with-qnorm" id="toc-finding-quantile-with-qnorm" class="nav-link" data-scroll-target="#finding-quantile-with-qnorm">Finding quantile with qnorm</a>
  <ul class="collapse">
  <li><a href="#definiton-of-qnorm" id="toc-definiton-of-qnorm" class="nav-link" data-scroll-target="#definiton-of-qnorm">Definiton of qnorm</a></li>
  <li><a href="#realation-to-pnorm" id="toc-realation-to-pnorm" class="nav-link" data-scroll-target="#realation-to-pnorm">Realation to pnorm</a></li>
  <li><a href="#theoretical-quantiles" id="toc-theoretical-quantiles" class="nav-link" data-scroll-target="#theoretical-quantiles">Theoretical quantiles</a></li>
  </ul></li>
  <li><a href="#quantile-quantile-plots" id="toc-quantile-quantile-plots" class="nav-link" data-scroll-target="#quantile-quantile-plots">Quantile-Quantile Plots</a>
  <ul class="collapse">
  <li><a href="#key-points-3" id="toc-key-points-3" class="nav-link" data-scroll-target="#key-points-3">Key Points:</a></li>
  <li><a href="#code-3" id="toc-code-3" class="nav-link" data-scroll-target="#code-3">Code:</a></li>
  </ul></li>
  <li><a href="#percentiles-1" id="toc-percentiles-1" class="nav-link" data-scroll-target="#percentiles-1">Percentiles</a>
  <ul class="collapse">
  <li><a href="#key-points-4" id="toc-key-points-4" class="nav-link" data-scroll-target="#key-points-4">Key Points:</a></li>
  </ul></li>
  <li><a href="#boxplots" id="toc-boxplots" class="nav-link" data-scroll-target="#boxplots">Boxplots</a>
  <ul class="collapse">
  <li><a href="#key-points-5" id="toc-key-points-5" class="nav-link" data-scroll-target="#key-points-5">Key Points:</a></li>
  </ul></li>
  <li><a href="#distribution-of-female-heights" id="toc-distribution-of-female-heights" class="nav-link" data-scroll-target="#distribution-of-female-heights">Distribution of Female Heights</a>
  <ul class="collapse">
  <li><a href="#key-points-6" id="toc-key-points-6" class="nav-link" data-scroll-target="#key-points-6">Key Points:</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#introduction-to-ggplot2" id="toc-introduction-to-ggplot2" class="nav-link" data-scroll-target="#introduction-to-ggplot2">Introduction to ggplot2</a>
  <ul class="collapse">
  <li><a href="#overview-1" id="toc-overview-1" class="nav-link" data-scroll-target="#overview-1">Overview</a></li>
  <li><a href="#ggplot" id="toc-ggplot" class="nav-link" data-scroll-target="#ggplot">ggplot</a>
  <ul class="collapse">
  <li><a href="#ggplot2" id="toc-ggplot2" class="nav-link" data-scroll-target="#ggplot2">ggplot2</a></li>
  <li><a href="#key-points-7" id="toc-key-points-7" class="nav-link" data-scroll-target="#key-points-7">key Points:</a></li>
  </ul></li>
  <li><a href="#graph-components" id="toc-graph-components" class="nav-link" data-scroll-target="#graph-components">Graph Components</a>
  <ul class="collapse">
  <li><a href="#key-points-8" id="toc-key-points-8" class="nav-link" data-scroll-target="#key-points-8">Key Points:</a></li>
  <li><a href="#code-4" id="toc-code-4" class="nav-link" data-scroll-target="#code-4">Code:</a></li>
  </ul></li>
  <li><a href="#creating-a-new-plot" id="toc-creating-a-new-plot" class="nav-link" data-scroll-target="#creating-a-new-plot">Creating a New Plot</a>
  <ul class="collapse">
  <li><a href="#key-points-9" id="toc-key-points-9" class="nav-link" data-scroll-target="#key-points-9">Key Points:</a></li>
  </ul></li>
  <li><a href="#layers" id="toc-layers" class="nav-link" data-scroll-target="#layers">Layers</a>
  <ul class="collapse">
  <li><a href="#key-points-10" id="toc-key-points-10" class="nav-link" data-scroll-target="#key-points-10">Key Points:</a></li>
  </ul></li>
  <li><a href="#thinkering" id="toc-thinkering" class="nav-link" data-scroll-target="#thinkering">Thinkering</a>
  <ul class="collapse">
  <li><a href="#key-points-11" id="toc-key-points-11" class="nav-link" data-scroll-target="#key-points-11">Key Points:</a></li>
  </ul></li>
  <li><a href="#scales-labels-and-colors" id="toc-scales-labels-and-colors" class="nav-link" data-scroll-target="#scales-labels-and-colors">Scales, Labels, and Colors</a>
  <ul class="collapse">
  <li><a href="#textbook-links" id="toc-textbook-links" class="nav-link" data-scroll-target="#textbook-links">Textbook links:</a></li>
  <li><a href="#key-points-12" id="toc-key-points-12" class="nav-link" data-scroll-target="#key-points-12">Key Points:</a></li>
  <li><a href="#code-log-scale-the-x-axis-and-y-axis" id="toc-code-log-scale-the-x-axis-and-y-axis" class="nav-link" data-scroll-target="#code-log-scale-the-x-axis-and-y-axis">Code: Log-scale the x-axis and y-axis</a></li>
  <li><a href="#code-add-labels-and-title" id="toc-code-add-labels-and-title" class="nav-link" data-scroll-target="#code-add-labels-and-title">Code: Add labels and title</a></li>
  <li><a href="#code-change-color-of-the-points" id="toc-code-change-color-of-the-points" class="nav-link" data-scroll-target="#code-change-color-of-the-points">Code: Change color of the points</a></li>
  <li><a href="#code-add-a-line-with-average-murder-rate" id="toc-code-add-a-line-with-average-murder-rate" class="nav-link" data-scroll-target="#code-add-a-line-with-average-murder-rate">Code: Add a line with average murder rate</a></li>
  <li><a href="#code-change-legend-title" id="toc-code-change-legend-title" class="nav-link" data-scroll-target="#code-change-legend-title">Code: Change legend title</a></li>
  </ul></li>
  <li><a href="#add-on-packages" id="toc-add-on-packages" class="nav-link" data-scroll-target="#add-on-packages">Add-on packages</a>
  <ul class="collapse">
  <li><a href="#textbook-links-1" id="toc-textbook-links-1" class="nav-link" data-scroll-target="#textbook-links-1">Textbook links:</a></li>
  <li><a href="#key-points-13" id="toc-key-points-13" class="nav-link" data-scroll-target="#key-points-13">Key Points</a></li>
  <li><a href="#code-adding-themes" id="toc-code-adding-themes" class="nav-link" data-scroll-target="#code-adding-themes">Code: Adding themes</a></li>
  <li><a href="#code-putting-it-all-together-to-assemble-the-plot" id="toc-code-putting-it-all-together-to-assemble-the-plot" class="nav-link" data-scroll-target="#code-putting-it-all-together-to-assemble-the-plot">Code: Putting it all together to assemble the plot</a></li>
  </ul></li>
  <li><a href="#other-examples" id="toc-other-examples" class="nav-link" data-scroll-target="#other-examples">Other Examples</a>
  <ul class="collapse">
  <li><a href="#textbook-links-2" id="toc-textbook-links-2" class="nav-link" data-scroll-target="#textbook-links-2">Textbook links:</a></li>
  <li><a href="#key-points-14" id="toc-key-points-14" class="nav-link" data-scroll-target="#key-points-14">Key points</a></li>
  <li><a href="#code-histograms-in-ggplot2" id="toc-code-histograms-in-ggplot2" class="nav-link" data-scroll-target="#code-histograms-in-ggplot2">Code: Histograms in ggplot2</a></li>
  <li><a href="#code-smooth-density-plots-in-ggplot2" id="toc-code-smooth-density-plots-in-ggplot2" class="nav-link" data-scroll-target="#code-smooth-density-plots-in-ggplot2">Code: Smooth density plots in ggplot2</a></li>
  <li><a href="#code-quantile-quantile-plots-in-ggplot2" id="toc-code-quantile-quantile-plots-in-ggplot2" class="nav-link" data-scroll-target="#code-quantile-quantile-plots-in-ggplot2">Code: Quantile-quantile plots in ggplot2</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#gapminder" id="toc-gapminder" class="nav-link" data-scroll-target="#gapminder">Gapminder</a>
  <ul class="collapse">
  <li><a href="#overview-2" id="toc-overview-2" class="nav-link" data-scroll-target="#overview-2">Overview</a></li>
  <li><a href="#introduction-to-gapminder" id="toc-introduction-to-gapminder" class="nav-link" data-scroll-target="#introduction-to-gapminder">Introduction to Gapminder</a></li>
  <li><a href="#gapminder-dataset" id="toc-gapminder-dataset" class="nav-link" data-scroll-target="#gapminder-dataset">Gapminder Dataset</a>
  <ul class="collapse">
  <li><a href="#key-points-15" id="toc-key-points-15" class="nav-link" data-scroll-target="#key-points-15">Key Points</a></li>
  <li><a href="#code-5" id="toc-code-5" class="nav-link" data-scroll-target="#code-5">Code</a></li>
  </ul></li>
  <li><a href="#life-expectancy-and-fertility-rates" id="toc-life-expectancy-and-fertility-rates" class="nav-link" data-scroll-target="#life-expectancy-and-fertility-rates">Life Expectancy and Fertility Rates</a>
  <ul class="collapse">
  <li><a href="#key-points-16" id="toc-key-points-16" class="nav-link" data-scroll-target="#key-points-16">Key Points</a></li>
  <li><a href="#code-6" id="toc-code-6" class="nav-link" data-scroll-target="#code-6">Code</a></li>
  </ul></li>
  <li><a href="#faceting" id="toc-faceting" class="nav-link" data-scroll-target="#faceting">Faceting</a>
  <ul class="collapse">
  <li><a href="#key-points-17" id="toc-key-points-17" class="nav-link" data-scroll-target="#key-points-17">Key Points</a></li>
  <li><a href="#code-7" id="toc-code-7" class="nav-link" data-scroll-target="#code-7">Code</a></li>
  </ul></li>
  <li><a href="#time-series-plots" id="toc-time-series-plots" class="nav-link" data-scroll-target="#time-series-plots">Time Series Plots</a>
  <ul class="collapse">
  <li><a href="#key-points-18" id="toc-key-points-18" class="nav-link" data-scroll-target="#key-points-18">Key Points</a></li>
  <li><a href="#code-single-time-series" id="toc-code-single-time-series" class="nav-link" data-scroll-target="#code-single-time-series">Code: Single Time Series</a></li>
  <li><a href="#code-multiple-time-series" id="toc-code-multiple-time-series" class="nav-link" data-scroll-target="#code-multiple-time-series">Code: Multiple Time Series</a></li>
  <li><a href="#code-adding-text-labels-to-a-plot" id="toc-code-adding-text-labels-to-a-plot" class="nav-link" data-scroll-target="#code-adding-text-labels-to-a-plot">Code: Adding text labels to a plot</a></li>
  </ul></li>
  <li><a href="#transformations" id="toc-transformations" class="nav-link" data-scroll-target="#transformations">Transformations</a>
  <ul class="collapse">
  <li><a href="#key-points-19" id="toc-key-points-19" class="nav-link" data-scroll-target="#key-points-19">Key Points</a></li>
  <li><a href="#code-8" id="toc-code-8" class="nav-link" data-scroll-target="#code-8">Code</a></li>
  </ul></li>
  <li><a href="#stratify-and-boxplot" id="toc-stratify-and-boxplot" class="nav-link" data-scroll-target="#stratify-and-boxplot">Stratify and Boxplot</a>
  <ul class="collapse">
  <li><a href="#key-points-20" id="toc-key-points-20" class="nav-link" data-scroll-target="#key-points-20">Key Points</a></li>
  <li><a href="#code-boxplot-of-gdp-by-region" id="toc-code-boxplot-of-gdp-by-region" class="nav-link" data-scroll-target="#code-boxplot-of-gdp-by-region">Code: Boxplot of GDP by region</a></li>
  <li><a href="#code-the-reorder-function" id="toc-code-the-reorder-function" class="nav-link" data-scroll-target="#code-the-reorder-function">Code: The reorder function</a></li>
  <li><a href="#code-enhanced-boxplot-ordered-by-median-income-scaled-and-showing-data" id="toc-code-enhanced-boxplot-ordered-by-median-income-scaled-and-showing-data" class="nav-link" data-scroll-target="#code-enhanced-boxplot-ordered-by-median-income-scaled-and-showing-data">Code: Enhanced boxplot ordered by median income, scaled, and showing data</a></li>
  </ul></li>
  <li><a href="#comparing-distributions" id="toc-comparing-distributions" class="nav-link" data-scroll-target="#comparing-distributions">Comparing Distributions</a>
  <ul class="collapse">
  <li><a href="#key-points-21" id="toc-key-points-21" class="nav-link" data-scroll-target="#key-points-21">Key Points</a></li>
  <li><a href="#code-histogram-of-income-in-west-versus-developing-world-1970-and-2010" id="toc-code-histogram-of-income-in-west-versus-developing-world-1970-and-2010" class="nav-link" data-scroll-target="#code-histogram-of-income-in-west-versus-developing-world-1970-and-2010">Code: Histogram of income in West versus developing world, 1970 and 2010</a></li>
  <li><a href="#code-income-distribution-of-west-verseus-developing-world-only-countries-with-data" id="toc-code-income-distribution-of-west-verseus-developing-world-only-countries-with-data" class="nav-link" data-scroll-target="#code-income-distribution-of-west-verseus-developing-world-only-countries-with-data">Code: Income distribution of West verseus Developing world, only countries with data</a></li>
  <li><a href="#code-boxplots-of-income-in-west-versus-developing-world-1970-and-2010" id="toc-code-boxplots-of-income-in-west-versus-developing-world-1970-and-2010" class="nav-link" data-scroll-target="#code-boxplots-of-income-in-west-versus-developing-world-1970-and-2010">Code: Boxplots of income in West versus Developing world, 1970 and 2010</a></li>
  </ul></li>
  <li><a href="#density-plots" id="toc-density-plots" class="nav-link" data-scroll-target="#density-plots">Density Plots</a>
  <ul class="collapse">
  <li><a href="#key-points-22" id="toc-key-points-22" class="nav-link" data-scroll-target="#key-points-22">Key Points</a></li>
  <li><a href="#code-faceted-smooth-density-plots" id="toc-code-faceted-smooth-density-plots" class="nav-link" data-scroll-target="#code-faceted-smooth-density-plots">Code: Faceted smooth density plots</a></li>
  <li><a href="#code-add-new-region-group-with-case_when" id="toc-code-add-new-region-group-with-case_when" class="nav-link" data-scroll-target="#code-add-new-region-group-with-case_when">Code: Add new region group with case_when</a></li>
  <li><a href="#code-stacked-density-plot" id="toc-code-stacked-density-plot" class="nav-link" data-scroll-target="#code-stacked-density-plot">Code: Stacked density plot</a></li>
  <li><a href="#code-weighted-stacked-density-plot" id="toc-code-weighted-stacked-density-plot" class="nav-link" data-scroll-target="#code-weighted-stacked-density-plot">Code: Weighted stacked density plot</a></li>
  </ul></li>
  <li><a href="#ecological-fallacy" id="toc-ecological-fallacy" class="nav-link" data-scroll-target="#ecological-fallacy">Ecological Fallacy</a>
  <ul class="collapse">
  <li><a href="#textbook-link" id="toc-textbook-link" class="nav-link" data-scroll-target="#textbook-link">Textbook link</a></li>
  <li><a href="#key-points-23" id="toc-key-points-23" class="nav-link" data-scroll-target="#key-points-23">Key Points</a></li>
  <li><a href="#code-9" id="toc-code-9" class="nav-link" data-scroll-target="#code-9">Code</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#data-visualization-principles" id="toc-data-visualization-principles" class="nav-link" data-scroll-target="#data-visualization-principles">Data Visualization Principles</a>
  <ul class="collapse">
  <li><a href="#overview-3" id="toc-overview-3" class="nav-link" data-scroll-target="#overview-3">Overview</a></li>
  <li><a href="#encoding-data-using-visual-cues" id="toc-encoding-data-using-visual-cues" class="nav-link" data-scroll-target="#encoding-data-using-visual-cues">Encoding Data Using Visual Cues</a>
  <ul class="collapse">
  <li><a href="#key-points-24" id="toc-key-points-24" class="nav-link" data-scroll-target="#key-points-24">Key Points</a></li>
  </ul></li>
  <li><a href="#know-when-to-include-zero" id="toc-know-when-to-include-zero" class="nav-link" data-scroll-target="#know-when-to-include-zero">Know when to Include Zero</a>
  <ul class="collapse">
  <li><a href="#key-points-25" id="toc-key-points-25" class="nav-link" data-scroll-target="#key-points-25">Key Points</a></li>
  </ul></li>
  <li><a href="#do-not-distort-quantitles" id="toc-do-not-distort-quantitles" class="nav-link" data-scroll-target="#do-not-distort-quantitles">Do not Distort Quantitles</a>
  <ul class="collapse">
  <li><a href="#key-points-26" id="toc-key-points-26" class="nav-link" data-scroll-target="#key-points-26">Key Points</a></li>
  </ul></li>
  <li><a href="#order-by-a-meaningful-value" id="toc-order-by-a-meaningful-value" class="nav-link" data-scroll-target="#order-by-a-meaningful-value">Order by a Meaningful Value</a>
  <ul class="collapse">
  <li><a href="#key-points-27" id="toc-key-points-27" class="nav-link" data-scroll-target="#key-points-27">Key Points</a></li>
  </ul></li>
  <li><a href="#show-the-data" id="toc-show-the-data" class="nav-link" data-scroll-target="#show-the-data">Show the Data</a>
  <ul class="collapse">
  <li><a href="#key-points-28" id="toc-key-points-28" class="nav-link" data-scroll-target="#key-points-28">Key Points</a></li>
  <li><a href="#code-10" id="toc-code-10" class="nav-link" data-scroll-target="#code-10">Code</a></li>
  </ul></li>
  <li><a href="#ease-comparisons-use-common-axes" id="toc-ease-comparisons-use-common-axes" class="nav-link" data-scroll-target="#ease-comparisons-use-common-axes">Ease Comparisons: Use Common Axes</a>
  <ul class="collapse">
  <li><a href="#key-points-29" id="toc-key-points-29" class="nav-link" data-scroll-target="#key-points-29">Key Points</a></li>
  </ul></li>
  <li><a href="#consider-transformations" id="toc-consider-transformations" class="nav-link" data-scroll-target="#consider-transformations">Consider Transformations</a>
  <ul class="collapse">
  <li><a href="#key-points-30" id="toc-key-points-30" class="nav-link" data-scroll-target="#key-points-30">Key Points</a></li>
  </ul></li>
  <li><a href="#ease-comparisons-compared-visual-cues-should-be-adjacent" id="toc-ease-comparisons-compared-visual-cues-should-be-adjacent" class="nav-link" data-scroll-target="#ease-comparisons-compared-visual-cues-should-be-adjacent">Ease Comparisons: Compared Visual Cues Should Be Adjacent</a>
  <ul class="collapse">
  <li><a href="#textbook-links-3" id="toc-textbook-links-3" class="nav-link" data-scroll-target="#textbook-links-3">Textbook links</a></li>
  <li><a href="#key-points-31" id="toc-key-points-31" class="nav-link" data-scroll-target="#key-points-31">Key Points</a></li>
  <li><a href="#code-11" id="toc-code-11" class="nav-link" data-scroll-target="#code-11">Code</a></li>
  </ul></li>
  <li><a href="#slope-charts" id="toc-slope-charts" class="nav-link" data-scroll-target="#slope-charts">Slope Charts</a>
  <ul class="collapse">
  <li><a href="#textbook-link-1" id="toc-textbook-link-1" class="nav-link" data-scroll-target="#textbook-link-1">Textbook link</a></li>
  <li><a href="#key-points-32" id="toc-key-points-32" class="nav-link" data-scroll-target="#key-points-32">Key Points</a></li>
  <li><a href="#code-slope-chart" id="toc-code-slope-chart" class="nav-link" data-scroll-target="#code-slope-chart">Code: Slope chart</a></li>
  <li><a href="#code-bland-altman-plot" id="toc-code-bland-altman-plot" class="nav-link" data-scroll-target="#code-bland-altman-plot">Code: Bland-Altman Plot</a></li>
  </ul></li>
  <li><a href="#encoding-a-third-variable" id="toc-encoding-a-third-variable" class="nav-link" data-scroll-target="#encoding-a-third-variable">Encoding a Third Variable</a>
  <ul class="collapse">
  <li><a href="#textbook-link-2" id="toc-textbook-link-2" class="nav-link" data-scroll-target="#textbook-link-2">Textbook link</a></li>
  <li><a href="#key-points-33" id="toc-key-points-33" class="nav-link" data-scroll-target="#key-points-33">Key Points</a></li>
  </ul></li>
  <li><a href="#case-study-vaccines" id="toc-case-study-vaccines" class="nav-link" data-scroll-target="#case-study-vaccines">Case Study: Vaccines</a>
  <ul class="collapse">
  <li><a href="#textbook-link-3" id="toc-textbook-link-3" class="nav-link" data-scroll-target="#textbook-link-3">Textbook link</a></li>
  <li><a href="#key-points-34" id="toc-key-points-34" class="nav-link" data-scroll-target="#key-points-34">Key Points</a></li>
  <li><a href="#code-tile-plot-of-measles-rate-by-year-and-state" id="toc-code-tile-plot-of-measles-rate-by-year-and-state" class="nav-link" data-scroll-target="#code-tile-plot-of-measles-rate-by-year-and-state">Code: Tile plot of measles rate by year and state</a></li>
  <li><a href="#code-line-plot-of-measles-rate-by-year-and-state" id="toc-code-line-plot-of-measles-rate-by-year-and-state" class="nav-link" data-scroll-target="#code-line-plot-of-measles-rate-by-year-and-state">Code: Line plot of measles rate by year and state</a></li>
  </ul></li>
  <li><a href="#avoid-pseudo-and-gratuitous-3d-plots" id="toc-avoid-pseudo-and-gratuitous-3d-plots" class="nav-link" data-scroll-target="#avoid-pseudo-and-gratuitous-3d-plots">Avoid Pseudo and Gratuitous 3D Plots</a>
  <ul class="collapse">
  <li><a href="#textbook-link-4" id="toc-textbook-link-4" class="nav-link" data-scroll-target="#textbook-link-4">Textbook link</a></li>
  <li><a href="#key-points-35" id="toc-key-points-35" class="nav-link" data-scroll-target="#key-points-35">Key Points</a></li>
  </ul></li>
  <li><a href="#avoid-too-many-significant-digits" id="toc-avoid-too-many-significant-digits" class="nav-link" data-scroll-target="#avoid-too-many-significant-digits">Avoid Too Many Significant Digits</a>
  <ul class="collapse">
  <li><a href="#textbook-link-5" id="toc-textbook-link-5" class="nav-link" data-scroll-target="#textbook-link-5">Textbook link</a></li>
  <li><a href="#key-points-36" id="toc-key-points-36" class="nav-link" data-scroll-target="#key-points-36">Key points</a></li>
  </ul></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content quarto-banner-title-block page-columns page-full" id="quarto-document-content">





<section id="welcome" class="level1">
<h1>Welcome!</h1>
<section id="what-is-data-visualization" class="level2">
<h2 class="anchored" data-anchor-id="what-is-data-visualization">What is data visualization?</h2>
<p>Data visualization is the graphical representation of information and data. By using visual elements like charts, graphs, and maps, data visualization tools provide an accessible way to see and understand trends, outliers, and patterns in data. Additionally, it provides an excellent way for employees or business owners to present data to non-technical audiences without confusion.</p>
<p>In the world of Big Data, data visualization tools and technologies are essential to analyze massive amounts of information and make data-driven decisions.</p>
</section>
</section>
<section id="introduction-to-data-visualization-and-distributions" class="level1 page-columns page-full">
<h1>Introduction to Data Visualization and Distributions</h1>
<section id="overview" class="level2">
<h2 class="anchored" data-anchor-id="overview">Overview</h2>
<p>After completing this section, we will:</p>
<ul>
<li><p>understand the importance of data visualization for communicating data-driven findings.</p></li>
<li><p>be able to use distributions to summarize data.</p></li>
<li><p>be able to use the average and the standard deviation to understand the normal distribution</p></li>
<li><p>be able to access how well a normal distribution fit the data using a quantile-quantile plot.</p></li>
<li><p>be able to interpret data from a box plot</p></li>
</ul>
</section>
<section id="introduction-to-data-visualization" class="level2">
<h2 class="anchored" data-anchor-id="introduction-to-data-visualization">Introduction to Data Visualization</h2>
<section id="key-point" class="level3">
<h3 class="anchored" data-anchor-id="key-point">Key Point:</h3>
<ul>
<li><p>Plots of data easily communicate information that is difficult to extract from table of raw values.</p></li>
<li><p>Data visualization is a key component of exploratory data analysis (EDA), in which the properties of data are explored through visualization and summarization techniques.</p></li>
<li><p>Data visualization can help discover biases, systematic errors, mistakes and other unexpected problems in data before those data are incorporated into potentially flawed analysis.</p></li>
<li><p>Basics of data visualization and EDA will be covered in R by using the ggplot2 package and motivating examples from world health, economics and infections disease.</p></li>
</ul>
</section>
<section id="code" class="level3">
<h3 class="anchored" data-anchor-id="code">Code:</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a><span class="fu">library</span>(dslabs)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'dslabs' was built under R version 4.3.3</code></pre>
</div>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1"></a><span class="fu">data</span>(murders)</span>
<span id="cb3-2"><a href="#cb3-2"></a><span class="fu">head</span>(murders)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>       state abb region population total
1    Alabama  AL  South    4779736   135
2     Alaska  AK   West     710231    19
3    Arizona  AZ   West    6392017   232
4   Arkansas  AR  South    2915918    93
5 California  CA   West   37253956  1257
6   Colorado  CO   West    5029196    65</code></pre>
</div>
</div>
</section>
</section>
<section id="introduction-to-distributions" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="introduction-to-distributions">Introduction to Distributions</h2>
<section id="key-points" class="level3 page-columns page-full">
<h3 class="anchored" data-anchor-id="key-points">Key Points:</h3>
<div class="page-columns page-full"><p></p><div class="no-row-height column-margin column-container"><span class="margin-aside"><a href="https://baike.baidu.com/item/方差/3108412">(<strong>Variance/Deviation Var</strong>)方差</a>: 方差越大，数据的波动越大；方差越小，数据的波动就越小。</span></div></div>
<div class="page-columns page-full"><p></p><div class="no-row-height column-margin column-container"><span class="margin-aside"><a href="https://baike.baidu.com/item/标准差/1415772">(<strong>Standard Deviation</strong>)标准差</a>: 方差开根号。</span></div></div>
<ul>
<li><p>The most basic statistical summary of a list of object is its distribution.</p></li>
<li><p>We will learn ways to visualize and analyze distributions in the upcoming videos.</p></li>
<li><p>In some cases, data can be summarized by two-number summary: the average and standard deviation.I will learn to use data visualization to determine when that is appropriate.</p></li>
</ul>
</section>
<section id="data-types" class="level3">
<h3 class="anchored" data-anchor-id="data-types">Data Types</h3>
<p>In R, there are <a href="https://www.programiz.com/r/data-types">6 basic data types</a>:</p>
<ul>
<li><p><code>logical</code></p></li>
<li><p><code>numeric</code></p></li>
<li><p><code>integer</code></p></li>
<li><p><code>complex</code></p></li>
<li><p><code>character</code></p></li>
<li><p><code>raw</code></p></li>
</ul>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Important
</div>
</div>
<div class="callout-body-container callout-body">
<p>Categorical data are variables that are defined by a small number of groups.</p>
<ul>
<li><p>Ordinal categorical data have an inherent order to the categories (mild/medium/hot, for example).</p></li>
<li><p>Non-ordinal categorical data have no order to the categories.</p></li>
</ul>
</div>
</div>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Important
</div>
</div>
<div class="callout-body-container callout-body">
<p>Numerical data take a variety of numeric values.</p>
<ul>
<li><p>Continuous variables can take any value.</p></li>
<li><p>Discrete variables are limited to sets of specific values.</p></li>
</ul>
</div>
</div>
<div class="cell" data-layout-align="default">
<div class="cell-output-display">
<div>
<p></p><figure class="figure"><p></p>
<div>
<pre class="mermaid mermaid-js">flowchart LR
  A[Main variable types] --&gt; B{Catrgorical}
  A[Main variable types] --&gt; C{Numeric}
  B{Catrgorical} --&gt; D[ordinal]
  B{Catrgorical} --&gt; E[non-ordinal]
  C{Numeric} --&gt; F[continuous]
  C{Numeric} --&gt; G[discrete]
</pre>
</div>
<p></p></figure><p></p>
</div>
</div>
</div>
</section>
<section id="exercise" class="level3">
<h3 class="anchored" data-anchor-id="exercise">Exercise</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1"></a><span class="co"># extract the variable names from a dataset</span></span>
<span id="cb5-2"><a href="#cb5-2"></a><span class="fu">names</span>(x)</span>
<span id="cb5-3"><a href="#cb5-3"></a><span class="co"># explore how many unique values are used in dataset</span></span>
<span id="cb5-4"><a href="#cb5-4"></a><span class="fu">unique</span>(x)</span>
<span id="cb5-5"><a href="#cb5-5"></a><span class="co"># determine how many variable were reported</span></span>
<span id="cb5-6"><a href="#cb5-6"></a><span class="fu">length</span>(x)</span>
<span id="cb5-7"><a href="#cb5-7"></a><span class="co"># determine how many unique variable were reported</span></span>
<span id="cb5-8"><a href="#cb5-8"></a><span class="fu">length</span>(<span class="fu">unique</span>(x))</span>
<span id="cb5-9"><a href="#cb5-9"></a><span class="co"># to compute the frequencies of each unique value</span></span>
<span id="cb5-10"><a href="#cb5-10"></a><span class="fu">table</span>(x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="describe-heights-to-et" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="describe-heights-to-et">Describe Heights to ET</h2>
<section id="key-point-1" class="level3">
<h3 class="anchored" data-anchor-id="key-point-1">key point:</h3>
<ul>
<li>A distribution is a function or description that shows the possible values of a variable and how often those values occur.</li>
<li>For categorical variables, the distribution describes the proportions of each category.</li>
<li>A <em>frequency table</em> is the simplest way to show a categorical distribution. Use <code>prop.table()</code> to convert a table of counts to a frequency table. <em>Barplots</em> display the distribution of categorical variables and are a way to visualize the information in frequency tables.</li>
<li>For continuous numerical data, reporting the frequency of each unique entry is not an effective summary as many or most values are unique. Instead, a distribution function is required.</li>
<li>The <a href="https://en.wikipedia.org/wiki/Cumulative_distribution_function"><em>cumulative distribution function (CDF)</em></a> is a function that reports the proportion of data below a value <span class="math inline">\(a\)</span> for all values of <span class="math inline">\(a\)</span> :<span class="math inline">\(F(a)=Pr(x≤a)\)</span>.</li>
<li>The proportion of observations between any two values <span class="math inline">\(a\)</span> and <span class="math inline">\(b\)</span> can be computed from the CDF as <span class="math inline">\(F(b)-F(a)\)</span>.</li>
<li>A <em>histogram</em> divides data into non-overlapping bins of the same size and plots the counts of number of values that fall in that interval.</li>
</ul>
</section>
<section id="code-1" class="level3 page-columns page-full">
<h3 class="anchored" data-anchor-id="code-1">Code:</h3>
<div class="page-columns page-full"><p></p><div class="no-row-height column-margin column-container"><span class="margin-aside">R 语言学习 - <a href="https://blog.csdn.net/wlt9037/article/details/76570155" title="table()结果提取"><code>table()</code></a> 结果提取.</span></div></div>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1"></a><span class="co"># load the dataset</span></span>
<span id="cb6-2"><a href="#cb6-2"></a><span class="fu">library</span>(dslabs)</span>
<span id="cb6-3"><a href="#cb6-3"></a><span class="fu">data</span>(heights)</span>
<span id="cb6-4"><a href="#cb6-4"></a><span class="co"># make a table of category proportions</span></span>
<span id="cb6-5"><a href="#cb6-5"></a><span class="fu">prop.table</span>(<span class="fu">table</span>(heights<span class="sc">$</span>sex))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="cumulative-distribution-function" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="cumulative-distribution-function">Cumulative Distribution Function</h2>
<p>Every <em>continuous distribution</em> has <em>cumulative distribution function (CDF)</em>. The CDF defines the proportion of the data below a given value for all values of <span class="math inline">\(a\)</span> :</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://rafalab.dfci.harvard.edu/dsbook/book_files/figure-html/ecdf-1.png" class="img-fluid figure-img"></p>
<figcaption>Cumulative Distribution Function (CDF)</figcaption>
</figure>
</div>
<p>As defined above, this plot of the CDF for male heights has height value <em>a</em> on the x-axis and the proportion of student with heights of that value or lower(<em>F(</em>a<em>)</em>) on the y-axis.</p>
<p>The CDF is essential for calculating probabilities related to continuous data. In a continuous dataset, the probability of a specific exact value is not informative because most entries are unique. For example, in the student heights data, only one individual reported a height of 68.8976377952726 inches, but many students rounded similar heights to 69 inches. If we computed exact value probabilities, we would find that being exactly 69 inches is much more likely than being a non-integer exact height, which does not match our understanding that height is continuous. We can instead use the CDF to obtain a useful summary, such as the probability that a student is between 68.5 and 69.5 inches.</p>
<p>For datasets that are not normal, the CDF can be calculated manually by defining a function to compute the probability above. This function can then be applied to a range of values across the range of the dataset to calculate a CDF. Given a dataset<code>my_data</code>, the CDF can be calculated and plotted like this:</p>
<div class="page-columns page-full"><p></p><div class="no-row-height column-margin column-container"><span class="margin-aside">R语言中的<a href="https://www.jianshu.com/p/59fb24ca2ea7">[<code>apply()</code>]，[<code>lapply()</code>]，[<code>sapply()</code>]，<code>tapply()</code></a>函数以及示例</span></div></div>
<section id="code-for-cdf" class="level3">
<h3 class="anchored" data-anchor-id="code-for-cdf">Code for CDF:</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1"></a><span class="co"># Cumulative Distribution Function </span></span>
<span id="cb7-2"><a href="#cb7-2"></a>a <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="fu">min</span>(x), <span class="fu">max</span>(x), length) <span class="co"># define range of the values</span></span>
<span id="cb7-3"><a href="#cb7-3"></a>cdf_function <span class="ot">&lt;-</span> <span class="cf">function</span>(x) {</span>
<span id="cb7-4"><a href="#cb7-4"></a>    <span class="fu">mean</span>(my_data <span class="sc">&lt;=</span> x)</span>
<span id="cb7-5"><a href="#cb7-5"></a>}</span>
<span id="cb7-6"><a href="#cb7-6"></a>cdf_values <span class="ot">&lt;-</span> <span class="fu">sapply</span>(a, cdf_function)</span>
<span id="cb7-7"><a href="#cb7-7"></a><span class="fu">plot</span>(a, cdf_values)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="code-for-student-height" class="level3">
<h3 class="anchored" data-anchor-id="code-for-student-height">Code for student height:</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1"></a><span class="co"># example for student heights</span></span>
<span id="cb8-2"><a href="#cb8-2"></a>a <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="fu">min</span>(heights<span class="sc">$</span>height), <span class="fu">max</span>(heights<span class="sc">$</span>height), <span class="at">length =</span> <span class="dv">100</span>)</span>
<span id="cb8-3"><a href="#cb8-3"></a>cdf_function <span class="ot">&lt;-</span> <span class="cf">function</span>(x){</span>
<span id="cb8-4"><a href="#cb8-4"></a>  <span class="fu">mean</span>(heights<span class="sc">$</span>height <span class="sc">&lt;=</span> x)</span>
<span id="cb8-5"><a href="#cb8-5"></a>}</span>
<span id="cb8-6"><a href="#cb8-6"></a>cdf_value <span class="ot">&lt;-</span> <span class="fu">sapply</span>(a, cdf_function)</span>
<span id="cb8-7"><a href="#cb8-7"></a><span class="fu">plot</span>(a, cdf_value)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-6-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>The CDF defines that proportion of data below a cut-off <span class="math inline">\(a\)</span>. To define the proportion of values above <span class="math inline">\(a\)</span>, we compute: <span class="math inline">\(1-F(a)\)</span></p>
<p>To define the proportion of values between <span class="math inline">\(a\)</span> and <span class="math inline">\(b\)</span>, we compute: <span class="math inline">\(F(b)-F(a)\)</span></p>
<p>Note that the CDF can help compute probabilities. The probability of observing a randomly chosen value between <span class="math inline">\(a\)</span> and <span class="math inline">\(b\)</span> is equal to the proportion of values between <span class="math inline">\(a\)</span> and <span class="math inline">\(b\)</span>, which we compute with the CDF.</p>
</section>
</section>
<section id="smooth-density-plots" class="level2">
<h2 class="anchored" data-anchor-id="smooth-density-plots">Smooth Density Plots</h2>
<section id="key-point-2" class="level3">
<h3 class="anchored" data-anchor-id="key-point-2">Key Point:</h3>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
A further note on histograms
</div>
</div>
<div class="callout-body-container callout-body">
<p>The choice of binwidth has a determinative effect on sharp. There is no “correct” choice for binwidth, and you can sometimes gain insights into the data by experimenting with binwidths.</p>
</div>
</div>
<ul>
<li><p><em>Smooth density plots</em> can be thought of as <strong><em>histograms where the binwidth is extremely or infinitely small</em></strong>. The smoothing function makes estimates of the true continuous trend of the data given the available sample of data points.</p></li>
<li><p>The degree of smoothness can be controlled by an argument in the plotting function.</p></li>
<li><p>While the histogram is an assumption-free summary, the smooth density plot is shaped by assumptions and choices you make as a data analyst.</p></li>
<li><p><strong><em>The y-axis is scaled so that the area under the density curve sums to 1.</em></strong> <!--#这是因为Y轴表示的是区间内的变量占总体的比重。 所有区间相加等于1。-->This means that interpreting value on the y-axis is not straightforward. To determine the proportion of data in between two values, compute the area under the smooth density curve in the region between those values.</p></li>
<li><p>An advantage of smooth densities over histograms is that <strong><em>densities are easier to compare visually</em></strong>.</p></li>
</ul>
</section>
</section>
<section id="normal-distribution" class="level2">
<h2 class="anchored" data-anchor-id="normal-distribution">Normal Distribution</h2>
<section id="key-points-1" class="level3">
<h3 class="anchored" data-anchor-id="key-points-1">Key Points:</h3>
<ul>
<li><p><a href="https://www.youtube.com/watch?v=xI9ZHGOSaCg&amp;ab_channel=AceTutors">The normal distribution</a>:</p>
<ul>
<li>is <strong><em>centered around</em></strong> one value, the <strong><em>mean</em></strong></li>
<li>is <strong><em>symmetric(对称)</em></strong> around the mean.</li>
<li>is defined completely by its <strong><em>mean(</em></strong><span class="math inline">\(\mu\)</span><strong>)</strong> and <strong><em>standard deviation(</em></strong><span class="math inline">\(\sigma\)</span><strong>)</strong></li>
<li><strong><em>Always has the same proportion</em></strong> of observations <strong><em>within a given distance</em></strong> of the mean (for example, 95% with 2<span class="math inline">\(\sigma\)</span>)</li>
</ul></li>
<li><p>The standard deviation is the <strong><em>average distance between a value and the mean value</em></strong>.</p></li>
<li><p>Calculate the mean using the <strong><em><code>mean()</code></em></strong> function.</p></li>
<li><p>Calculate the standard deviation using the <strong><em><code>sd()</code></em></strong> function or manually.</p></li>
<li><p><strong><em>Standard units</em></strong> describe how many standard deviations a value is away from the mean. The z-score, or number of standard deviation an observation is away from the mean <span class="math inline">\(\mu\)</span>:</p>
<p><span class="math display">\[
  z = (x-\mu)/\sigma
  \]</span></p></li>
<li><p>Computer standard units with the <code>scale()</code> function.</p></li>
<li><p><strong><em>Important:</em></strong> to calculate the proportion of value that meet a certain condition, use the <code>mean</code> function on a logical vector. Because <code>TRUE</code> is converted to 1 and <code>FALSE</code> is converted to 0, taking the mean of this vector yields the proportion of <code>TURE</code>.</p></li>
</ul>
</section>
</section>
<section id="equation-for-the-normal-distribution" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="equation-for-the-normal-distribution">Equation for the normal distribution</h2>
<p>The normal distribution is mathematically defined by the following formula for any mean <span class="math inline">\(\mu\)</span> and standard deviation <span class="math inline">\(\sigma\)</span>:</p>
<p><span class="math display">\[
Pr(a &lt; x &lt; b) = \int_{a}^b\frac{1}{\sqrt{2\pi\mu}}{e}^{-\frac{1}{2}(\frac{x-\mu^2}{\sigma})}dx
\]</span></p>
<p>When standard unites <span class="math inline">\(z=0\)</span>, the normal distribution is at a maximum, the mean <span class="math inline">\(\mu\)</span>. The function is defined to be symmetric around <span class="math inline">\(z=0\)</span>.</p>
<p>The normal distribution of z-score is called the <em>standard normal distribution</em> and is defined by <span class="math inline">\(\mu=0\)</span> and <span class="math inline">\(\sigma=1\)</span>.</p>
<p>Z-score are useful to quickly evalute whether an observation is average or extreme. Z-scores near 0 are average. Z-score above 2 or below -2 are <strong><em>significantly above or blew the mean</em></strong>, and z-scores above 3 or below -3 are <strong><em>extrmely rate</em></strong>.</p>
<section id="code-2" class="level3 page-columns page-full">
<h3 class="anchored" data-anchor-id="code-2">Code:</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1"></a><span class="co"># define x as vector of male heights</span></span>
<span id="cb9-2"><a href="#cb9-2"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb9-3"><a href="#cb9-3"></a><span class="fu">library</span>(dslabs)</span>
<span id="cb9-4"><a href="#cb9-4"></a><span class="fu">data</span>(heights)</span>
<span id="cb9-5"><a href="#cb9-5"></a>index <span class="ot">&lt;-</span> heights<span class="sc">$</span>sex<span class="sc">==</span><span class="st">"Male"</span></span>
<span id="cb9-6"><a href="#cb9-6"></a>x <span class="ot">&lt;-</span> heights<span class="sc">$</span>height[index]</span>
<span id="cb9-7"><a href="#cb9-7"></a></span>
<span id="cb9-8"><a href="#cb9-8"></a><span class="co"># calculate the mean and standard deviation manually</span></span>
<span id="cb9-9"><a href="#cb9-9"></a>average <span class="ot">&lt;-</span> <span class="fu">sum</span>(x)<span class="sc">/</span><span class="fu">length</span>(x)</span>
<span id="cb9-10"><a href="#cb9-10"></a>SD <span class="ot">&lt;-</span> <span class="fu">sqrt</span>(<span class="fu">sum</span>((x<span class="sc">-</span>average)<span class="sc">^</span><span class="dv">2</span>)<span class="sc">/</span><span class="fu">length</span>(x))</span>
<span id="cb9-11"><a href="#cb9-11"></a></span>
<span id="cb9-12"><a href="#cb9-12"></a><span class="co"># built-in mean and sd functions - note that the audio and printed value disagree</span></span>
<span id="cb9-13"><a href="#cb9-13"></a>average <span class="ot">&lt;-</span> <span class="fu">mean</span>(x)</span>
<span id="cb9-14"><a href="#cb9-14"></a>SD <span class="ot">&lt;-</span> <span class="fu">sd</span>(x)</span>
<span id="cb9-15"><a href="#cb9-15"></a><span class="fu">c</span>(<span class="at">average =</span> average, <span class="at">SD =</span> SD)</span>
<span id="cb9-16"><a href="#cb9-16"></a></span>
<span id="cb9-17"><a href="#cb9-17"></a><span class="co"># calculate standard units</span></span>
<span id="cb9-18"><a href="#cb9-18"></a>z <span class="ot">&lt;-</span> <span class="fu">scale</span>(x)</span>
<span id="cb9-19"><a href="#cb9-19"></a></span>
<span id="cb9-20"><a href="#cb9-20"></a><span class="co"># calculate proportion of value within 2 SD of mean</span></span>
<span id="cb9-21"><a href="#cb9-21"></a><span class="fu">mean</span>(<span class="fu">abs</span>(z) <span class="sc">&lt;</span> <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="page-columns page-full"><p></p><div class="no-row-height column-margin column-container"><span class="margin-aside"><strong><em>function <code>sd()</code>:</em></strong>The built-in R <strong><em>function <code>sd()</code></em></strong> calculates the standard deviation, but it divides by <strong><em><code>length(x)-1</code></em></strong> instead of <strong><em><code>length(x)</code></em></strong>. When the length of the list is large, this difference is negligible and you can use the built-in <strong><em><code>sd()</code></em></strong> function. Otherwise, you should compute σ by hand. For this course series, assume that you should use the <strong><em><code>sd()</code></em></strong> function unless you are told not to do so.</span></div></div>
<p>Here we will learn more about benchmark z-score value and their corresponding probabilities.</p>
</section>
<section id="the-68-95-99.7-rule" class="level3">
<h3 class="anchored" data-anchor-id="the-68-95-99.7-rule">The 68-95-99.7 Rule</h3>
<p>The normal distribution is associated with the 68-95-99.7 rule. This rule describes the probability of observing events within a ceration number of standard deviations of the mean.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://courses.edx.org/assets/courseware/v1/28d10d22ba8b3bf4b0cc5024de0dc616/asset-v1:HarvardX+PH125.2x+1T2022+type@asset+block/norm-dist-probs-combined.png" class="img-fluid figure-img"></p>
<figcaption>Normal Distribution Probabilities</figcaption>
</figure>
</div>
<p>The probability distribution function for the normal distribution is defined such that:</p>
<ul>
<li>About 68% of observations will be within one standard deviation of the mean(<span class="math inline">\(\mu\pm\sigma\)</span>). In standard units, this is equivalent to a z-score of <span class="math inline">\(|z|\leq2\)</span></li>
</ul>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://courses.edx.org/assets/courseware/v1/f0bb9f66b7bdd91b2c9852c7a68427c7/asset-v1:HarvardX+PH125.2x+1T2022+type@asset+block/norm-dist-1sd.png" class="img-fluid figure-img"></p>
<figcaption>Probability of an observation within 1 SD of mean</figcaption>
</figure>
</div>
<ul>
<li>About 95% of observations will be within two standard seviations of the mean(<span class="math inline">\(\mu\pm2\sigma\)</span>). In standard units, this is equivalent to a z-sore of <span class="math inline">\(|z|\leq2\)</span>.</li>
</ul>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://courses.edx.org/assets/courseware/v1/9686a507a97a536a1f5c6b6a01bd8154/asset-v1:HarvardX+PH125.2x+1T2022+type@asset+block/norm-dist-2sd.png" class="img-fluid figure-img"></p>
<figcaption>Probability of an ovservation within 2 SD of mean</figcaption>
</figure>
</div>
<ul>
<li>About 99.7% of observations will be within three standard deviations of the mean(<span class="math inline">\(\mu\pm3\sigma\)</span>). In standard units, this is equivalent to a z-score of <span class="math inline">\(|z|\leq3\)</span>.</li>
</ul>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://courses.edx.org/assets/courseware/v1/a8af7c699c20d1e83819b5f68bf6f17d/asset-v1:HarvardX+PH125.2x+1T2022+type@asset+block/norm-dist-3sd.png" class="img-fluid figure-img"></p>
<figcaption>Probability of an observation within 3 SD of mean</figcaption>
</figure>
</div>
</section>
</section>
<section id="the-normal-cdf-and-pnorm" class="level2">
<h2 class="anchored" data-anchor-id="the-normal-cdf-and-pnorm">The Normal CDF and pnorm</h2>
<section id="key-points-2" class="level3">
<h3 class="anchored" data-anchor-id="key-points-2">Key points:</h3>
<ul>
<li><p>The normal distribution has a mathematically defined CDF which can be computed in R with the function <code>pnorm</code>.</p></li>
<li><p><code>pnom(a, avg, s)</code> gives the value of the cumculative distribution function <em>F(a)</em> for the normal distribution defined by average <em>avg</em> and standard deviation <em>s</em>.</p></li>
<li><p>we say that a random quantity is normally distributed with average <em>avg</em> and standard deviation <em>s</em> if the approximate <em>pnorm(a, avg, s)</em> holds for all values of <em>a</em>.</p></li>
<li><p>If we are willing to use the normal approximation for height, we can estimate the distribution simply from the mean and standard deviation of our values.</p></li>
<li><p>If we treat the height data as discrete rather than categorical, we see that the data are not very useful because integer values are more common that expected due to rounding. This is called discretization.</p></li>
<li><p>With rounded data, the normal approximation is particularly useful when computing probabilities of intervals of length 1 that include exactly over integer.</p></li>
</ul>
</section>
<section id="code-using-pnorm-to-calculate-probabilities" class="level3">
<h3 class="anchored" data-anchor-id="code-using-pnorm-to-calculate-probabilities">Code: Using pnorm to calculate probabilities</h3>
<p>Given male heights x:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb10-2"><a href="#cb10-2"></a><span class="fu">library</span>(dslabs)</span>
<span id="cb10-3"><a href="#cb10-3"></a><span class="fu">data</span>(<span class="st">"heights"</span>)</span>
<span id="cb10-4"><a href="#cb10-4"></a>x <span class="ot">&lt;-</span> heights <span class="sc">%&gt;%</span> <span class="fu">filter</span>(sex<span class="sc">==</span><span class="st">"Male"</span>) <span class="sc">%&gt;%</span> <span class="fu">pull</span>(height)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>we can estimate the probability that a male is taller than 70.5 inches with:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1"></a><span class="dv">1</span> <span class="sc">-</span> <span class="fu">pnorm</span>(<span class="fl">70.5</span>, <span class="fu">mean</span>(x), <span class="fu">sd</span>(x))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="code-discretization-and-the-normal-approximation" class="level3">
<h3 class="anchored" data-anchor-id="code-discretization-and-the-normal-approximation">Code: Discretization and the normal approximation</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1"></a><span class="co"># plot distribution of exact heights in data</span></span>
<span id="cb12-2"><a href="#cb12-2"></a><span class="fu">plot</span>(<span class="fu">prop.table</span>(<span class="fu">table</span>(x)), <span class="at">xlab =</span> <span class="st">"a = Height in inches"</span>, <span class="at">ylab =</span> <span class="st">"Pr(x = a)"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-10-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1"></a><span class="co"># probabilities in actual data over length 1 ranges containing a integer</span></span>
<span id="cb13-2"><a href="#cb13-2"></a><span class="fu">mean</span>(x <span class="sc">&lt;=</span> <span class="fl">68.5</span>) <span class="sc">-</span> <span class="fu">mean</span>(x <span class="sc">&lt;=</span> <span class="fl">67.5</span>)</span>
<span id="cb13-3"><a href="#cb13-3"></a><span class="fu">mean</span>(x <span class="sc">&lt;=</span> <span class="fl">69.5</span>) <span class="sc">-</span> <span class="fu">mean</span>(x <span class="sc">&lt;=</span> <span class="fl">68.5</span>)</span>
<span id="cb13-4"><a href="#cb13-4"></a><span class="fu">mean</span>(x <span class="sc">&lt;=</span> <span class="fl">70.5</span>) <span class="sc">-</span> <span class="fu">mean</span>(x <span class="sc">&lt;=</span> <span class="fl">69.5</span>)</span>
<span id="cb13-5"><a href="#cb13-5"></a></span>
<span id="cb13-6"><a href="#cb13-6"></a><span class="co"># probabilities in normal approximation match well</span></span>
<span id="cb13-7"><a href="#cb13-7"></a><span class="fu">pnorm</span>(<span class="fl">68.5</span>, <span class="fu">mean</span>(x), <span class="fu">sd</span>(x)) <span class="sc">-</span> <span class="fu">pnorm</span>(<span class="fl">67.5</span>, <span class="fu">mean</span>(x), <span class="fu">sd</span>(x))</span>
<span id="cb13-8"><a href="#cb13-8"></a><span class="fu">pnorm</span>(<span class="fl">69.5</span>, <span class="fu">mean</span>(x), <span class="fu">sd</span>(x)) <span class="sc">-</span> <span class="fu">pnorm</span>(<span class="fl">68.5</span>, <span class="fu">mean</span>(x), <span class="fu">sd</span>(x))</span>
<span id="cb13-9"><a href="#cb13-9"></a><span class="fu">pnorm</span>(<span class="fl">70.5</span>, <span class="fu">mean</span>(x), <span class="fu">sd</span>(x)) <span class="sc">-</span> <span class="fu">pnorm</span>(<span class="fl">69.5</span>, <span class="fu">mean</span>(x), <span class="fu">sd</span>(x))</span>
<span id="cb13-10"><a href="#cb13-10"></a></span>
<span id="cb13-11"><a href="#cb13-11"></a><span class="co"># probabilities in actual data over other ranges don't match normal approx as well</span></span>
<span id="cb13-12"><a href="#cb13-12"></a><span class="fu">mean</span>(x <span class="sc">&lt;=</span> <span class="fl">70.9</span>) <span class="sc">-</span> <span class="fu">mean</span>(x <span class="sc">&lt;=</span> <span class="fl">70.1</span>)</span>
<span id="cb13-13"><a href="#cb13-13"></a><span class="fu">pnorm</span>(<span class="fl">70.9</span>, <span class="fu">mean</span>(x), <span class="fu">sd</span>(x)) <span class="sc">-</span> <span class="fu">pnorm</span>(<span class="fl">70.1</span>, <span class="fu">mean</span>(x), <span class="fu">sd</span>(x))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="definition-of-quantiles" class="level2">
<h2 class="anchored" data-anchor-id="definition-of-quantiles">Definition of quantiles</h2>
<section id="definition-of-quantiles-1" class="level3">
<h3 class="anchored" data-anchor-id="definition-of-quantiles-1">Definition of quantiles</h3>
<p><a href="https://www.youtube.com/watch?v=Ky7QeVgv-BA&amp;ab_channel=MarinStatsLectures-RProgramming%26Statistics">Quantiles</a> are cut off points that divide a dataset into intervals with set probability. The <em>qth</em> quantile is the value at which <em>q%</em> of the observation are <strong><em>equal to or less than that value</em></strong>.</p>
</section>
<section id="using-the-quantile-function" class="level3">
<h3 class="anchored" data-anchor-id="using-the-quantile-function">Using the quantile function</h3>
<p>Given a dataset <code>data</code> and desired quantile <code>q</code>, you can find the <code>q</code> the quantile of <code>data</code> with:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1"></a><span class="fu">quantile</span>(data,q)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="percentiles" class="level3">
<h3 class="anchored" data-anchor-id="percentiles">Percentiles</h3>
<p>Percentiles are the quantiles that divide a dataset into 100 intervals each with 1% probability. You can determine all percentiles of a dataset <code>data</code> like this:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1"></a>p <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="fl">0.01</span>, <span class="fl">0.09</span>, <span class="fl">0.01</span>)</span>
<span id="cb15-2"><a href="#cb15-2"></a><span class="fu">quantile</span>(data, p)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="quartiles" class="level3">
<h3 class="anchored" data-anchor-id="quartiles">Quartiles</h3>
<p>Quartiles divide a dataset into 4 parts each with 25% probability. They are equal to the 25th, 50th and 75th percentiles. The 25th percentile is also known as the <em>1st quartile</em>, the 50th percentile is also konwn as the median, and the 75th percentile is also knowns as the <em>3rd quartile</em>.</p>
<p>The <strong><em><code>summary()</code></em></strong> function returns the minimum, quartiles and maximum of a vector.</p>
</section>
<section id="examples" class="level3">
<h3 class="anchored" data-anchor-id="examples">Examples</h3>
<p>Load the heights dataset from the <em>dslabs</em> package:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1"></a><span class="fu">library</span>(dslabs)</span>
<span id="cb16-2"><a href="#cb16-2"></a><span class="fu">data</span>(<span class="st">"heights"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Use<code>summary</code>on the <code>heights$height</code> variable to find the quartiles:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1"></a><span class="fu">summary</span>(heights<span class="sc">$</span>height)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
  50.00   66.00   68.50   68.32   71.00   82.68 </code></pre>
</div>
</div>
<p>Find the percentiles of <code>height$height</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1"></a>p <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="fl">0.01</span>, <span class="fl">0.99</span>, <span class="fl">0.01</span>)</span>
<span id="cb19-2"><a href="#cb19-2"></a>percentiles <span class="ot">&lt;-</span> <span class="fu">quantile</span>(heights<span class="sc">$</span>height, p)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Confirm that the 25th and 75th percentiles match that 1st and 3rd quartiles. Note that <code>quantile()</code> returns a named vector. You can access the 25th and 75th percentiles like this (adapt the code for other percentile value):</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1"></a>percentiles[<span class="fu">names</span>(percentiles) <span class="sc">==</span> <span class="st">"25%"</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>25% 
 66 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1"></a>percentiles[<span class="fu">names</span>(percentiles) <span class="sc">==</span> <span class="st">"75%"</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>75% 
 71 </code></pre>
</div>
</div>
</section>
</section>
<section id="finding-quantile-with-qnorm" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="finding-quantile-with-qnorm">Finding quantile with qnorm</h2>
<section id="definiton-of-qnorm" class="level3 page-columns page-full">
<h3 class="anchored" data-anchor-id="definiton-of-qnorm">Definiton of qnorm</h3>
<div class="page-columns page-full"><p></p><div class="no-row-height column-margin column-container"><span class="margin-aside">简单来说,<a href="https://www.jianshu.com/p/a24eb1b94177"><strong><em><code>qnorm</code></em></strong></a>是正态分布<strong><em>累积分布函数(CDF)</em></strong>的反函数， 也就是说它可以视为<code>pnorm</code>的反函数, 这里<code>q</code>指的是quantile, 即分位数</span></div></div>
<p>The <a href="https://www.youtube.com/watch?v=X5NXDK6AVtU&amp;ab_channel=TheDataDigest"><code>qnorm()</code></a> function gives the theoretical value of a quantile with probability <code>p</code> of observing a value equal to or less than that quantile value a normal distribution with mean <code>mu</code> and standard deviation <code>sigma</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1"></a><span class="fu">qnorm</span>(p, mu, sigma)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong><em>By default, <code>mu</code>=0 and <code>sigma</code>=1</em></strong>. Therefore, calling <code>qnorm()</code> with no arguments gives quantiles for the standard normal distribution.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1"></a><span class="fu">qnorm</span>(p)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Recall that quantiles are defined such that <span class="math inline">\(p\)</span> is the probability of a random observation less than or equal to the quantile.</p>
</section>
<section id="realation-to-pnorm" class="level3">
<h3 class="anchored" data-anchor-id="realation-to-pnorm">Realation to pnorm</h3>
<p>The <code>pnorm()</code> function gives the probability that a value from a standard normal distribution will be less than or equal to a z-score value z. consider: <span class="math display">\[pnorm(-1.96)\approx0.025\]</span> The result of <code>pnorm()</code> is the quantile. Note that: <span class="math display">\[qnorm(0.025)\approx-1.96\]</span> <code>qnorm()</code> and <code>pnorm</code> are inverse functions: <span class="math display">\[pnorm(qnorm(0.025))\equiv0.025\]</span></p>
</section>
<section id="theoretical-quantiles" class="level3">
<h3 class="anchored" data-anchor-id="theoretical-quantiles">Theoretical quantiles</h3>
<p>You can use <code>qnorm()</code> to determine the theoretical quantiles of a dataset: that is, the theoretical value of quantiles assuming that a dataset follows a normal distribution. Run the <code>qnorm()</code> function with the desired probabilities <em>p</em>, mean mu and standard deviation sigma.</p>
<p>Suppose male heights follow a normal distribution with a mean of 69 inches and standard deviation of 3 inches. The theoretical quantiles are:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1"></a>p <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="fl">0.01</span>, <span class="fl">0.99</span>, <span class="fl">0.01</span>)</span>
<span id="cb26-2"><a href="#cb26-2"></a>theoretical_quantiles <span class="ot">&lt;-</span> <span class="fu">qnorm</span>(p, <span class="dv">69</span>, <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Theoretical quantiles can be compared to sample quantiles determined with the quantile function in order to evaluate whether the sample follows a normal distribution.</p>
</section>
</section>
<section id="quantile-quantile-plots" class="level2">
<h2 class="anchored" data-anchor-id="quantile-quantile-plots">Quantile-Quantile Plots</h2>
<section id="key-points-3" class="level3">
<h3 class="anchored" data-anchor-id="key-points-3">Key Points:</h3>
<ul>
<li><p>Quantile-quantile plots, or QQ-plot, are used to check whether distributions are well-approximated by a normal distribution.</p></li>
<li><p>Given a proportion <em>p</em>, the quantile <em>q</em> is the value such that the proportion of values in the data blew <em>q</em> is <em>p</em>.</p></li>
<li><p>In a QQ-plot, the sample quantiles in the observed data are compared to the theoretical quantiles expected from the normal distribution. If the data are well-approximated by the normal distribution, then the points on the QQ-plot will fall near the identity line(sample = theoretical).</p></li>
<li><p>Calculate sample quantiles (observed quantiles) using the <code>quantile()</code> function.</p></li>
<li><p>Calculate theoretical quantiles with the <code>qnorm()</code> function. <code>qnorm()</code> will caculate quantiles for the standard normal distribution (<span class="math inline">\(\mu=0, \sigma=1\)</span>) by default, but it can calculate quantiles for any normal distribution given <code>mean()</code> and <code>sd()</code> arguments.</p></li>
</ul>
</section>
<section id="code-3" class="level3">
<h3 class="anchored" data-anchor-id="code-3">Code:</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1"></a><span class="co"># define x and z</span></span>
<span id="cb27-2"><a href="#cb27-2"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb27-3"><a href="#cb27-3"></a><span class="fu">library</span>(dslabs)</span>
<span id="cb27-4"><a href="#cb27-4"></a><span class="fu">data</span>(heights)</span>
<span id="cb27-5"><a href="#cb27-5"></a></span>
<span id="cb27-6"><a href="#cb27-6"></a>index <span class="ot">&lt;-</span> heights<span class="sc">$</span>sex<span class="sc">==</span><span class="st">"Male"</span></span>
<span id="cb27-7"><a href="#cb27-7"></a>x <span class="ot">&lt;-</span> heights<span class="sc">$</span>height[index]</span>
<span id="cb27-8"><a href="#cb27-8"></a>z <span class="ot">&lt;-</span> <span class="fu">scale</span>(x)</span>
<span id="cb27-9"><a href="#cb27-9"></a></span>
<span id="cb27-10"><a href="#cb27-10"></a><span class="co"># proportion of data below 69.5</span></span>
<span id="cb27-11"><a href="#cb27-11"></a><span class="fu">mean</span>(x <span class="sc">&lt;=</span> <span class="fl">69.5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.5147783</code></pre>
</div>
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1"></a><span class="co"># calculate observed and theoretical quantiles</span></span>
<span id="cb29-2"><a href="#cb29-2"></a>p <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="fl">0.05</span>, <span class="fl">0.95</span>, <span class="fl">0.05</span>)</span>
<span id="cb29-3"><a href="#cb29-3"></a>observed_quantiles <span class="ot">&lt;-</span> <span class="fu">quantile</span>(x, p)</span>
<span id="cb29-4"><a href="#cb29-4"></a>theoretical_quantiles <span class="ot">&lt;-</span> <span class="fu">qnorm</span>(p, <span class="at">mean =</span> <span class="fu">mean</span>(x), <span class="at">sd =</span> <span class="fu">sd</span>(x))</span>
<span id="cb29-5"><a href="#cb29-5"></a></span>
<span id="cb29-6"><a href="#cb29-6"></a><span class="co"># make QQ-plot</span></span>
<span id="cb29-7"><a href="#cb29-7"></a><span class="fu">plot</span>(theoretical_quantiles, observed_quantiles)</span>
<span id="cb29-8"><a href="#cb29-8"></a><span class="fu">abline</span>(<span class="dv">0</span>,<span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-21-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1"></a><span class="co"># make QQ-plot with scaled values</span></span>
<span id="cb30-2"><a href="#cb30-2"></a>observed_quantiles <span class="ot">&lt;-</span> <span class="fu">quantile</span>(z, p)</span>
<span id="cb30-3"><a href="#cb30-3"></a>theoretical_quantiles <span class="ot">&lt;-</span> <span class="fu">qnorm</span>(p)</span>
<span id="cb30-4"><a href="#cb30-4"></a><span class="fu">plot</span>(theoretical_quantiles, observed_quantiles)</span>
<span id="cb30-5"><a href="#cb30-5"></a><span class="fu">abline</span>(<span class="dv">0</span>,<span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-21-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="percentiles-1" class="level2">
<h2 class="anchored" data-anchor-id="percentiles-1">Percentiles</h2>
<section id="key-points-4" class="level3">
<h3 class="anchored" data-anchor-id="key-points-4">Key Points:</h3>
<ul>
<li><p>Percentiles are the quantiles obtained when defining <span class="math inline">\(p\)</span> as 0.01, 0.02,…,0.99. They summarize the values at which a certain percent of the observations are equal to or less than that value.</p></li>
<li><p>The 50th percentile is also known as the median.</p></li>
<li><p>The quartiles are the 25th, 50th and 75th percentiles.</p></li>
</ul>
</section>
</section>
<section id="boxplots" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="boxplots">Boxplots</h2>
<div class="page-columns page-full"><p></p><div class="no-row-height column-margin column-container"><span class="margin-aside">R语言如何绘制<a href="https://zhuanlan.zhihu.com/p/440914623">箱线图</a></span></div></div>
<section id="key-points-5" class="level3">
<h3 class="anchored" data-anchor-id="key-points-5">Key Points:</h3>
<ul>
<li><p>When data do not follow a normal distribution and cannot be succinctly summarized by only the mean and standard deviation, an alternative is to report a five-number summary: range (ignoring outliers) and the quartiles (25th, 50th, 75th percentile).</p></li>
<li><p>In a <a href="https://www.youtube.com/watch?v=INSIyaZUXIY&amp;ab_channel=DATAtab">boxplot</a>, the box is defined by the <em>25th</em> and <em>75th</em> percentiles and the <em>median</em> is <strong><em>a horizontal line through the box</em></strong>. The <em>whiskers</em> show <strong><em>the range excluding outliers</em></strong>, and outliers are plotted separately as individual points.</p></li>
<li><p>The <em>interquartile range</em> is the distance between the 25th and 75th percentiles.</p></li>
<li><p>Boxplots are particularly useful when comparing <em>multiple distributions</em>.</p></li>
</ul>
</section>
</section>
<section id="distribution-of-female-heights" class="level2">
<h2 class="anchored" data-anchor-id="distribution-of-female-heights">Distribution of Female Heights</h2>
<section id="key-points-6" class="level3">
<h3 class="anchored" data-anchor-id="key-points-6">Key Points:</h3>
<ul>
<li><p>If a distribution is not normal, it cannot be summarized with only the mean and standard seviation. Provide a histogram, smooth density or boxplot instead.</p></li>
<li><p>A plot can force us to see unexpected results that make us question the quality or implication of our data.</p></li>
</ul>
</section>
</section>
</section>
<section id="introduction-to-ggplot2" class="level1">
<h1>Introduction to ggplot2</h1>
<section id="overview-1" class="level2">
<h2 class="anchored" data-anchor-id="overview-1">Overview</h2>
<p>After completing ggplot2, we will:</p>
<ul>
<li><p>be able to use ggplot2 to create data visualizations in R.</p></li>
<li><p>be able to explain what the data component of a graph is.</p></li>
<li><p>be able to identify the geometry component of a graph and know when to use which type of geometry. be able to explain what the aesthetic mapping component of a graph is.</p></li>
<li><p>be able to understand the scale component of a graph and select an appropriate scale component to use.</p></li>
</ul>
</section>
<section id="ggplot" class="level2">
<h2 class="anchored" data-anchor-id="ggplot">ggplot</h2>
<section id="ggplot2" class="level3">
<h3 class="anchored" data-anchor-id="ggplot2">ggplot2</h3>
<ul>
<li><p><a href="https://datacarpentry.org/R-ecology-lesson/04-visualization-ggplot2.html">Data visualization with ggolot2</a></p></li>
<li><p><a href="https://github.com/rstudio/cheatsheets/blob/main/data-visualization-2.1.pdf">Data visualization with ggplot2: Cheat Sheet</a></p></li>
<li><p><a href="https://r-graph-gallery.com/index.html">The R graph gallery example</a></p></li>
</ul>
</section>
<section id="key-points-7" class="level3">
<h3 class="anchored" data-anchor-id="key-points-7">key Points:</h3>
<ul>
<li><p>Throughout the series, we will create plots with the ggplot2 package. <strong>ggplot2</strong> is part of the <strong>tidyverse</strong> suite of package, which you can load with <strong><code>library(tidyverse)</code></strong>.</p></li>
<li><p>Note that you can also load <strong>ggplot2</strong> alone using the command <strong><code>library(ggplot2)</code></strong>, instead of loading the entire tidyverse.</p></li>
<li><p><strong>ggplot2</strong> uses a <strong>grammar of graphics</strong> to break plots into building blocks that have intuitive syntax, making it easy to create relatively complex and aesthetically pleasing plots with relatively simple and readable code.</p></li>
<li><p><strong>ggplot2</strong> is designed to work excusively with tidy data (<strong>rows are observations and columns are variables</strong>).</p></li>
</ul>
</section>
</section>
<section id="graph-components" class="level2">
<h2 class="anchored" data-anchor-id="graph-components">Graph Components</h2>
<section id="key-points-8" class="level3">
<h3 class="anchored" data-anchor-id="key-points-8">Key Points:</h3>
<ul>
<li>Plots in <strong>ggplot2</strong> consist of 3 main components:
<ul>
<li><strong>Data</strong>: The dataset being summarized</li>
<li><strong>Geometry</strong>: The type of plot(scatterplot, boxplot, barplot, histogram, qqplot, smooth desity, etc.)</li>
<li><strong>Aesthetic mapping</strong>: Variable mapped to visual cues, such as x-axis and y-axis values and color.</li>
</ul></li>
</ul>
</section>
<section id="code-4" class="level3">
<h3 class="anchored" data-anchor-id="code-4">Code:</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1"></a><span class="fu">library</span>(dslabs)</span>
<span id="cb31-2"><a href="#cb31-2"></a><span class="fu">data</span>(murders)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="creating-a-new-plot" class="level2">
<h2 class="anchored" data-anchor-id="creating-a-new-plot">Creating a New Plot</h2>
<section id="key-points-9" class="level3">
<h3 class="anchored" data-anchor-id="key-points-9">Key Points:</h3>
<ul>
<li><p>You can associated a dataset <code>x</code> with a ggplot object with any of the 3 commands:</p>
<ul>
<li><strong><code>ggplot(data = x)</code></strong></li>
<li><strong><code>ggplot(x)</code></strong></li>
<li><strong><code>x %&gt;% ggplot()</code></strong></li>
</ul></li>
<li><p>You can assign a ggplot object to a variable. If the object is not assigned to a variable, it will automatically be displayed.</p></li>
<li><p>You can display a ggplot object assigned to a variable by printing that variable.</p></li>
</ul>
<p>Code:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb32-2"><a href="#cb32-2"></a><span class="fu">library</span>(dslabs)</span>
<span id="cb32-3"><a href="#cb32-3"></a><span class="fu">data</span>(murders)</span>
<span id="cb32-4"><a href="#cb32-4"></a></span>
<span id="cb32-5"><a href="#cb32-5"></a><span class="fu">ggplot</span>(<span class="at">data =</span> murders)</span>
<span id="cb32-6"><a href="#cb32-6"></a></span>
<span id="cb32-7"><a href="#cb32-7"></a>murders <span class="sc">%&gt;%</span> <span class="fu">ggplot</span>()</span>
<span id="cb32-8"><a href="#cb32-8"></a></span>
<span id="cb32-9"><a href="#cb32-9"></a>p <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data =</span> murders)</span>
<span id="cb32-10"><a href="#cb32-10"></a></span>
<span id="cb32-11"><a href="#cb32-11"></a><span class="fu">class</span>(p)</span>
<span id="cb32-12"><a href="#cb32-12"></a></span>
<span id="cb32-13"><a href="#cb32-13"></a><span class="fu">print</span>(p) <span class="co"># this is equivalent to simply typing p</span></span>
<span id="cb32-14"><a href="#cb32-14"></a>p </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="layers" class="level2">
<h2 class="anchored" data-anchor-id="layers">Layers</h2>
<section id="key-points-10" class="level3">
<h3 class="anchored" data-anchor-id="key-points-10">Key Points:</h3>
<ul>
<li><p>In <strong>ggplot2</strong>, graphs are created by adding layers to the ggplot object: DATA %&gt;% ggplot() + LAYER_1 + LAYER_2 + … + LAYER_N</p></li>
<li><p>The <strong><em>geometry layer</em></strong> defines that plot type and takes the format <code>geom_x</code> where <code>x</code> is the plot type.</p></li>
<li><p><strong><em>Aesthetic mappings</em></strong> describe how properties of <strong>the data connect with features of the graph</strong> (axis position, color, size, etc.) define aesthetic mapping with <code>aes()</code> function.</p></li>
<li><p><strong><code>aes()</code></strong> uses variable names from the object component (for example, <strong><code>total</code></strong> rather than <strong><code>murders$total</code></strong>).</p></li>
<li><p><strong><code>geom_point()</code></strong> creates a scatterplot and requires <code>x</code> and <code>y</code> aesthetic mappings.</p></li>
<li><p><strong><code>geom_text()</code></strong> and <strong><code>geom_label</code></strong> add text to a scatterplot and require <code>x</code>, <code>y</code>, and <code>label</code> aesthetic mappings.</p></li>
<li><p>To determine which aesthetic mappings are required for a geometry, read the help file for that geometry.</p></li>
<li><p>You can add layers with different aesthetic mappings to the same graph.</p></li>
</ul>
<p>Code: Adding layers to a plot</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb33-2"><a href="#cb33-2"></a><span class="fu">library</span>(dslabs)</span>
<span id="cb33-3"><a href="#cb33-3"></a><span class="fu">data</span>(murders)</span>
<span id="cb33-4"><a href="#cb33-4"></a></span>
<span id="cb33-5"><a href="#cb33-5"></a>murders <span class="sc">%&gt;%</span> <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb33-6"><a href="#cb33-6"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">x =</span> population<span class="sc">/</span><span class="dv">10</span><span class="sc">^</span><span class="dv">6</span>, <span class="at">y =</span> total))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1"></a><span class="co"># add points layer to predefined ggplot object</span></span>
<span id="cb34-2"><a href="#cb34-2"></a>p <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data =</span> murders)</span>
<span id="cb34-3"><a href="#cb34-3"></a>p <span class="sc">+</span> <span class="fu">geom_point</span>(<span class="fu">aes</span>(population<span class="sc">/</span><span class="dv">10</span><span class="sc">^</span><span class="dv">6</span>, total))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-25-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1"></a><span class="co"># add text layer to scatterplot</span></span>
<span id="cb35-2"><a href="#cb35-2"></a>p <span class="sc">+</span> <span class="fu">geom_point</span>(<span class="fu">aes</span>(population<span class="sc">/</span><span class="dv">10</span><span class="sc">^</span><span class="dv">6</span>, total)) <span class="sc">+</span></span>
<span id="cb35-3"><a href="#cb35-3"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(population<span class="sc">/</span><span class="dv">10</span><span class="sc">^</span><span class="dv">6</span>, total, <span class="at">label =</span> abb))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-25-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Code: Example of <code>aes</code> behavior</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1"></a><span class="co"># no error from this call</span></span>
<span id="cb36-2"><a href="#cb36-2"></a>p_test <span class="ot">&lt;-</span> p <span class="sc">+</span> <span class="fu">geom_text</span>(<span class="fu">aes</span>(population<span class="sc">/</span><span class="dv">10</span><span class="sc">^</span><span class="dv">6</span>, total, <span class="at">lable =</span> abb))</span>
<span id="cb36-3"><a href="#cb36-3"></a></span>
<span id="cb36-4"><a href="#cb36-4"></a><span class="co"># error - "abb" is not a globally defined variable and cannot be found outside of aes</span></span>
<span id="cb36-5"><a href="#cb36-5"></a>p_test <span class="ot">&lt;-</span> p <span class="sc">+</span> <span class="fu">geom_text</span>(<span class="fu">aes</span>(population<span class="sc">/</span><span class="dv">10</span><span class="sc">^</span><span class="dv">6</span>, total), <span class="at">label =</span> abb)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="thinkering" class="level2">
<h2 class="anchored" data-anchor-id="thinkering">Thinkering</h2>
<section id="key-points-11" class="level3">
<h3 class="anchored" data-anchor-id="key-points-11">Key Points:</h3>
<ul>
<li><p>You can modify arguments to geometry functions others than <code>aes()</code> and the data.</p></li>
<li><p>These arguments are not aesthetic mappings: the affect all data points the same way.</p></li>
<li><p><strong><em>Global aesthetic mappings</em></strong> apply to all geometries and can be defined when you initially call <code>ggplot()</code>. All the geometries added as layers will default to this mapping. Local aesthetic mapping add additional information or override the default mappings.</p></li>
</ul>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<strong>Nudge</strong> points a fixed distance
</div>
</div>
<div class="callout-body-container callout-body">
<p><a href="https://ggplot2.tidyverse.org/reference/position_nudge.html?q=nudge#null"><code>position_nudge(x = 0, y = 0)</code></a> is generally useful for adjusting the position of items on discrete scales by a small amount. Nudging is built in to <strong><code>geom_text()</code></strong> because it’s so useful for moving labels a small distance from what they’re labeling.</p>
</div>
</div>
<p>Code:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1"></a><span class="co"># change the size of the points</span></span>
<span id="cb37-2"><a href="#cb37-2"></a>p <span class="sc">+</span> <span class="fu">geom_point</span>(<span class="fu">aes</span>(population<span class="sc">/</span><span class="dv">10</span><span class="sc">^</span><span class="dv">6</span>, total), <span class="at">size =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb37-3"><a href="#cb37-3"></a>    <span class="fu">geom_text</span>(<span class="fu">aes</span>(population<span class="sc">/</span><span class="dv">10</span><span class="sc">^</span><span class="dv">6</span>, total, <span class="at">label =</span> abb))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-27-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1"></a><span class="co"># move text labels slightly to the right</span></span>
<span id="cb38-2"><a href="#cb38-2"></a>p <span class="sc">+</span> <span class="fu">geom_point</span>(<span class="fu">aes</span>(population<span class="sc">/</span><span class="dv">10</span><span class="sc">^</span><span class="dv">6</span>, total), <span class="at">size =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb38-3"><a href="#cb38-3"></a>    <span class="fu">geom_text</span>(<span class="fu">aes</span>(population<span class="sc">/</span><span class="dv">10</span><span class="sc">^</span><span class="dv">6</span>, total, <span class="at">label =</span> abb), <span class="at">nudge_x =</span> <span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-27-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1"></a><span class="co"># simplify code by adding global aesthetic</span></span>
<span id="cb39-2"><a href="#cb39-2"></a>p <span class="ot">&lt;-</span> murders <span class="sc">%&gt;%</span> <span class="fu">ggplot</span>(<span class="fu">aes</span>(population<span class="sc">/</span><span class="dv">10</span><span class="sc">^</span><span class="dv">6</span>, total, <span class="at">label =</span> abb))</span>
<span id="cb39-3"><a href="#cb39-3"></a>p <span class="sc">+</span> <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb39-4"><a href="#cb39-4"></a>    <span class="fu">geom_text</span>(<span class="at">nudge_x =</span> <span class="fl">1.5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-27-3.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1"></a><span class="co"># local aesthetics override global aesthetics</span></span>
<span id="cb40-2"><a href="#cb40-2"></a>p <span class="sc">+</span> <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb40-3"><a href="#cb40-3"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">x =</span> <span class="dv">10</span>, <span class="at">y =</span> <span class="dv">800</span>, <span class="at">label =</span> <span class="st">"Hello there!"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in geom_text(aes(x = 10, y = 800, label = "Hello there!")): All aesthetics have length 1, but the data has 51 rows.
ℹ Did you mean to use `annotate()`?</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-27-4.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="scales-labels-and-colors" class="level2">
<h2 class="anchored" data-anchor-id="scales-labels-and-colors">Scales, Labels, and Colors</h2>
<section id="textbook-links" class="level3">
<h3 class="anchored" data-anchor-id="textbook-links">Textbook links:</h3>
<ul>
<li><p><a href="http://rafalab.dfci.harvard.edu/dsbook/ggplot2.html#scales">Textbook section on <strong>scales</strong></a></p></li>
<li><p><a href="http://rafalab.dfci.harvard.edu/dsbook/ggplot2.html#labels-and-titles">Textbook section on <strong>labels and titles</strong></a></p></li>
<li><p><a href="http://rafalab.dfci.harvard.edu/dsbook/ggplot2.html#categories-as-colors">Textbook section on <strong>categories as colors</strong></a></p></li>
<li><p><a href="http://rafalab.dfci.harvard.edu/dsbook/ggplot2.html#annotation-shapes-and-adjustments">Textbook section on <strong>annotation, shapes and adjustments</strong></a></p></li>
</ul>
</section>
<section id="key-points-12" class="level3">
<h3 class="anchored" data-anchor-id="key-points-12">Key Points:</h3>
<ul>
<li><p>Convert the x-axis to log scale with <strong><code>scale_x_continuous(trans = "log10")</code></strong> or <strong><code>scale_x_log10()</code></strong>. Similar function exist for the y-axis.</p></li>
<li><p><strong>Add axis title</strong> with <strong><code>xlab()</code></strong> and <strong><code>ylab()</code></strong> function. <strong>Add a plot title</strong> with the <strong><code>ggtitle()</code></strong> function.</p></li>
<li><p><strong>Add a color mapping</strong> that colors points by a varaibale by defining <strong><code>col</code></strong> argument <strong>within <code>aes()</code></strong>. To color all pints the same way, define <strong><code>col</code></strong> outside of <strong><code>aes()</code></strong>.</p></li>
<li><p><strong>Add a line</strong> with the <strong><code>geom_abline()</code></strong> geometry. <strong><code>geom_abline()</code></strong> takes arguments <strong><code>slop</code></strong> (default = 1) and <strong><code>intercept</code></strong>(default = 0). Change the color with <strong><code>col</code></strong> or <strong><code>color</code></strong> and line type with <a href="https://r-charts.com/base-r/line-types/"><strong><code>lty</code></strong></a>.</p></li>
<li><p>Placing the line layer after the point layer will overlay the the line on top of the points. To overlay points on the line, <strong>place the line layer before the point layer</strong>.</p></li>
<li><p>There are many additional ways to tweak your graph that can be found in the <strong>ggplot2</strong> documentation, cheat sheet or on the internet. For example, you can change the legend title with <a href="https://www.jianshu.com/p/6ba336b3931f"><strong><code>scale_color_discrete</code></strong></a>.</p></li>
</ul>
</section>
<section id="code-log-scale-the-x-axis-and-y-axis" class="level3">
<h3 class="anchored" data-anchor-id="code-log-scale-the-x-axis-and-y-axis">Code: Log-scale the x-axis and y-axis</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1"></a><span class="co"># define p</span></span>
<span id="cb42-2"><a href="#cb42-2"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb42-3"><a href="#cb42-3"></a><span class="fu">library</span>(dslabs)</span>
<span id="cb42-4"><a href="#cb42-4"></a><span class="fu">data</span>(murders)</span>
<span id="cb42-5"><a href="#cb42-5"></a></span>
<span id="cb42-6"><a href="#cb42-6"></a>p <span class="ot">&lt;-</span> murders <span class="sc">%&gt;%</span> <span class="fu">ggplot</span>(<span class="fu">aes</span>(population<span class="sc">/</span><span class="dv">10</span><span class="sc">^</span><span class="dv">6</span>, total, <span class="at">label =</span> abb))</span>
<span id="cb42-7"><a href="#cb42-7"></a></span>
<span id="cb42-8"><a href="#cb42-8"></a><span class="co"># log base 10 scale the x-axis and y-axis</span></span>
<span id="cb42-9"><a href="#cb42-9"></a>p <span class="sc">+</span> <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb42-10"><a href="#cb42-10"></a>    <span class="fu">geom_text</span>(<span class="at">nudge_x =</span> <span class="fl">0.05</span>) <span class="sc">+</span></span>
<span id="cb42-11"><a href="#cb42-11"></a>    <span class="fu">scale_x_continuous</span>(<span class="at">trans =</span> <span class="st">"log10"</span>) <span class="sc">+</span></span>
<span id="cb42-12"><a href="#cb42-12"></a>    <span class="fu">scale_y_continuous</span>(<span class="at">trans =</span> <span class="st">"log10"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1"></a><span class="co"># efficient log scaling of the axes</span></span>
<span id="cb43-2"><a href="#cb43-2"></a>p <span class="sc">+</span> <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb43-3"><a href="#cb43-3"></a>    <span class="fu">geom_text</span>(<span class="at">nudge_x =</span> <span class="fl">0.05</span>) <span class="sc">+</span></span>
<span id="cb43-4"><a href="#cb43-4"></a>    <span class="fu">scale_x_log10</span>() <span class="sc">+</span></span>
<span id="cb43-5"><a href="#cb43-5"></a>    <span class="fu">scale_y_log10</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-29-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="code-add-labels-and-title" class="level3">
<h3 class="anchored" data-anchor-id="code-add-labels-and-title">Code: Add labels and title</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1"></a>p <span class="sc">+</span> <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb44-2"><a href="#cb44-2"></a>    <span class="fu">geom_text</span>(<span class="at">nudge_x =</span> <span class="fl">0.05</span>) <span class="sc">+</span></span>
<span id="cb44-3"><a href="#cb44-3"></a>    <span class="fu">scale_x_log10</span>() <span class="sc">+</span></span>
<span id="cb44-4"><a href="#cb44-4"></a>    <span class="fu">scale_y_log10</span>() <span class="sc">+</span></span>
<span id="cb44-5"><a href="#cb44-5"></a>    <span class="fu">xlab</span>(<span class="st">"Population in million(log scale)"</span>) <span class="sc">+</span></span>
<span id="cb44-6"><a href="#cb44-6"></a>    <span class="fu">ylab</span>(<span class="st">"Total number of murders(log scale)"</span>) <span class="sc">+</span></span>
<span id="cb44-7"><a href="#cb44-7"></a>    <span class="fu">ggtitle</span>(<span class="st">"US Gun Murders in 2010"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-30-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="code-change-color-of-the-points" class="level3">
<h3 class="anchored" data-anchor-id="code-change-color-of-the-points">Code: Change color of the points</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1"></a><span class="co"># redefine p to be everything except the points layer</span></span>
<span id="cb45-2"><a href="#cb45-2"></a>p <span class="ot">&lt;-</span> murders <span class="sc">%&gt;%</span> </span>
<span id="cb45-3"><a href="#cb45-3"></a>     <span class="fu">ggplot</span>(<span class="fu">aes</span>(population<span class="sc">/</span><span class="dv">10</span><span class="sc">^</span><span class="dv">6</span>, total, <span class="at">label =</span> abb)) <span class="sc">+</span></span>
<span id="cb45-4"><a href="#cb45-4"></a>     <span class="fu">geom_text</span>(<span class="at">nudge_x =</span> <span class="fl">0.075</span>) <span class="sc">+</span></span>
<span id="cb45-5"><a href="#cb45-5"></a>     <span class="fu">scale_x_log10</span>() <span class="sc">+</span></span>
<span id="cb45-6"><a href="#cb45-6"></a>     <span class="fu">scale_y_log10</span>() <span class="sc">+</span></span>
<span id="cb45-7"><a href="#cb45-7"></a>     <span class="fu">xlab</span>(<span class="st">"Population in million(log scale)"</span>) <span class="sc">+</span></span>
<span id="cb45-8"><a href="#cb45-8"></a>     <span class="fu">ylab</span>(<span class="st">"Total number of murders(log scale)"</span>) <span class="sc">+</span></span>
<span id="cb45-9"><a href="#cb45-9"></a>     <span class="fu">ggtitle</span>(<span class="st">"US Gun Murders in 2010"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1"></a><span class="co"># make all points blue</span></span>
<span id="cb46-2"><a href="#cb46-2"></a>p <span class="sc">+</span> <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">3</span>, <span class="at">color =</span> <span class="st">"blue"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-32-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1"></a><span class="co"># color points by region</span></span>
<span id="cb47-2"><a href="#cb47-2"></a>p <span class="sc">+</span> <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">col =</span> region), <span class="at">size =</span> <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-33-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="code-add-a-line-with-average-murder-rate" class="level3">
<h3 class="anchored" data-anchor-id="code-add-a-line-with-average-murder-rate">Code: Add a line with average murder rate</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1"></a>r <span class="ot">&lt;-</span> murders <span class="sc">%&gt;%</span> </span>
<span id="cb48-2"><a href="#cb48-2"></a>     <span class="fu">summarize</span>(<span class="at">rate =</span> <span class="fu">sum</span>(total) <span class="sc">/</span> <span class="fu">sum</span>(population) <span class="sc">*</span> <span class="dv">10</span><span class="sc">^</span><span class="dv">6</span>) <span class="sc">%&gt;%</span>      <span class="fu">pull</span>(rate)</span>
<span id="cb48-3"><a href="#cb48-3"></a></span>
<span id="cb48-4"><a href="#cb48-4"></a>p <span class="ot">&lt;-</span> p <span class="sc">+</span> <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">col =</span> region), <span class="at">size =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb48-5"><a href="#cb48-5"></a>         <span class="fu">geom_abline</span>(<span class="at">intercept =</span> <span class="fu">log10</span>(r)) <span class="co"># slop is default of 1</span></span>
<span id="cb48-6"><a href="#cb48-6"></a></span>
<span id="cb48-7"><a href="#cb48-7"></a><span class="co"># change line to dashed and dark grey, line under points</span></span>
<span id="cb48-8"><a href="#cb48-8"></a>p <span class="sc">+</span> <span class="fu">geom_abline</span>(<span class="at">intercept =</span> <span class="fu">log</span>(r), <span class="at">lty =</span> <span class="dv">2</span>, <span class="at">color =</span> <span class="st">"darkgrey"</span>) <span class="sc">+</span></span>
<span id="cb48-9"><a href="#cb48-9"></a>    <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">col =</span> region), <span class="at">size =</span> <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-34-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Line types in R: Ity
</div>
</div>
<div class="callout-body-container callout-body">
<p>The different <strong>line types</strong> available in <strong>R</strong> are shown in the figure hereafter. The argument <a href="http://www.sthda.com/english/wiki/line-types-in-r-lty"><strong>lty</strong></a> can be used to specify the <strong>line type</strong>. To change <strong>line width</strong>, the argument <strong>lwd</strong> can be used.</p>
</div>
</div>
</section>
<section id="code-change-legend-title" class="level3">
<h3 class="anchored" data-anchor-id="code-change-legend-title">Code: Change legend title</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1"></a><span class="co"># capitalize legend title</span></span>
<span id="cb49-2"><a href="#cb49-2"></a>p <span class="ot">&lt;-</span> p <span class="sc">+</span> <span class="fu">scale_color_discrete</span>(<span class="at">name =</span> <span class="st">"Region"</span>)</span>
<span id="cb49-3"><a href="#cb49-3"></a>p</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-35-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="add-on-packages" class="level2">
<h2 class="anchored" data-anchor-id="add-on-packages">Add-on packages</h2>
<section id="textbook-links-1" class="level3">
<h3 class="anchored" data-anchor-id="textbook-links-1">Textbook links:</h3>
<ul>
<li><a href="http://rafalab.dfci.harvard.edu/dsbook/ggplot2.html#add-on-packages">Textbook section on add-on packages</a></li>
<li><a href="http://rafalab.dfci.harvard.edu/dsbook/ggplot2.html#putting-it-all-together">Textbook section on putting it all together</a></li>
</ul>
</section>
<section id="key-points-13" class="level3">
<h3 class="anchored" data-anchor-id="key-points-13">Key Points</h3>
<ul>
<li><p>The style of a ggplot graph can be changed using the <code>theme()</code> function.</p></li>
<li><p>The <code>ggthemes</code> package adds additional themes.</p></li>
<li><p>The <code>ggrepel</code> package includes a geometry that repels text labels, ensuring they do not overlap with each other: <code>geom_text_repel()</code>.</p></li>
</ul>
</section>
<section id="code-adding-themes" class="level3">
<h3 class="anchored" data-anchor-id="code-adding-themes">Code: Adding themes</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1"></a><span class="co"># theme used for graphs in the textbook and course</span></span>
<span id="cb50-2"><a href="#cb50-2"></a><span class="fu">library</span>(dslabs)</span>
<span id="cb50-3"><a href="#cb50-3"></a><span class="fu">ds_theme_set</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1"></a><span class="co"># themes from ggthemes</span></span>
<span id="cb51-2"><a href="#cb51-2"></a><span class="fu">library</span>(ggthemes)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1"></a>p <span class="sc">+</span> <span class="fu">theme_economist</span>()    <span class="co"># style of the Economist magazine</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-38-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1"></a>p <span class="sc">+</span> <span class="fu">theme_fivethirtyeight</span>()    <span class="co"># style of the FiveThirtyEight website</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-38-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="code-putting-it-all-together-to-assemble-the-plot" class="level3">
<h3 class="anchored" data-anchor-id="code-putting-it-all-together-to-assemble-the-plot">Code: Putting it all together to assemble the plot</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1"></a><span class="co"># load libraries</span></span>
<span id="cb54-2"><a href="#cb54-2"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb54-3"><a href="#cb54-3"></a><span class="fu">library</span>(ggrepel)</span>
<span id="cb54-4"><a href="#cb54-4"></a><span class="fu">library</span>(ggthemes)</span>
<span id="cb54-5"><a href="#cb54-5"></a><span class="fu">library</span>(dslabs)</span>
<span id="cb54-6"><a href="#cb54-6"></a><span class="fu">data</span>(murders)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1"></a><span class="co"># define the intercept</span></span>
<span id="cb55-2"><a href="#cb55-2"></a>r <span class="ot">&lt;-</span> murders <span class="sc">%&gt;%</span></span>
<span id="cb55-3"><a href="#cb55-3"></a>    <span class="fu">summarize</span>(<span class="at">rate =</span> <span class="fu">sum</span>(total) <span class="sc">/</span> <span class="fu">sum</span>(population) <span class="sc">*</span> <span class="dv">10</span><span class="sc">^</span><span class="dv">6</span>) <span class="sc">%&gt;%</span></span>
<span id="cb55-4"><a href="#cb55-4"></a>    .<span class="sc">$</span>rate</span>
<span id="cb55-5"><a href="#cb55-5"></a>    </span>
<span id="cb55-6"><a href="#cb55-6"></a><span class="co"># make the plot, combining all elements</span></span>
<span id="cb55-7"><a href="#cb55-7"></a>murders <span class="sc">%&gt;%</span></span>
<span id="cb55-8"><a href="#cb55-8"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(population<span class="sc">/</span><span class="dv">10</span><span class="sc">^</span><span class="dv">6</span>, total, <span class="at">label =</span> abb)) <span class="sc">+</span></span>
<span id="cb55-9"><a href="#cb55-9"></a>    <span class="fu">geom_abline</span>(<span class="at">intercept =</span> <span class="fu">log10</span>(r), <span class="at">lty =</span> <span class="dv">2</span>, <span class="at">color =</span> <span class="st">"darkgrey"</span>) <span class="sc">+</span></span>
<span id="cb55-10"><a href="#cb55-10"></a>    <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">col =</span> region), <span class="at">size =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb55-11"><a href="#cb55-11"></a>    <span class="fu">geom_text_repel</span>() <span class="sc">+</span></span>
<span id="cb55-12"><a href="#cb55-12"></a>    <span class="fu">scale_x_log10</span>() <span class="sc">+</span></span>
<span id="cb55-13"><a href="#cb55-13"></a>    <span class="fu">scale_y_log10</span>() <span class="sc">+</span></span>
<span id="cb55-14"><a href="#cb55-14"></a>    <span class="fu">xlab</span>(<span class="st">"Population in millions (log scale)"</span>) <span class="sc">+</span></span>
<span id="cb55-15"><a href="#cb55-15"></a>    <span class="fu">ylab</span>(<span class="st">"Total number of murders (log scale)"</span>) <span class="sc">+</span></span>
<span id="cb55-16"><a href="#cb55-16"></a>    <span class="fu">ggtitle</span>(<span class="st">"US Gun Murders in 2010"</span>) <span class="sc">+</span></span>
<span id="cb55-17"><a href="#cb55-17"></a>    <span class="fu">scale_color_discrete</span>(<span class="at">name =</span> <span class="st">"Region"</span>) <span class="sc">+</span></span>
<span id="cb55-18"><a href="#cb55-18"></a>    <span class="fu">theme_economist</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-40-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="other-examples" class="level2">
<h2 class="anchored" data-anchor-id="other-examples">Other Examples</h2>
<section id="textbook-links-2" class="level3">
<h3 class="anchored" data-anchor-id="textbook-links-2">Textbook links:</h3>
<ul>
<li><p><a href="http://rafalab.dfci.harvard.edu/dsbook/distributions.html#histograms-1">Textbook section on histograms</a></p></li>
<li><p><a href="http://rafalab.dfci.harvard.edu/dsbook/distributions.html#density-plots">Textbook section on density plots</a></p></li>
<li><p><a href="http://rafalab.dfci.harvard.edu/dsbook/ggplot2.html#grids-of-plots">Textbook section on grids of plots</a></p></li>
</ul>
</section>
<section id="key-points-14" class="level3">
<h3 class="anchored" data-anchor-id="key-points-14">Key points</h3>
<ul>
<li><p><code>geom_histogram()</code> creates a histogram. Use the <strong>binwidth</strong> argument to change the width of bins, the fill argument to change the bar fill color, and the col argument to change bar outline color.</p></li>
<li><p><code>geom_density()</code> creates smooth density plots. Change the fill color of the plot with the fill argument.</p></li>
<li><p><code>geom_qq()</code> creates a quantile-quantile plot. This geometry requires the sample argument. By default, the data are compared to a standard normal distribution with a mean of 0 and standard deviation of 1. This can be changed with the dparams argument, or the sample data can be scaled.</p></li>
<li><p>Plots can be arranged adjacent to each other using the <code>grid.arrange()</code> function from the <strong>gridExtra</strong> package. First, create the plots and save them to objects (p1, p2, …). Then pass the plot objects to <code>grid.arrange()</code>.</p></li>
</ul>
</section>
<section id="code-histograms-in-ggplot2" class="level3">
<h3 class="anchored" data-anchor-id="code-histograms-in-ggplot2">Code: Histograms in ggplot2</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb56-2"><a href="#cb56-2"></a><span class="fu">library</span>(dslabs)</span>
<span id="cb56-3"><a href="#cb56-3"></a><span class="fu">data</span>(heights)</span>
<span id="cb56-4"><a href="#cb56-4"></a></span>
<span id="cb56-5"><a href="#cb56-5"></a><span class="co"># define p</span></span>
<span id="cb56-6"><a href="#cb56-6"></a>p <span class="ot">&lt;-</span> heights <span class="sc">%&gt;%</span> </span>
<span id="cb56-7"><a href="#cb56-7"></a>  <span class="fu">filter</span>(sex <span class="sc">==</span> <span class="st">"Male"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb56-8"><a href="#cb56-8"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>height))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1"></a><span class="co"># basic histograms</span></span>
<span id="cb57-2"><a href="#cb57-2"></a>p <span class="sc">+</span> <span class="fu">geom_histogram</span>() <span class="sc">+</span> <span class="fu">ggtitle</span>(<span class="st">"binwidth is default"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-42-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1"></a>p <span class="sc">+</span> <span class="fu">geom_histogram</span>(<span class="at">binwidth =</span> <span class="dv">1</span>) <span class="sc">+</span> <span class="fu">ggtitle</span>(<span class="st">"binwidth is 1"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-42-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1"></a><span class="co"># histogram with blue fill, black outline, labels and title</span></span>
<span id="cb60-2"><a href="#cb60-2"></a>p <span class="sc">+</span> <span class="fu">geom_histogram</span>(<span class="at">binwidth =</span> <span class="dv">1</span>, <span class="at">fill =</span><span class="st">"blue"</span>, <span class="at">col =</span> <span class="st">"black"</span>) <span class="sc">+</span> </span>
<span id="cb60-3"><a href="#cb60-3"></a>  <span class="fu">xlab</span>(<span class="st">"Male heights in inches"</span>) <span class="sc">+</span></span>
<span id="cb60-4"><a href="#cb60-4"></a>  <span class="fu">ggtitle</span>(<span class="st">"histogram"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-42-3.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="code-smooth-density-plots-in-ggplot2" class="level3">
<h3 class="anchored" data-anchor-id="code-smooth-density-plots-in-ggplot2">Code: Smooth density plots in ggplot2</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1"></a>p <span class="sc">+</span> <span class="fu">geom_density</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-43-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb62-1"><a href="#cb62-1"></a>p <span class="sc">+</span> <span class="fu">geom_density</span>(<span class="at">fill =</span> <span class="st">"blue"</span>, <span class="at">col =</span> <span class="st">"red"</span>) <span class="sc">+</span></span>
<span id="cb62-2"><a href="#cb62-2"></a>  <span class="fu">xlab</span>(<span class="st">"Male heights in inches"</span>) <span class="sc">+</span></span>
<span id="cb62-3"><a href="#cb62-3"></a>  <span class="fu">ylab</span>(<span class="st">"proportion of Male heights"</span>) <span class="sc">+</span></span>
<span id="cb62-4"><a href="#cb62-4"></a>  <span class="fu">ggtitle</span>(<span class="st">"Male heights distribution"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-43-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="code-quantile-quantile-plots-in-ggplot2" class="level3">
<h3 class="anchored" data-anchor-id="code-quantile-quantile-plots-in-ggplot2">Code: Quantile-quantile plots in ggplot2</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb63"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb63-1"><a href="#cb63-1"></a><span class="co"># basic QQ-plot</span></span>
<span id="cb63-2"><a href="#cb63-2"></a>p <span class="ot">&lt;-</span> heights <span class="sc">%&gt;%</span> <span class="fu">filter</span>(sex <span class="sc">==</span> <span class="st">"Male"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb63-3"><a href="#cb63-3"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">sample =</span> height))</span>
<span id="cb63-4"><a href="#cb63-4"></a>p <span class="sc">+</span> <span class="fu">geom_qq</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-44-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb64"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb64-1"><a href="#cb64-1"></a><span class="co"># QQ-plot against a normal distribution with same mean/sd as data</span></span>
<span id="cb64-2"><a href="#cb64-2"></a>params <span class="ot">&lt;-</span> heights <span class="sc">%&gt;%</span> </span>
<span id="cb64-3"><a href="#cb64-3"></a>  <span class="fu">filter</span>(sex <span class="sc">==</span> <span class="st">"Male"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb64-4"><a href="#cb64-4"></a>  <span class="fu">summarize</span>(<span class="at">mean =</span> <span class="fu">mean</span>(height), <span class="at">sd =</span> <span class="fu">sd</span>(height))</span>
<span id="cb64-5"><a href="#cb64-5"></a>p <span class="sc">+</span> <span class="fu">geom_qq</span>(<span class="at">dparams =</span> params) <span class="sc">+</span></span>
<span id="cb64-6"><a href="#cb64-6"></a>  <span class="fu">geom_abline</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-44-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb65"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb65-1"><a href="#cb65-1"></a><span class="co"># QQ-plot of scaled data against the standard normal distribution</span></span>
<span id="cb65-2"><a href="#cb65-2"></a>heights <span class="sc">%&gt;%</span> </span>
<span id="cb65-3"><a href="#cb65-3"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">sample =</span> <span class="fu">scale</span>(height))) <span class="sc">+</span></span>
<span id="cb65-4"><a href="#cb65-4"></a>  <span class="fu">geom_qq</span>() <span class="sc">+</span></span>
<span id="cb65-5"><a href="#cb65-5"></a>  <span class="fu">geom_abline</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-44-3.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb66"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb66-1"><a href="#cb66-1"></a><span class="co"># define plots p1, p2, p3</span></span>
<span id="cb66-2"><a href="#cb66-2"></a>p <span class="ot">&lt;-</span> heights <span class="sc">%&gt;%</span> <span class="fu">filter</span>(sex <span class="sc">==</span> <span class="st">"Male"</span>) <span class="sc">%&gt;%</span> <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> height))</span>
<span id="cb66-3"><a href="#cb66-3"></a>p1 <span class="ot">&lt;-</span> p <span class="sc">+</span> <span class="fu">geom_histogram</span>(<span class="at">binwidth =</span> <span class="dv">1</span>, <span class="at">fill =</span> <span class="st">"blue"</span>, <span class="at">col =</span> <span class="st">"black"</span>)</span>
<span id="cb66-4"><a href="#cb66-4"></a>p2 <span class="ot">&lt;-</span> p <span class="sc">+</span> <span class="fu">geom_histogram</span>(<span class="at">binwidth =</span> <span class="dv">2</span>, <span class="at">fill =</span> <span class="st">"blue"</span>, <span class="at">col =</span> <span class="st">"black"</span>)</span>
<span id="cb66-5"><a href="#cb66-5"></a>p3 <span class="ot">&lt;-</span> p <span class="sc">+</span> <span class="fu">geom_histogram</span>(<span class="at">binwidth =</span> <span class="dv">3</span>, <span class="at">fill =</span> <span class="st">"blue"</span>, <span class="at">col =</span> <span class="st">"black"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb67"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb67-1"><a href="#cb67-1"></a><span class="co"># arrange plots next to each other in 1 row, 3 columns</span></span>
<span id="cb67-2"><a href="#cb67-2"></a><span class="fu">library</span>(gridExtra)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb68"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb68-1"><a href="#cb68-1"></a><span class="fu">grid.arrange</span>(p1, p2, p3, <span class="at">ncol =</span> <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-47-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
</section>
</section>
<section id="gapminder" class="level1 page-columns page-full">
<h1>Gapminder</h1>
<section id="overview-2" class="level2">
<h2 class="anchored" data-anchor-id="overview-2">Overview</h2>
<p>After completing Gapminder, you will: - understand how Hans Rosling and the Gapminder Foundation use effective data visualization to convey data-based trends.</p>
<ul>
<li><p>be able to apply the <strong>ggplot2</strong> techniques from the previous section to answer questions using data.</p></li>
<li><p>understand how fixed scales across plots can ease comparisons.</p></li>
<li><p>be able to modify graphs to improve data visualization.</p></li>
</ul>
</section>
<section id="introduction-to-gapminder" class="level2">
<h2 class="anchored" data-anchor-id="introduction-to-gapminder">Introduction to Gapminder</h2>
<p>Case study: Trends in World Health and Economics</p>
<p>Data Source form Gapminder</p>
<p>We will use this data to answer the following questions about World Health and Economics: - Is it still fair to consider the world as divided into the West and the developing world? - Has income inequality across countries worsened over the last 40 years?</p>
</section>
<section id="gapminder-dataset" class="level2">
<h2 class="anchored" data-anchor-id="gapminder-dataset">Gapminder Dataset</h2>
<section id="key-points-15" class="level3">
<h3 class="anchored" data-anchor-id="key-points-15">Key Points</h3>
<ul>
<li><p>A selection of world health and economics statistics from the Gapminder project can be found in the <code>dslabs</code> package as data(gapminder).</p></li>
<li><p>Most people have <strong>misconceptions</strong> about world health and economics, which can be addressed by considering real data.</p></li>
</ul>
</section>
<section id="code-5" class="level3">
<h3 class="anchored" data-anchor-id="code-5">Code</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb69"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb69-1"><a href="#cb69-1"></a><span class="fu">library</span>(dslabs)</span>
<span id="cb69-2"><a href="#cb69-2"></a><span class="fu">data</span>(<span class="st">"gapminder"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb70"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb70-1"><a href="#cb70-1"></a><span class="fu">head</span>(gapminder)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>              country year infant_mortality life_expectancy fertility
1             Albania 1960           115.40           62.87      6.19
2             Algeria 1960           148.20           47.50      7.65
3              Angola 1960           208.00           35.98      7.32
4 Antigua and Barbuda 1960               NA           62.97      4.43
5           Argentina 1960            59.87           65.39      3.11
6             Armenia 1960               NA           66.86      4.55
  population          gdp continent          region
1    1636054           NA    Europe Southern Europe
2   11124892  13828152297    Africa Northern Africa
3    5270844           NA    Africa   Middle Africa
4      54681           NA  Americas       Caribbean
5   20619075 108322326649  Americas   South America
6    1867396           NA      Asia    Western Asia</code></pre>
</div>
<div class="sourceCode cell-code" id="cb72"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb72-1"><a href="#cb72-1"></a><span class="fu">names</span>(gapminder)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "country"          "year"             "infant_mortality" "life_expectancy" 
[5] "fertility"        "population"       "gdp"              "continent"       
[9] "region"          </code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb74"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb74-1"><a href="#cb74-1"></a>gapminder <span class="sc">%&gt;%</span> </span>
<span id="cb74-2"><a href="#cb74-2"></a>  <span class="fu">filter</span>(year <span class="sc">==</span> <span class="dv">2015</span> <span class="sc">&amp;</span> country <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Sri Lanka"</span>, <span class="st">"Turkey"</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb74-3"><a href="#cb74-3"></a>  <span class="fu">select</span>(country, infant_mortality)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    country infant_mortality
1 Sri Lanka              8.4
2    Turkey             11.6</code></pre>
</div>
</div>
</section>
</section>
<section id="life-expectancy-and-fertility-rates" class="level2">
<h2 class="anchored" data-anchor-id="life-expectancy-and-fertility-rates">Life Expectancy and Fertility Rates</h2>
<section id="key-points-16" class="level3">
<h3 class="anchored" data-anchor-id="key-points-16">Key Points</h3>
<ul>
<li><p>A prevalent worldview is that the world is divided into two groups of countries:</p>
<ul>
<li><p>Western world: high life expectancy, low fertility rate</p></li>
<li><p>Developing world: lower life expectancy, higher fertility rate</p></li>
</ul></li>
<li><p>Gapminder data can be used to evaluate the validity of this view.</p></li>
<li><p>A scatterplot of life expectancy versus fertility rate in 1962 suggests that this viewpoint was grounded in reality 50 years ago. Is it still the case today?</p></li>
</ul>
</section>
<section id="code-6" class="level3">
<h3 class="anchored" data-anchor-id="code-6">Code</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb76"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb76-1"><a href="#cb76-1"></a><span class="co"># basic scatterplot of life expectancy versus fertility</span></span>
<span id="cb76-2"><a href="#cb76-2"></a><span class="fu">ds_theme_set</span>() <span class="co"># set plot theme</span></span>
<span id="cb76-3"><a href="#cb76-3"></a><span class="fu">filter</span>(gapminder, year <span class="sc">==</span> <span class="dv">1962</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb76-4"><a href="#cb76-4"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(fertility, life_expectancy)) <span class="sc">+</span></span>
<span id="cb76-5"><a href="#cb76-5"></a>  <span class="fu">geom_point</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-51-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb77"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb77-1"><a href="#cb77-1"></a><span class="co"># add color as continent</span></span>
<span id="cb77-2"><a href="#cb77-2"></a><span class="fu">filter</span>(gapminder, year <span class="sc">==</span> <span class="dv">1962</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb77-3"><a href="#cb77-3"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(fertility, life_expectancy, <span class="at">color =</span> continent)) <span class="sc">+</span></span>
<span id="cb77-4"><a href="#cb77-4"></a>  <span class="fu">geom_point</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-51-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="faceting" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="faceting">Faceting</h2>
<section id="key-points-17" class="level3 page-columns page-full">
<h3 class="anchored" data-anchor-id="key-points-17">Key Points</h3>
<ul>
<li><p>Faceting <strong>makes multiple side-by-side plots stratified by some variable</strong>. This is a way to ease comparisons.</p></li>
<li><p>The <code>facet_grid()</code> function allows <em>faceting by up to two variables</em>, with rows faceted by one variable and columns faceted by the other variable. To facet by only one variable, use the dot operator as the other variable.</p></li>
<li><p>The <code>facet_wrap()</code> function <em>facets by one variable and automatically wraps the series of plots</em> so they have readable dimensions.</p></li>
<li><p>Faceting keeps the axes fixed across all plots, easing comparisons between plots.</p></li>
<li><p>The data suggest that the developing versus Western world view no longer makes sense in 2012.</p></li>
</ul>
<div class="page-columns page-full"><p> </p><div class="no-row-height column-margin column-container"><span class="margin-aside">ggplot2-<a href="https://blog.csdn.net/tanzuozhev/article/details/51112177">分面(facet) 一页多图</a></span><span class="margin-aside">数据可视化章节学习<a href="https://zhuanlan.zhihu.com/p/31044450">facet</a></span></div></div>
</section>
<section id="code-7" class="level3">
<h3 class="anchored" data-anchor-id="code-7">Code</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb78"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb78-1"><a href="#cb78-1"></a><span class="co"># facet by continent and year</span></span>
<span id="cb78-2"><a href="#cb78-2"></a><span class="fu">filter</span>(gapminder, year <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">1962</span>, <span class="dv">2012</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb78-3"><a href="#cb78-3"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(fertility, life_expectancy, <span class="at">col =</span> continent)) <span class="sc">+</span></span>
<span id="cb78-4"><a href="#cb78-4"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb78-5"><a href="#cb78-5"></a>  <span class="fu">facet_grid</span>(continent <span class="sc">~</span> year)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-52-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb79"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb79-1"><a href="#cb79-1"></a><span class="co"># facet by year only </span></span>
<span id="cb79-2"><a href="#cb79-2"></a><span class="fu">filter</span>(gapminder, year <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">1962</span>, <span class="dv">2012</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb79-3"><a href="#cb79-3"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(fertility, life_expectancy, <span class="at">col =</span> continent)) <span class="sc">+</span></span>
<span id="cb79-4"><a href="#cb79-4"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb79-5"><a href="#cb79-5"></a>  <span class="fu">facet_grid</span>(. <span class="sc">~</span> year)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-52-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb80"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb80-1"><a href="#cb80-1"></a><span class="co"># facet by year, plots wrapped onto multiple rows</span></span>
<span id="cb80-2"><a href="#cb80-2"></a>years <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1962</span>, <span class="dv">1980</span>, <span class="dv">1990</span>, <span class="dv">2000</span>, <span class="dv">2012</span>)</span>
<span id="cb80-3"><a href="#cb80-3"></a>continents <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Europ"</span>, <span class="st">"Asia"</span>)</span>
<span id="cb80-4"><a href="#cb80-4"></a>gapminder <span class="sc">%&gt;%</span> </span>
<span id="cb80-5"><a href="#cb80-5"></a>  <span class="fu">filter</span>(year <span class="sc">%in%</span> years <span class="sc">&amp;</span> continent <span class="sc">%in%</span> continent) <span class="sc">%&gt;%</span> </span>
<span id="cb80-6"><a href="#cb80-6"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(fertility, life_expectancy, <span class="at">col =</span> continent)) <span class="sc">+</span></span>
<span id="cb80-7"><a href="#cb80-7"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb80-8"><a href="#cb80-8"></a>  <span class="fu">facet_wrap</span>(. <span class="sc">~</span> year)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-52-3.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="time-series-plots" class="level2">
<h2 class="anchored" data-anchor-id="time-series-plots">Time Series Plots</h2>
<section id="key-points-18" class="level3">
<h3 class="anchored" data-anchor-id="key-points-18">Key Points</h3>
<ul>
<li><p>Time series plots have time on the <em>x-axis</em> and a variable of interest on the <em>y-axis</em>.</p></li>
<li><p>The <code>geom_line()</code> geometry connects adjacent data points to form a continuous line. A line plot is appropriate when points are regularly spaced, densely packed and from a single data series.</p></li>
<li><p>You can plot multiple lines on the same graph. Remember to group or color by a variable so that the lines are plotted independently.</p></li>
<li><p>Labeling is usually preferred over legends. However, legends are easier to make and appear by default. Add a label with <code>geom_text()</code>, specifying the coordinates where the label should appear on the graph.</p></li>
</ul>
</section>
<section id="code-single-time-series" class="level3">
<h3 class="anchored" data-anchor-id="code-single-time-series">Code: Single Time Series</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb81"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb81-1"><a href="#cb81-1"></a><span class="co"># scatterplot of US fertility by year</span></span>
<span id="cb81-2"><a href="#cb81-2"></a>gapminder <span class="sc">%&gt;%</span> </span>
<span id="cb81-3"><a href="#cb81-3"></a>  <span class="fu">filter</span>(country <span class="sc">==</span> <span class="st">"United States"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb81-4"><a href="#cb81-4"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(year, fertility)) <span class="sc">+</span></span>
<span id="cb81-5"><a href="#cb81-5"></a>  <span class="fu">geom_point</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-53-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb82"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb82-1"><a href="#cb82-1"></a><span class="co"># line plot of US fertility by year</span></span>
<span id="cb82-2"><a href="#cb82-2"></a>gapminder <span class="sc">%&gt;%</span> </span>
<span id="cb82-3"><a href="#cb82-3"></a>  <span class="fu">filter</span>(country <span class="sc">==</span> <span class="st">"United States"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb82-4"><a href="#cb82-4"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(year, fertility)) <span class="sc">+</span></span>
<span id="cb82-5"><a href="#cb82-5"></a>  <span class="fu">geom_line</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-53-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="code-multiple-time-series" class="level3">
<h3 class="anchored" data-anchor-id="code-multiple-time-series">Code: Multiple Time Series</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb83"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb83-1"><a href="#cb83-1"></a><span class="co"># line plot fertility time series for two countries- only one line (incorrect)</span></span>
<span id="cb83-2"><a href="#cb83-2"></a>countries <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"South Korea"</span>, <span class="st">"Germany"</span>)</span>
<span id="cb83-3"><a href="#cb83-3"></a>gapminder <span class="sc">%&gt;%</span> <span class="fu">filter</span>(country <span class="sc">%in%</span> countries) <span class="sc">%&gt;%</span></span>
<span id="cb83-4"><a href="#cb83-4"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(year, fertility)) <span class="sc">+</span></span>
<span id="cb83-5"><a href="#cb83-5"></a>    <span class="fu">geom_line</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-54-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb84"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb84-1"><a href="#cb84-1"></a><span class="co"># line plot fertility time series for two countries - one line per country</span></span>
<span id="cb84-2"><a href="#cb84-2"></a>gapminder <span class="sc">%&gt;%</span> <span class="fu">filter</span>(country <span class="sc">%in%</span> countries) <span class="sc">%&gt;%</span></span>
<span id="cb84-3"><a href="#cb84-3"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(year, fertility, <span class="at">group =</span> country)) <span class="sc">+</span></span>
<span id="cb84-4"><a href="#cb84-4"></a>    <span class="fu">geom_line</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-54-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb85"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb85-1"><a href="#cb85-1"></a><span class="co"># fertility time series for two countries - lines colored by country</span></span>
<span id="cb85-2"><a href="#cb85-2"></a>gapminder <span class="sc">%&gt;%</span> <span class="fu">filter</span>(country <span class="sc">%in%</span> countries) <span class="sc">%&gt;%</span></span>
<span id="cb85-3"><a href="#cb85-3"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(year, fertility, <span class="at">col =</span> country)) <span class="sc">+</span></span>
<span id="cb85-4"><a href="#cb85-4"></a>    <span class="fu">geom_line</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-54-3.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="code-adding-text-labels-to-a-plot" class="level3">
<h3 class="anchored" data-anchor-id="code-adding-text-labels-to-a-plot">Code: Adding text labels to a plot</h3>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p><strong>labels data frame as the data to ensure where to start label text</strong> <img src="https://raw.githubusercontent.com/NING3739/my-personal-website/main/geom_text.png" class="img-fluid"></p>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb86"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb86-1"><a href="#cb86-1"></a><span class="co"># life expectancy time series - lines colored by country and labeled, no legend</span></span>
<span id="cb86-2"><a href="#cb86-2"></a>labels <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">country =</span> countries, <span class="at">x =</span> <span class="fu">c</span>(<span class="dv">1975</span>, <span class="dv">1965</span>), <span class="at">y =</span> <span class="fu">c</span>(<span class="dv">60</span>, <span class="dv">72</span>))</span>
<span id="cb86-3"><a href="#cb86-3"></a>gapminder <span class="sc">%&gt;%</span> <span class="fu">filter</span>(country <span class="sc">%in%</span> countries) <span class="sc">%&gt;%</span></span>
<span id="cb86-4"><a href="#cb86-4"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(year, life_expectancy, <span class="at">col =</span> country)) <span class="sc">+</span></span>
<span id="cb86-5"><a href="#cb86-5"></a>    <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb86-6"><a href="#cb86-6"></a>    <span class="fu">geom_text</span>(<span class="at">data =</span> labels, <span class="fu">aes</span>(x, y, <span class="at">label =</span> country), <span class="at">size =</span> <span class="dv">5</span>) <span class="sc">+</span></span>
<span id="cb86-7"><a href="#cb86-7"></a>    <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-55-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="transformations" class="level2">
<h2 class="anchored" data-anchor-id="transformations">Transformations</h2>
<section id="key-points-19" class="level3">
<h3 class="anchored" data-anchor-id="key-points-19">Key Points</h3>
<ul>
<li><p>We use GDP data to compute income in US dollars per day, adjusted for inflation.</p></li>
<li><p>Log transformations covert multiplicative changes into additive changes.</p></li>
<li><p>common transformations are the log base 2 transformation and the log base 10 transformation. The choice of base depends on the range of the data. The natural log is not recommended for visualization because it is difficult to interpret.</p></li>
<li><p>The mode of a distribution is the value with the highest frequency. The mode of a normal distribution is the average. A distribution can have multiple local modes.</p></li>
<li><p>There are two ways to use log transformations in plots: transform the data before plotting or transform the axes of the plot. Log scales have the advantage of showing the original values as axis labels, while log transformed values ease interpretation of intermediate values between labels.</p></li>
<li><p>Scale the x-axis using <code>scale_x_continuous()</code> or <code>scale_x_log10()</code> layers in ggplot2. Similar functions exist for the y-axis.</p></li>
<li><p>In 1970, income distribution is bimodal, consistent with the dichotomous Western versus developing worldview.</p></li>
</ul>
</section>
<section id="code-8" class="level3">
<h3 class="anchored" data-anchor-id="code-8">Code</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb87"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb87-1"><a href="#cb87-1"></a><span class="co"># add dollars per day variable</span></span>
<span id="cb87-2"><a href="#cb87-2"></a>gapminder <span class="ot">&lt;-</span> gapminder <span class="sc">%&gt;%</span> </span>
<span id="cb87-3"><a href="#cb87-3"></a>  <span class="fu">mutate</span>(<span class="at">dollars_per_day =</span> gdp<span class="sc">/</span>population<span class="sc">/</span><span class="dv">365</span>)</span>
<span id="cb87-4"><a href="#cb87-4"></a></span>
<span id="cb87-5"><a href="#cb87-5"></a><span class="co"># histogram of dollars per day</span></span>
<span id="cb87-6"><a href="#cb87-6"></a>past_year <span class="ot">&lt;-</span> <span class="dv">1970</span></span>
<span id="cb87-7"><a href="#cb87-7"></a>gapminder <span class="sc">%&gt;%</span> </span>
<span id="cb87-8"><a href="#cb87-8"></a>  <span class="fu">filter</span>(year <span class="sc">==</span> past_year <span class="sc">&amp;</span> <span class="sc">!</span><span class="fu">is.na</span>(gdp)) <span class="sc">%&gt;%</span> </span>
<span id="cb87-9"><a href="#cb87-9"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(dollars_per_day)) <span class="sc">+</span></span>
<span id="cb87-10"><a href="#cb87-10"></a>  <span class="fu">geom_histogram</span>(<span class="at">binwidth =</span> <span class="dv">1</span>, <span class="at">color =</span> <span class="st">"black"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-56-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb88"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb88-1"><a href="#cb88-1"></a><span class="co"># repeat histogram with log2 scaled data</span></span>
<span id="cb88-2"><a href="#cb88-2"></a>gapminder <span class="sc">%&gt;%</span></span>
<span id="cb88-3"><a href="#cb88-3"></a>    <span class="fu">filter</span>(year <span class="sc">==</span> past_year <span class="sc">&amp;</span> <span class="sc">!</span><span class="fu">is.na</span>(gdp)) <span class="sc">%&gt;%</span></span>
<span id="cb88-4"><a href="#cb88-4"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="fu">log2</span>(dollars_per_day))) <span class="sc">+</span></span>
<span id="cb88-5"><a href="#cb88-5"></a>    <span class="fu">geom_histogram</span>(<span class="at">binwidth =</span> <span class="dv">1</span>, <span class="at">color =</span> <span class="st">"black"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-56-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb89"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb89-1"><a href="#cb89-1"></a><span class="co"># repeat histogram with log2 scaled x-axis</span></span>
<span id="cb89-2"><a href="#cb89-2"></a>gapminder <span class="sc">%&gt;%</span></span>
<span id="cb89-3"><a href="#cb89-3"></a>    <span class="fu">filter</span>(year <span class="sc">==</span> past_year <span class="sc">&amp;</span> <span class="sc">!</span><span class="fu">is.na</span>(gdp)) <span class="sc">%&gt;%</span></span>
<span id="cb89-4"><a href="#cb89-4"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(dollars_per_day)) <span class="sc">+</span></span>
<span id="cb89-5"><a href="#cb89-5"></a>    <span class="fu">geom_histogram</span>(<span class="at">binwidth =</span> <span class="dv">1</span>, <span class="at">color =</span> <span class="st">"black"</span>) <span class="sc">+</span></span>
<span id="cb89-6"><a href="#cb89-6"></a>    <span class="fu">scale_x_continuous</span>(<span class="at">trans =</span> <span class="st">"log2"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-56-3.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="stratify-and-boxplot" class="level2">
<h2 class="anchored" data-anchor-id="stratify-and-boxplot">Stratify and Boxplot</h2>
<section id="key-points-20" class="level3">
<h3 class="anchored" data-anchor-id="key-points-20">Key Points</h3>
<ul>
<li><p>Make boxplots stratified by a categorical variable using the <code>geom_boxplot()</code> geometry.</p></li>
<li><p>Rotate axis labels by changing the theme through <code>element_text()</code>. You can change the angle and justification of the text labels.</p></li>
<li><p>Consider ordering your factors by a meaningful value with the <code>reorder</code> function, which changes the order of factor levels based on a related numeric vector. This is a way to ease comparisons.</p></li>
<li><p>Show the data by adding data points to the boxplot with a <code>geom_point</code> layer. This adds information beyond the five-number summary to your plot, but too many data points it can obfuscate your message.</p></li>
</ul>
</section>
<section id="code-boxplot-of-gdp-by-region" class="level3">
<h3 class="anchored" data-anchor-id="code-boxplot-of-gdp-by-region">Code: Boxplot of GDP by region</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb90"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb90-1"><a href="#cb90-1"></a><span class="co"># add dollars per day variable</span></span>
<span id="cb90-2"><a href="#cb90-2"></a>gapminder <span class="ot">&lt;-</span> gapminder <span class="sc">%&gt;%</span> </span>
<span id="cb90-3"><a href="#cb90-3"></a>  <span class="fu">mutate</span>(<span class="at">dollars_per_day =</span> gdp<span class="sc">/</span>population<span class="sc">/</span><span class="dv">365</span>)</span>
<span id="cb90-4"><a href="#cb90-4"></a></span>
<span id="cb90-5"><a href="#cb90-5"></a><span class="co"># number of regions</span></span>
<span id="cb90-6"><a href="#cb90-6"></a><span class="fu">length</span>(<span class="fu">levels</span>(gapminder<span class="sc">$</span>region))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 22</code></pre>
</div>
<div class="sourceCode cell-code" id="cb92"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb92-1"><a href="#cb92-1"></a><span class="co"># boxplot of GDP by region in 1970</span></span>
<span id="cb92-2"><a href="#cb92-2"></a>past_year <span class="ot">&lt;-</span> <span class="dv">1970</span></span>
<span id="cb92-3"><a href="#cb92-3"></a>p <span class="ot">&lt;-</span> gapminder <span class="sc">%&gt;%</span> </span>
<span id="cb92-4"><a href="#cb92-4"></a>     <span class="fu">filter</span>(year <span class="sc">==</span> past_year <span class="sc">&amp;</span> <span class="sc">!</span><span class="fu">is.na</span>(gdp)) <span class="sc">%&gt;%</span> </span>
<span id="cb92-5"><a href="#cb92-5"></a>     <span class="fu">ggplot</span>(<span class="fu">aes</span>(region, dollars_per_day))</span>
<span id="cb92-6"><a href="#cb92-6"></a>p <span class="sc">+</span> <span class="fu">geom_boxplot</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-57-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb93"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb93-1"><a href="#cb93-1"></a><span class="co"># roation name on x-axis</span></span>
<span id="cb93-2"><a href="#cb93-2"></a>p <span class="sc">+</span> <span class="fu">geom_boxplot</span>() <span class="sc">+</span></span>
<span id="cb93-3"><a href="#cb93-3"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">90</span>, <span class="at">hjust =</span> <span class="dv">1</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-57-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="code-the-reorder-function" class="level3">
<h3 class="anchored" data-anchor-id="code-the-reorder-function">Code: The reorder function</h3>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p><a href="https://r-graph-gallery.com/267-reorder-a-variable-in-ggplot2.html">Reorder a variable with ggplot2</a></p>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb94"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb94-1"><a href="#cb94-1"></a><span class="co"># by default, factor order is alphabetical</span></span>
<span id="cb94-2"><a href="#cb94-2"></a>fac <span class="ot">&lt;-</span> <span class="fu">factor</span>(<span class="fu">c</span>(<span class="st">"Asia"</span>, <span class="st">"Asia"</span>, <span class="st">"West"</span>, <span class="st">"West"</span>, <span class="st">"West"</span>))</span>
<span id="cb94-3"><a href="#cb94-3"></a><span class="fu">levels</span>(fac)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Asia" "West"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb96"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb96-1"><a href="#cb96-1"></a><span class="co"># reorder factor by the category means</span></span>
<span id="cb96-2"><a href="#cb96-2"></a>value <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">10</span>, <span class="dv">11</span>, <span class="dv">12</span>, <span class="dv">6</span>, <span class="dv">4</span>)</span>
<span id="cb96-3"><a href="#cb96-3"></a>fac <span class="ot">&lt;-</span> <span class="fu">reorder</span>(fac, value, <span class="at">FUN =</span> mean)</span>
<span id="cb96-4"><a href="#cb96-4"></a><span class="fu">levels</span>(fac)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "West" "Asia"</code></pre>
</div>
</div>
</section>
<section id="code-enhanced-boxplot-ordered-by-median-income-scaled-and-showing-data" class="level3">
<h3 class="anchored" data-anchor-id="code-enhanced-boxplot-ordered-by-median-income-scaled-and-showing-data">Code: Enhanced boxplot ordered by median income, scaled, and showing data</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb98"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb98-1"><a href="#cb98-1"></a><span class="co"># reorder by median income and color by continent </span></span>
<span id="cb98-2"><a href="#cb98-2"></a>p <span class="ot">&lt;-</span> gapminder <span class="sc">%&gt;%</span></span>
<span id="cb98-3"><a href="#cb98-3"></a>    <span class="fu">filter</span>(year <span class="sc">==</span> past_year <span class="sc">&amp;</span> <span class="sc">!</span><span class="fu">is.na</span>(gdp)) <span class="sc">%&gt;%</span></span>
<span id="cb98-4"><a href="#cb98-4"></a>    <span class="fu">mutate</span>(<span class="at">region =</span> <span class="fu">reorder</span>(region, dollars_per_day, <span class="at">FUN =</span> median)) <span class="sc">%&gt;%</span>  <span class="co"># reorder</span></span>
<span id="cb98-5"><a href="#cb98-5"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(region, dollars_per_day, <span class="at">fill =</span> continent)) <span class="sc">+</span> <span class="co"># color by continent </span></span>
<span id="cb98-6"><a href="#cb98-6"></a>    <span class="fu">geom_boxplot</span>() <span class="sc">+</span></span>
<span id="cb98-7"><a href="#cb98-7"></a>    <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">90</span>, <span class="at">hjust =</span> <span class="dv">1</span>)) <span class="sc">+</span></span>
<span id="cb98-8"><a href="#cb98-8"></a>    <span class="fu">xlab</span>(<span class="st">""</span>)</span>
<span id="cb98-9"><a href="#cb98-9"></a>p</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-59-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb99"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb99-1"><a href="#cb99-1"></a><span class="co"># log2 scale y-axis</span></span>
<span id="cb99-2"><a href="#cb99-2"></a>p <span class="sc">+</span> <span class="fu">scale_y_continuous</span>(<span class="at">trans =</span> <span class="st">"log2"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-59-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb100"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb100-1"><a href="#cb100-1"></a><span class="co"># add data points</span></span>
<span id="cb100-2"><a href="#cb100-2"></a>p <span class="sc">+</span> <span class="fu">scale_y_continuous</span>(<span class="at">trans =</span> <span class="st">"log2"</span>) <span class="sc">+</span> <span class="fu">geom_point</span>(<span class="at">show.legend =</span> <span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-59-3.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="comparing-distributions" class="level2">
<h2 class="anchored" data-anchor-id="comparing-distributions">Comparing Distributions</h2>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Important
</div>
</div>
<div class="callout-body-container callout-body">
<p><a href="https://blog.csdn.net/woodcorpse/article/details/80494605">intersect(交集);union(并集);setdiff(找不同);setequal(判断相同)</a></p>
</div>
</div>
<section id="key-points-21" class="level3">
<h3 class="anchored" data-anchor-id="key-points-21">Key Points</h3>
<ul>
<li>Use <code>intersect</code> to find the overlap between two vectors.</li>
<li>To make boxplots where grouped variables are adjacaent, color the boxplot by a factor instead of faceting by that factor. This is a way to ease comparisions.</li>
<li>The data suggest that the income gap between rich and poor countries has narrowed, not expended.</li>
</ul>
</section>
<section id="code-histogram-of-income-in-west-versus-developing-world-1970-and-2010" class="level3">
<h3 class="anchored" data-anchor-id="code-histogram-of-income-in-west-versus-developing-world-1970-and-2010">Code: Histogram of income in West versus developing world, 1970 and 2010</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb101"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb101-1"><a href="#cb101-1"></a><span class="co"># add dollars per day variable and define past year</span></span>
<span id="cb101-2"><a href="#cb101-2"></a>gapminder <span class="ot">&lt;-</span> gapminder <span class="sc">%&gt;%</span> </span>
<span id="cb101-3"><a href="#cb101-3"></a>  <span class="fu">mutate</span>(<span class="at">dollars_per_day =</span> gdp<span class="sc">/</span>population<span class="sc">/</span><span class="dv">365</span>)</span>
<span id="cb101-4"><a href="#cb101-4"></a>past_year <span class="ot">&lt;-</span> <span class="dv">1970</span></span>
<span id="cb101-5"><a href="#cb101-5"></a></span>
<span id="cb101-6"><a href="#cb101-6"></a><span class="co"># define Western countries</span></span>
<span id="cb101-7"><a href="#cb101-7"></a>west <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Western Europe"</span>, <span class="st">"Northern Europe"</span>, <span class="st">"Southern Europe"</span>, <span class="st">"Northern America"</span>, <span class="st">"Australia and New Zealand"</span>)</span>
<span id="cb101-8"><a href="#cb101-8"></a></span>
<span id="cb101-9"><a href="#cb101-9"></a><span class="co"># facet by West vs Devloping </span></span>
<span id="cb101-10"><a href="#cb101-10"></a>gapminder <span class="sc">%&gt;%</span> </span>
<span id="cb101-11"><a href="#cb101-11"></a>  <span class="fu">filter</span>(year <span class="sc">==</span> past_year <span class="sc">&amp;</span> <span class="sc">!</span><span class="fu">is.na</span>(gdp)) <span class="sc">%&gt;%</span> </span>
<span id="cb101-12"><a href="#cb101-12"></a>  <span class="fu">mutate</span>(<span class="at">group =</span> <span class="fu">ifelse</span>(region <span class="sc">%in%</span> west, <span class="st">"West"</span>, <span class="st">"Developing"</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb101-13"><a href="#cb101-13"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(dollars_per_day)) <span class="sc">+</span></span>
<span id="cb101-14"><a href="#cb101-14"></a>  <span class="fu">geom_histogram</span>(<span class="at">binwidth =</span> <span class="dv">1</span>, <span class="at">color =</span> <span class="st">"black"</span>) <span class="sc">+</span></span>
<span id="cb101-15"><a href="#cb101-15"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">trans =</span> <span class="st">"log2"</span>) <span class="sc">+</span></span>
<span id="cb101-16"><a href="#cb101-16"></a>  <span class="fu">facet_grid</span>(. <span class="sc">~</span>group)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-60-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb102"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb102-1"><a href="#cb102-1"></a><span class="co"># facet by West/Developing and year</span></span>
<span id="cb102-2"><a href="#cb102-2"></a>present_year <span class="ot">&lt;-</span> <span class="dv">2010</span></span>
<span id="cb102-3"><a href="#cb102-3"></a>gapminder <span class="sc">%&gt;%</span></span>
<span id="cb102-4"><a href="#cb102-4"></a>    <span class="fu">filter</span>(year <span class="sc">%in%</span> <span class="fu">c</span>(past_year, present_year) <span class="sc">&amp;</span> <span class="sc">!</span><span class="fu">is.na</span>(gdp)) <span class="sc">%&gt;%</span></span>
<span id="cb102-5"><a href="#cb102-5"></a>    <span class="fu">mutate</span>(<span class="at">group =</span> <span class="fu">ifelse</span>(region <span class="sc">%in%</span> west, <span class="st">"West"</span>, <span class="st">"Developing"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb102-6"><a href="#cb102-6"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(dollars_per_day)) <span class="sc">+</span></span>
<span id="cb102-7"><a href="#cb102-7"></a>    <span class="fu">geom_histogram</span>(<span class="at">binwidth =</span> <span class="dv">1</span>, <span class="at">color =</span> <span class="st">"black"</span>) <span class="sc">+</span></span>
<span id="cb102-8"><a href="#cb102-8"></a>    <span class="fu">scale_x_continuous</span>(<span class="at">trans =</span> <span class="st">"log2"</span>) <span class="sc">+</span></span>
<span id="cb102-9"><a href="#cb102-9"></a>    <span class="fu">facet_grid</span>(year <span class="sc">~</span> group)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-60-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="code-income-distribution-of-west-verseus-developing-world-only-countries-with-data" class="level3">
<h3 class="anchored" data-anchor-id="code-income-distribution-of-west-verseus-developing-world-only-countries-with-data">Code: Income distribution of West verseus Developing world, only countries with data</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb103"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb103-1"><a href="#cb103-1"></a><span class="co"># define countries that have data available in both years</span></span>
<span id="cb103-2"><a href="#cb103-2"></a>country_list_1 <span class="ot">&lt;-</span> gapminder <span class="sc">%&gt;%</span> </span>
<span id="cb103-3"><a href="#cb103-3"></a>  <span class="fu">filter</span>(year <span class="sc">==</span> past_year <span class="sc">&amp;</span> <span class="sc">!</span><span class="fu">is.na</span>(dollars_per_day)) <span class="sc">%&gt;%</span> .<span class="sc">$</span>country</span>
<span id="cb103-4"><a href="#cb103-4"></a></span>
<span id="cb103-5"><a href="#cb103-5"></a>country_list_2 <span class="ot">&lt;-</span> gapminder <span class="sc">%&gt;%</span> </span>
<span id="cb103-6"><a href="#cb103-6"></a>  <span class="fu">filter</span>(year <span class="sc">==</span> present_year <span class="sc">&amp;</span> <span class="sc">!</span><span class="fu">is.na</span>(dollars_per_day)) <span class="sc">%&gt;%</span> .<span class="sc">$</span>country</span>
<span id="cb103-7"><a href="#cb103-7"></a></span>
<span id="cb103-8"><a href="#cb103-8"></a>country_list <span class="ot">&lt;-</span> <span class="fu">intersect</span>(country_list_1, country_list_2)</span>
<span id="cb103-9"><a href="#cb103-9"></a></span>
<span id="cb103-10"><a href="#cb103-10"></a><span class="co"># make histogram including only countries with data availabe in both years</span></span>
<span id="cb103-11"><a href="#cb103-11"></a>gapminder <span class="sc">%&gt;%</span> </span>
<span id="cb103-12"><a href="#cb103-12"></a>  <span class="fu">filter</span>(year <span class="sc">%in%</span> <span class="fu">c</span>(past_year, present_year) <span class="sc">&amp;</span> country <span class="sc">%in%</span> country_list) <span class="sc">%&gt;%</span> <span class="co"># keep only selected countries</span></span>
<span id="cb103-13"><a href="#cb103-13"></a>  <span class="fu">mutate</span>(<span class="at">group =</span> <span class="fu">ifelse</span>(region <span class="sc">%in%</span> west, <span class="st">"West"</span>, <span class="st">"Developing"</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb103-14"><a href="#cb103-14"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(dollars_per_day)) <span class="sc">+</span></span>
<span id="cb103-15"><a href="#cb103-15"></a>  <span class="fu">geom_histogram</span>(<span class="at">binwidth =</span> <span class="dv">1</span>, <span class="at">color =</span> <span class="st">"black"</span>) <span class="sc">+</span></span>
<span id="cb103-16"><a href="#cb103-16"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">trans =</span> <span class="st">"log2"</span>) <span class="sc">+</span></span>
<span id="cb103-17"><a href="#cb103-17"></a>  <span class="fu">facet_grid</span>(year <span class="sc">~</span> group)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-61-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="code-boxplots-of-income-in-west-versus-developing-world-1970-and-2010" class="level3">
<h3 class="anchored" data-anchor-id="code-boxplots-of-income-in-west-versus-developing-world-1970-and-2010">Code: Boxplots of income in West versus Developing world, 1970 and 2010</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb104"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb104-1"><a href="#cb104-1"></a>p <span class="ot">&lt;-</span> gapminder <span class="sc">%&gt;%</span> </span>
<span id="cb104-2"><a href="#cb104-2"></a>  <span class="fu">filter</span>(year <span class="sc">%in%</span> <span class="fu">c</span>(past_year, present_year) <span class="sc">&amp;</span> country <span class="sc">%in%</span> country_list) <span class="sc">%&gt;%</span></span>
<span id="cb104-3"><a href="#cb104-3"></a>  <span class="fu">mutate</span>(<span class="at">region =</span> <span class="fu">reorder</span>(region, dollars_per_day, <span class="at">FUN =</span> median)) <span class="sc">%&gt;%</span> </span>
<span id="cb104-4"><a href="#cb104-4"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb104-5"><a href="#cb104-5"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">90</span>, <span class="at">hjust =</span> <span class="dv">1</span>)) <span class="sc">+</span></span>
<span id="cb104-6"><a href="#cb104-6"></a>  <span class="fu">xlab</span>(<span class="st">""</span>) <span class="sc">+</span> <span class="fu">scale_y_continuous</span>(<span class="at">trans =</span> <span class="st">"log2"</span>) </span>
<span id="cb104-7"><a href="#cb104-7"></a></span>
<span id="cb104-8"><a href="#cb104-8"></a>p <span class="sc">+</span> <span class="fu">geom_boxplot</span>(<span class="fu">aes</span>(region, dollars_per_day, <span class="at">fill =</span> continent)) <span class="sc">+</span></span>
<span id="cb104-9"><a href="#cb104-9"></a>  <span class="fu">facet_grid</span>(year <span class="sc">~</span> .)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-62-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb105"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb105-1"><a href="#cb105-1"></a><span class="co"># arrange matching boxplots next to each other, colored by year</span></span>
<span id="cb105-2"><a href="#cb105-2"></a>p <span class="sc">+</span> <span class="fu">geom_boxplot</span>(<span class="fu">aes</span>(region, dollars_per_day, <span class="at">fill =</span> <span class="fu">factor</span>(year)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-62-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="density-plots" class="level2">
<h2 class="anchored" data-anchor-id="density-plots">Density Plots</h2>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li><p><a href="https://bookdown.org/zhongyufei/Data-Handling-in-R/dplyr-functions.html"><strong>dplyr处理数据时常用的的函数</strong></a></p></li>
<li><p><a href="https://verytoolz.com/blog/4341dd7810/"><strong>在 R Dplyr 包中使用 case when 语句</strong></a></p></li>
</ul>
</div>
</div>
<section id="key-points-22" class="level3">
<h3 class="anchored" data-anchor-id="key-points-22">Key Points</h3>
<ul>
<li><p>Change the y-axis of density plots to variable counts using <code>..count..</code> as the y argument.</p></li>
<li><p>The <code>case_when()</code> function defines a factor whose levels are defined by a variety of logical operations to group data.</p></li>
<li><p>Plot stacked density plots using <code>position="stack"</code>.</p></li>
<li><p>Define a weight aesthetic mapping to change the relative weights of density plots-for example, this allow weighting of plots by population rather than number of countries.</p></li>
</ul>
</section>
<section id="code-faceted-smooth-density-plots" class="level3">
<h3 class="anchored" data-anchor-id="code-faceted-smooth-density-plots">Code: Faceted smooth density plots</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb106"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb106-1"><a href="#cb106-1"></a><span class="co"># see the code below the previous video for variable definitions</span></span>
<span id="cb106-2"><a href="#cb106-2"></a></span>
<span id="cb106-3"><a href="#cb106-3"></a><span class="co"># smooth density plots - area under each curve adds to 1</span></span>
<span id="cb106-4"><a href="#cb106-4"></a>gapminder <span class="sc">%&gt;%</span> </span>
<span id="cb106-5"><a href="#cb106-5"></a>  <span class="fu">filter</span>(year <span class="sc">==</span> past_year <span class="sc">&amp;</span> country <span class="sc">%in%</span> country_list) <span class="sc">%&gt;%</span> </span>
<span id="cb106-6"><a href="#cb106-6"></a>  <span class="fu">mutate</span>(<span class="at">group =</span> <span class="fu">ifelse</span>(region <span class="sc">%in%</span> west, <span class="st">"West"</span>, <span class="st">"Developing"</span>)) <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(group) <span class="sc">%&gt;%</span> </span>
<span id="cb106-7"><a href="#cb106-7"></a>  <span class="fu">summarize</span>(<span class="at">n =</span> <span class="fu">n</span>()) <span class="sc">%&gt;%</span> knitr<span class="sc">::</span><span class="fu">kable</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: left;">group</th>
<th style="text-align: right;">n</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Developing</td>
<td style="text-align: right;">87</td>
</tr>
<tr class="even">
<td style="text-align: left;">West</td>
<td style="text-align: right;">21</td>
</tr>
</tbody>
</table>
</div>
<div class="sourceCode cell-code" id="cb107"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb107-1"><a href="#cb107-1"></a><span class="co"># smooth density plots - variable counts on y-axis</span></span>
<span id="cb107-2"><a href="#cb107-2"></a>p <span class="ot">&lt;-</span> gapminder <span class="sc">%&gt;%</span> </span>
<span id="cb107-3"><a href="#cb107-3"></a>  <span class="fu">filter</span>(year <span class="sc">==</span> past_year <span class="sc">&amp;</span> country <span class="sc">%in%</span> country_list) <span class="sc">%&gt;%</span> </span>
<span id="cb107-4"><a href="#cb107-4"></a>  <span class="fu">mutate</span>(<span class="at">group =</span> <span class="fu">ifelse</span>(region <span class="sc">%in%</span> west, <span class="st">"West"</span>, <span class="st">"Developing"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb107-5"><a href="#cb107-5"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(dollars_per_day, <span class="at">y =</span> ..count.., <span class="at">fill =</span> group)) <span class="sc">+</span></span>
<span id="cb107-6"><a href="#cb107-6"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">trans =</span> <span class="st">"log2"</span>)</span>
<span id="cb107-7"><a href="#cb107-7"></a>p <span class="sc">+</span> <span class="fu">geom_density</span>(<span class="at">alpha =</span> <span class="fl">0.2</span>, <span class="at">bw =</span> <span class="fl">0.75</span>) <span class="sc">+</span> <span class="fu">facet_grid</span>(year <span class="sc">~</span> .)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-63-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="code-add-new-region-group-with-case_when" class="level3">
<h3 class="anchored" data-anchor-id="code-add-new-region-group-with-case_when">Code: Add new region group with case_when</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb108"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb108-1"><a href="#cb108-1"></a><span class="co"># add group as a factor, grouping regions</span></span>
<span id="cb108-2"><a href="#cb108-2"></a>gapminder <span class="ot">&lt;-</span> gapminder <span class="sc">%&gt;%</span> </span>
<span id="cb108-3"><a href="#cb108-3"></a>  <span class="fu">mutate</span>(<span class="at">group =</span> <span class="fu">case_when</span>(</span>
<span id="cb108-4"><a href="#cb108-4"></a>    .<span class="sc">$</span>region <span class="sc">%in%</span> west <span class="sc">~</span> <span class="st">"West"</span>,</span>
<span id="cb108-5"><a href="#cb108-5"></a>    .<span class="sc">$</span>region <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Eastern Asia"</span>, <span class="st">"South-Eastern Asia"</span>) <span class="sc">~</span> <span class="st">"East Asia"</span>, </span>
<span id="cb108-6"><a href="#cb108-6"></a>    .<span class="sc">$</span>region <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Caribbean"</span>, <span class="st">"Central America"</span>, <span class="st">"South America"</span>) <span class="sc">~</span> <span class="st">"Latin America"</span>,</span>
<span id="cb108-7"><a href="#cb108-7"></a>    .<span class="sc">$</span>continent <span class="sc">==</span> <span class="st">"Africa"</span> <span class="sc">&amp;</span> .<span class="sc">$</span>region <span class="sc">!=</span> <span class="st">"Northern Africa"</span> <span class="sc">~</span> <span class="st">"Sub-Saharan Africa"</span>, <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">"Others"</span>))</span>
<span id="cb108-8"><a href="#cb108-8"></a></span>
<span id="cb108-9"><a href="#cb108-9"></a><span class="co"># reorder factor levels</span></span>
<span id="cb108-10"><a href="#cb108-10"></a>gapminder <span class="ot">&lt;-</span> gapminder <span class="sc">%&gt;%</span> </span>
<span id="cb108-11"><a href="#cb108-11"></a>  <span class="fu">mutate</span>(<span class="at">group =</span> <span class="fu">factor</span>(group, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">"Others"</span>, <span class="st">"Latin America"</span>, <span class="st">"East Asia"</span>, <span class="st">"Sub-Saharan Africa"</span>, <span class="st">"West"</span>)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="code-stacked-density-plot" class="level3">
<h3 class="anchored" data-anchor-id="code-stacked-density-plot">Code: Stacked density plot</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb109"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb109-1"><a href="#cb109-1"></a><span class="co"># note you must redefine p with the new gapminder object first</span></span>
<span id="cb109-2"><a href="#cb109-2"></a>p <span class="ot">&lt;-</span> gapminder <span class="sc">%&gt;%</span> </span>
<span id="cb109-3"><a href="#cb109-3"></a>  <span class="fu">filter</span>(year <span class="sc">%in%</span> <span class="fu">c</span>(past_year, present_year) <span class="sc">&amp;</span> country <span class="sc">%in%</span> country_list) <span class="sc">%&gt;%</span> </span>
<span id="cb109-4"><a href="#cb109-4"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(dollars_per_day, <span class="at">fill =</span> group)) <span class="sc">+</span></span>
<span id="cb109-5"><a href="#cb109-5"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">trans =</span> <span class="st">"log2"</span>)</span>
<span id="cb109-6"><a href="#cb109-6"></a></span>
<span id="cb109-7"><a href="#cb109-7"></a><span class="co"># stacked density plot</span></span>
<span id="cb109-8"><a href="#cb109-8"></a>p <span class="sc">+</span> <span class="fu">geom_density</span>(<span class="at">alpha =</span> <span class="fl">0.2</span>, <span class="at">bw =</span> <span class="fl">0.75</span>, <span class="at">position =</span> <span class="st">"stack"</span>) <span class="sc">+</span></span>
<span id="cb109-9"><a href="#cb109-9"></a>  <span class="fu">facet_grid</span>(year <span class="sc">~</span> .)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-65-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="code-weighted-stacked-density-plot" class="level3">
<h3 class="anchored" data-anchor-id="code-weighted-stacked-density-plot">Code: Weighted stacked density plot</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb110"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb110-1"><a href="#cb110-1"></a>gapminder <span class="sc">%&gt;%</span> </span>
<span id="cb110-2"><a href="#cb110-2"></a>  <span class="fu">filter</span>(year <span class="sc">%in%</span> <span class="fu">c</span>(past_year, present_year) <span class="sc">&amp;</span> country <span class="sc">%in%</span> country_list) <span class="sc">%&gt;%</span> </span>
<span id="cb110-3"><a href="#cb110-3"></a>  <span class="fu">group_by</span>(year) <span class="sc">%&gt;%</span> </span>
<span id="cb110-4"><a href="#cb110-4"></a>  <span class="fu">mutate</span>(<span class="at">weight =</span> population<span class="sc">/</span><span class="fu">sum</span>(population<span class="sc">*</span><span class="dv">2</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb110-5"><a href="#cb110-5"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb110-6"><a href="#cb110-6"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(dollars_per_day, <span class="at">fill =</span> group, <span class="at">weight =</span> weight)) <span class="sc">+</span></span>
<span id="cb110-7"><a href="#cb110-7"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">trans =</span> <span class="st">"log2"</span>) <span class="sc">+</span></span>
<span id="cb110-8"><a href="#cb110-8"></a>  <span class="fu">geom_density</span>(<span class="at">alpha =</span> <span class="fl">0.2</span>, <span class="at">bw =</span> <span class="fl">0.75</span>, <span class="at">position =</span> <span class="st">"stack"</span>) <span class="sc">+</span> <span class="fu">facet_grid</span>(year <span class="sc">~</span> .)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-66-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="ecological-fallacy" class="level2">
<h2 class="anchored" data-anchor-id="ecological-fallacy">Ecological Fallacy</h2>
<section id="textbook-link" class="level3">
<h3 class="anchored" data-anchor-id="textbook-link">Textbook link</h3>
<p><a href="https://rafalab.dfci.harvard.edu/dsbook/gapminder.html#the-ecological-fallacy-and-importance-of-showing-the-data">Ecological Fallacy</a></p>
</section>
<section id="key-points-23" class="level3">
<h3 class="anchored" data-anchor-id="key-points-23">Key Points</h3>
<ul>
<li><p>The breaks argument allows us to set the location of the axis labels and tick marks.</p></li>
<li><p>the <em>logistic</em> or <em>logit transformation</em> is defined as <span class="math inline">\(f(p)=log\frac{1}{1-p}\)</span>, or the log of odds. This scale is useful for highlighting difference near 0 or near 1 and converts fold changes into constant increase.</p></li>
<li><p>The <em>ecological fallacy</em> is assuming that conclusion made from the average of a group apply to all members of that group.</p></li>
</ul>
</section>
<section id="code-9" class="level3">
<h3 class="anchored" data-anchor-id="code-9">Code</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb111"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb111-1"><a href="#cb111-1"></a><span class="co"># define gapminder</span></span>
<span id="cb111-2"><a href="#cb111-2"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb111-3"><a href="#cb111-3"></a><span class="fu">library</span>(dslabs)</span>
<span id="cb111-4"><a href="#cb111-4"></a><span class="fu">data</span>(gapminder)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb112"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb112-1"><a href="#cb112-1"></a><span class="co"># add additional cases</span></span>
<span id="cb112-2"><a href="#cb112-2"></a>gapminder <span class="ot">&lt;-</span> gapminder <span class="sc">%&gt;%</span></span>
<span id="cb112-3"><a href="#cb112-3"></a>    <span class="fu">mutate</span>(<span class="at">group =</span> <span class="fu">case_when</span>(</span>
<span id="cb112-4"><a href="#cb112-4"></a>        .<span class="sc">$</span>region <span class="sc">%in%</span> west <span class="sc">~</span> <span class="st">"The West"</span>,</span>
<span id="cb112-5"><a href="#cb112-5"></a>        .<span class="sc">$</span>region <span class="sc">%in%</span> <span class="st">"Northern Africa"</span> <span class="sc">~</span> <span class="st">"Northern Africa"</span>,</span>
<span id="cb112-6"><a href="#cb112-6"></a>        .<span class="sc">$</span>region <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Eastern Asia"</span>, <span class="st">"South-Eastern Asia"</span>) <span class="sc">~</span> <span class="st">"East Asia"</span>,</span>
<span id="cb112-7"><a href="#cb112-7"></a>        .<span class="sc">$</span>region <span class="sc">==</span> <span class="st">"Southern Asia"</span> <span class="sc">~</span> <span class="st">"Southern Asia"</span>,</span>
<span id="cb112-8"><a href="#cb112-8"></a>        .<span class="sc">$</span>region <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Central America"</span>, <span class="st">"South America"</span>, <span class="st">"Caribbean"</span>) <span class="sc">~</span> <span class="st">"Latin America"</span>,</span>
<span id="cb112-9"><a href="#cb112-9"></a>        .<span class="sc">$</span>continent <span class="sc">==</span> <span class="st">"Africa"</span> <span class="sc">&amp;</span> .<span class="sc">$</span>region <span class="sc">!=</span> <span class="st">"Northern Africa"</span> <span class="sc">~</span> <span class="st">"Sub-Saharan Africa"</span>,</span>
<span id="cb112-10"><a href="#cb112-10"></a>        .<span class="sc">$</span>region <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Melanesia"</span>, <span class="st">"Micronesia"</span>, <span class="st">"Polynesia"</span>) <span class="sc">~</span> <span class="st">"Pacific Islands"</span>))</span>
<span id="cb112-11"><a href="#cb112-11"></a></span>
<span id="cb112-12"><a href="#cb112-12"></a><span class="co"># define a data frame with group average income and average infant survival rate</span></span>
<span id="cb112-13"><a href="#cb112-13"></a>surv_income <span class="ot">&lt;-</span> gapminder <span class="sc">%&gt;%</span></span>
<span id="cb112-14"><a href="#cb112-14"></a>    <span class="fu">filter</span>(year <span class="sc">%in%</span> present_year <span class="sc">&amp;</span> <span class="sc">!</span><span class="fu">is.na</span>(gdp) <span class="sc">&amp;</span> <span class="sc">!</span><span class="fu">is.na</span>(infant_mortality) <span class="sc">&amp;</span> <span class="sc">!</span><span class="fu">is.na</span>(group)) <span class="sc">%&gt;%</span></span>
<span id="cb112-15"><a href="#cb112-15"></a>    <span class="fu">group_by</span>(group) <span class="sc">%&gt;%</span></span>
<span id="cb112-16"><a href="#cb112-16"></a>    <span class="fu">summarize</span>(<span class="at">income =</span> <span class="fu">sum</span>(gdp)<span class="sc">/</span><span class="fu">sum</span>(population)<span class="sc">/</span><span class="dv">365</span>,</span>
<span id="cb112-17"><a href="#cb112-17"></a>                        <span class="at">infant_survival_rate =</span> <span class="dv">1</span> <span class="sc">-</span> <span class="fu">sum</span>(infant_mortality<span class="sc">/</span><span class="dv">1000</span><span class="sc">*</span>population)<span class="sc">/</span><span class="fu">sum</span>(population))</span>
<span id="cb112-18"><a href="#cb112-18"></a>surv_income <span class="sc">%&gt;%</span> <span class="fu">arrange</span>(income)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 7 × 3
  group              income infant_survival_rate
  &lt;chr&gt;               &lt;dbl&gt;                &lt;dbl&gt;
1 Sub-Saharan Africa   1.76                0.936
2 Southern Asia        2.07                0.952
3 Pacific Islands      2.70                0.956
4 Northern Africa      4.94                0.970
5 Latin America       13.2                 0.983
6 East Asia           13.4                 0.985
7 The West            77.1                 0.995</code></pre>
</div>
<div class="sourceCode cell-code" id="cb114"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb114-1"><a href="#cb114-1"></a><span class="co"># plot infant survival versus income, with transformed axes</span></span>
<span id="cb114-2"><a href="#cb114-2"></a>surv_income <span class="sc">%&gt;%</span> <span class="fu">ggplot</span>(<span class="fu">aes</span>(income, infant_survival_rate, <span class="at">label =</span> group, <span class="at">color =</span> group)) <span class="sc">+</span></span>
<span id="cb114-3"><a href="#cb114-3"></a>    <span class="fu">scale_x_continuous</span>(<span class="at">trans =</span> <span class="st">"log2"</span>, <span class="at">limit =</span> <span class="fu">c</span>(<span class="fl">0.25</span>, <span class="dv">150</span>)) <span class="sc">+</span></span>
<span id="cb114-4"><a href="#cb114-4"></a>    <span class="fu">scale_y_continuous</span>(<span class="at">trans =</span> <span class="st">"logit"</span>, <span class="at">limit =</span> <span class="fu">c</span>(<span class="fl">0.875</span>, .<span class="dv">9981</span>),</span>
<span id="cb114-5"><a href="#cb114-5"></a>                                       <span class="at">breaks =</span> <span class="fu">c</span>(.<span class="dv">85</span>, .<span class="dv">90</span>, .<span class="dv">95</span>, .<span class="dv">99</span>, .<span class="dv">995</span>, .<span class="dv">998</span>)) <span class="sc">+</span></span>
<span id="cb114-6"><a href="#cb114-6"></a>    <span class="fu">geom_label</span>(<span class="at">size =</span> <span class="dv">3</span>, <span class="at">show.legend =</span> <span class="cn">FALSE</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-68-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
</section>
</section>
<section id="data-visualization-principles" class="level1">
<h1>Data Visualization Principles</h1>
<section id="overview-3" class="level2">
<h2 class="anchored" data-anchor-id="overview-3">Overview</h2>
<p>Data visualization principles covers some general principles that can serve as guides for effective data visualization.</p>
<p>After completing this section, you will:</p>
<ul>
<li><p>understand basic principles of effective data visualization.</p></li>
<li><p>understand the importance of keeping your goal in mind when deciding on a visualization approach.</p></li>
<li><p>understand principles for encoding data, including position, aligned lengths, angles, area, brightness, and color hue.</p></li>
<li><p>know when to include the number zero in visualizations.</p></li>
<li><p>be able to use techniques to ease comparisons, such as using common axes, putting visual cues to be compared adjacent to one another, and using color effectively.</p></li>
</ul>
</section>
<section id="encoding-data-using-visual-cues" class="level2">
<h2 class="anchored" data-anchor-id="encoding-data-using-visual-cues">Encoding Data Using Visual Cues</h2>
<section id="key-points-24" class="level3">
<h3 class="anchored" data-anchor-id="key-points-24">Key Points</h3>
<ul>
<li><p>Visual cues for encoding data include position, length, angle, area, brightness and color hue.</p></li>
<li><p>Position and length are the preferred way to display quantities, followed by angles, which are preferred over area. Brightness and color are even harder to quantify but can sometimes be useful.</p></li>
<li><p>Pie charts represent visual cues as both angles and area, while donut charts use only area. Humans are not good at visually quantifying angles and are even worse at quantifying area. Therefore pie and donut charts should be avoided - use a bar plot instead. <strong>If you must make a pie chart, include percentages as labels</strong>.</p></li>
<li><p>Bar plots represent visual cues as position and length. Humans are good at visually quantifying linear measures, <strong>making bar plots a strong alternative to pie or donut charts</strong>.</p></li>
</ul>
</section>
</section>
<section id="know-when-to-include-zero" class="level2">
<h2 class="anchored" data-anchor-id="know-when-to-include-zero">Know when to Include Zero</h2>
<section id="key-points-25" class="level3">
<h3 class="anchored" data-anchor-id="key-points-25">Key Points</h3>
<ul>
<li><p><strong>When using bar plots, always start at 0</strong>. It is deceptive not to start at 0 because bar plots imply length is proportional to the quantity displayed. Cutting off the y-axis can make differences look bigger than they actually are.</p></li>
<li><p><strong>When using position rather than length, it is not necessary to include 0</strong> (scatterplot, dot plot, boxplot).</p></li>
</ul>
</section>
</section>
<section id="do-not-distort-quantitles" class="level2">
<h2 class="anchored" data-anchor-id="do-not-distort-quantitles">Do not Distort Quantitles</h2>
<section id="key-points-26" class="level3">
<h3 class="anchored" data-anchor-id="key-points-26">Key Points</h3>
<ul>
<li><p>Make sure your visualizations encode the correct quantities.</p></li>
<li><p>For example, if you are using a plot that relies on circle area, make sure the area (rather than the radius) is proportional to the quantity.</p></li>
</ul>
</section>
</section>
<section id="order-by-a-meaningful-value" class="level2">
<h2 class="anchored" data-anchor-id="order-by-a-meaningful-value">Order by a Meaningful Value</h2>
<section id="key-points-27" class="level3">
<h3 class="anchored" data-anchor-id="key-points-27">Key Points</h3>
<ul>
<li><p>It is easiest to visually extract information from a plot when categories are ordered by a meaningful value. The exact value on which to order will depend on your data and the message you wish to convey with your plot.</p></li>
<li><p>The default ordering for categories is alphabetical if the categories are strings or by factor level if factors. However, <strong>we rarely want alphabetical order</strong>.</p></li>
</ul>
</section>
</section>
<section id="show-the-data" class="level2">
<h2 class="anchored" data-anchor-id="show-the-data">Show the Data</h2>
<section id="key-points-28" class="level3">
<h3 class="anchored" data-anchor-id="key-points-28">Key Points</h3>
<ul>
<li><p>A dynamite plot - a bar graph of group averages with error bars denoting standard errors - provides almost no information about a distribution.</p></li>
<li><p>By showing the data, you provide viewers extra information about distributions.</p></li>
<li><p>Jitter is adding a small random shift to each point in order to minimize the number of overlapping points. To add jitter, use the <code>geom_jitter()</code> geometry instead of <code>geom_point()</code>. (See example below.)</p></li>
<li><p>Alpha blending is making points somewhat transparent, helping visualize the density of overlapping points. Add an alpha argument to the geometry.</p></li>
</ul>
</section>
<section id="code-10" class="level3">
<h3 class="anchored" data-anchor-id="code-10">Code</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb115"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb115-1"><a href="#cb115-1"></a><span class="co"># dot plot showing the data</span></span>
<span id="cb115-2"><a href="#cb115-2"></a>heights <span class="sc">%&gt;%</span> <span class="fu">ggplot</span>(<span class="fu">aes</span>(sex, height)) <span class="sc">+</span> <span class="fu">geom_point</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-69-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb116"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb116-1"><a href="#cb116-1"></a><span class="co"># jittered, alpha blended point plot</span></span>
<span id="cb116-2"><a href="#cb116-2"></a>heights <span class="sc">%&gt;%</span> <span class="fu">ggplot</span>(<span class="fu">aes</span>(sex, height)) <span class="sc">+</span> <span class="fu">geom_jitter</span>(<span class="at">width =</span> <span class="fl">0.1</span>, <span class="at">alpha =</span> <span class="fl">0.2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-69-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="ease-comparisons-use-common-axes" class="level2">
<h2 class="anchored" data-anchor-id="ease-comparisons-use-common-axes">Ease Comparisons: Use Common Axes</h2>
<section id="key-points-29" class="level3">
<h3 class="anchored" data-anchor-id="key-points-29">Key Points</h3>
<ul>
<li><p>Ease comparisons by keeping axes the same when comparing data across multiple plots.</p></li>
<li><p>Align plots vertically to see horizontal changes. Align plots horizontally to see vertical changes.</p></li>
<li><p>Bar plots are useful for showing one number but not useful for showing distributions.</p></li>
</ul>
</section>
</section>
<section id="consider-transformations" class="level2">
<h2 class="anchored" data-anchor-id="consider-transformations">Consider Transformations</h2>
<section id="key-points-30" class="level3">
<h3 class="anchored" data-anchor-id="key-points-30">Key Points</h3>
<ul>
<li><p>Use transformations when warranted to ease visual interpretation.</p></li>
<li><p>The log transformation is useful for data with multiplicative changes. The logistic transformation is useful for fold changes in odds. The square root transformation is useful for count data.</p></li>
</ul>
</section>
</section>
<section id="ease-comparisons-compared-visual-cues-should-be-adjacent" class="level2">
<h2 class="anchored" data-anchor-id="ease-comparisons-compared-visual-cues-should-be-adjacent">Ease Comparisons: Compared Visual Cues Should Be Adjacent</h2>
<section id="textbook-links-3" class="level3">
<h3 class="anchored" data-anchor-id="textbook-links-3">Textbook links</h3>
<ul>
<li><p><a href="https://rafalab.dfci.harvard.edu/dsbook/data-visualization-principles.html#visual-cues-to-be-compared-should-be-adjacent">Textbook section on compared visual cues being adjacent</a></p></li>
<li><p><a href="https://rafalab.dfci.harvard.edu/dsbook/data-visualization-principles.html#use-color">Textbook section on using color</a></p></li>
<li><p><a href="https://rafalab.dfci.harvard.edu/dsbook/data-visualization-principles.html#think-of-the-color-blind">Textbook section on considering the color blind</a></p></li>
</ul>
</section>
<section id="key-points-31" class="level3">
<h3 class="anchored" data-anchor-id="key-points-31">Key Points</h3>
<ul>
<li><p>When two groups are to be compared, it is optimal to place them adjacent in the plot.</p></li>
<li><p>Use color to encode groups to be compared.</p></li>
<li><p>Consider using a color blind friendly palette.</p></li>
</ul>
</section>
<section id="code-11" class="level3">
<h3 class="anchored" data-anchor-id="code-11">Code</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb117"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb117-1"><a href="#cb117-1"></a>color_blind_friendly_cols <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"#999999"</span>, <span class="st">"#E69F00"</span>, <span class="st">"#56B4E9"</span>, <span class="st">"#009E73"</span>, <span class="st">"#F0E442"</span>, <span class="st">"#0072B2"</span>, <span class="st">"#D55E00"</span>, <span class="st">"#CC79A7"</span>)</span>
<span id="cb117-2"><a href="#cb117-2"></a></span>
<span id="cb117-3"><a href="#cb117-3"></a>p1 <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">x =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">8</span>, <span class="at">y =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">8</span>, <span class="at">col =</span> <span class="fu">as.character</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">8</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb117-4"><a href="#cb117-4"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(x, y, <span class="at">color =</span> col)) <span class="sc">+</span></span>
<span id="cb117-5"><a href="#cb117-5"></a>    <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">5</span>)</span>
<span id="cb117-6"><a href="#cb117-6"></a>p1 <span class="sc">+</span> <span class="fu">scale_color_manual</span>(<span class="at">values =</span> color_blind_friendly_cols)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-70-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="slope-charts" class="level2">
<h2 class="anchored" data-anchor-id="slope-charts">Slope Charts</h2>
<section id="textbook-link-1" class="level3">
<h3 class="anchored" data-anchor-id="textbook-link-1">Textbook link</h3>
<p><a href="https://rafalab.dfci.harvard.edu/dsbook/data-visualization-principles.html#plots-for-two-variables">Plots for two variables</a></p>
</section>
<section id="key-points-32" class="level3">
<h3 class="anchored" data-anchor-id="key-points-32">Key Points</h3>
<ul>
<li><p>Consider using a <strong>slope chart</strong> or <strong>Bland-Altman plot</strong> when comparing one variable at two different time points, especially <strong>for a small number of observations</strong>.</p></li>
<li><p>Slope charts use angle to encode change. Use geom_line() to create slope charts. It is useful when comparing a small number of observations.</p></li>
<li><p>The Bland-Altman plot (Tukey mean difference plot, MA plot) graphs the difference between conditions on the y-axis and the mean between conditions on the x-axis. It is more appropriate for large numbers of observations than slope charts.</p></li>
</ul>
</section>
<section id="code-slope-chart" class="level3">
<h3 class="anchored" data-anchor-id="code-slope-chart">Code: Slope chart</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb118"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb118-1"><a href="#cb118-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb118-2"><a href="#cb118-2"></a><span class="fu">library</span>(dslabs)</span>
<span id="cb118-3"><a href="#cb118-3"></a><span class="fu">data</span>(gapminder)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb119"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb119-1"><a href="#cb119-1"></a>west <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Western Europe"</span>, <span class="st">"Northern Europe"</span>, <span class="st">"Southern Europe"</span>, <span class="st">"Northern America"</span>, <span class="st">"Australia and New Zealand"</span>)</span>
<span id="cb119-2"><a href="#cb119-2"></a></span>
<span id="cb119-3"><a href="#cb119-3"></a>dat <span class="ot">&lt;-</span> gapminder <span class="sc">%&gt;%</span></span>
<span id="cb119-4"><a href="#cb119-4"></a>    <span class="fu">filter</span>(year <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">2010</span>, <span class="dv">2015</span>) <span class="sc">&amp;</span> region <span class="sc">%in%</span> west <span class="sc">&amp;</span> <span class="sc">!</span><span class="fu">is.na</span>(life_expectancy) <span class="sc">&amp;</span> population <span class="sc">&gt;</span> <span class="dv">10</span><span class="sc">^</span><span class="dv">7</span>)</span>
<span id="cb119-5"><a href="#cb119-5"></a></span>
<span id="cb119-6"><a href="#cb119-6"></a>dat <span class="sc">%&gt;%</span></span>
<span id="cb119-7"><a href="#cb119-7"></a>    <span class="fu">mutate</span>(<span class="at">location =</span> <span class="fu">ifelse</span>(year <span class="sc">==</span> <span class="dv">2010</span>, <span class="dv">1</span>, <span class="dv">2</span>),</span>
<span id="cb119-8"><a href="#cb119-8"></a>           <span class="at">location =</span> <span class="fu">ifelse</span>(year <span class="sc">==</span> <span class="dv">2015</span> <span class="sc">&amp;</span> country <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"United Kingdom"</span>, <span class="st">"Portugal"</span>),</span>
<span id="cb119-9"><a href="#cb119-9"></a>                             location <span class="sc">+</span> <span class="fl">0.22</span>, location),</span>
<span id="cb119-10"><a href="#cb119-10"></a>           <span class="at">hjust =</span> <span class="fu">ifelse</span>(year <span class="sc">==</span> <span class="dv">2010</span>, <span class="dv">1</span>, <span class="dv">0</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb119-11"><a href="#cb119-11"></a>    <span class="fu">mutate</span>(<span class="at">year =</span> <span class="fu">as.factor</span>(year)) <span class="sc">%&gt;%</span></span>
<span id="cb119-12"><a href="#cb119-12"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(year, life_expectancy, <span class="at">group =</span> country)) <span class="sc">+</span></span>
<span id="cb119-13"><a href="#cb119-13"></a>    <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">color =</span> country), <span class="at">show.legend =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb119-14"><a href="#cb119-14"></a>    <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">x =</span> location, <span class="at">label =</span> country, <span class="at">hjust =</span> hjust), <span class="at">show.legend =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb119-15"><a href="#cb119-15"></a>    <span class="fu">xlab</span>(<span class="st">""</span>) <span class="sc">+</span></span>
<span id="cb119-16"><a href="#cb119-16"></a>    <span class="fu">ylab</span>(<span class="st">"Life Expectancy"</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-72-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="code-bland-altman-plot" class="level3">
<h3 class="anchored" data-anchor-id="code-bland-altman-plot">Code: Bland-Altman Plot</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb120"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb120-1"><a href="#cb120-1"></a><span class="fu">library</span>(ggrepel)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb121"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb121-1"><a href="#cb121-1"></a>dat <span class="sc">%&gt;%</span></span>
<span id="cb121-2"><a href="#cb121-2"></a>    <span class="fu">mutate</span>(<span class="at">year =</span> <span class="fu">paste0</span>(<span class="st">"life_expectancy_"</span>, year)) <span class="sc">%&gt;%</span></span>
<span id="cb121-3"><a href="#cb121-3"></a>    <span class="fu">select</span>(country, year, life_expectancy) <span class="sc">%&gt;%</span> <span class="fu">spread</span>(year, life_expectancy) <span class="sc">%&gt;%</span></span>
<span id="cb121-4"><a href="#cb121-4"></a>    <span class="fu">mutate</span>(<span class="at">average =</span> (life_expectancy_2015 <span class="sc">+</span> life_expectancy_2010)<span class="sc">/</span><span class="dv">2</span>,</span>
<span id="cb121-5"><a href="#cb121-5"></a>                <span class="at">difference =</span> life_expectancy_2015 <span class="sc">-</span> life_expectancy_2010) <span class="sc">%&gt;%</span></span>
<span id="cb121-6"><a href="#cb121-6"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(average, difference, <span class="at">label =</span> country)) <span class="sc">+</span></span>
<span id="cb121-7"><a href="#cb121-7"></a>    <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb121-8"><a href="#cb121-8"></a>    <span class="fu">geom_text_repel</span>() <span class="sc">+</span></span>
<span id="cb121-9"><a href="#cb121-9"></a>    <span class="fu">geom_abline</span>(<span class="at">lty =</span> <span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb121-10"><a href="#cb121-10"></a>    <span class="fu">xlab</span>(<span class="st">"Average of 2010 and 2015"</span>) <span class="sc">+</span></span>
<span id="cb121-11"><a href="#cb121-11"></a>    <span class="fu">ylab</span>(<span class="st">"Difference between 2015 and 2010"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-74-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="encoding-a-third-variable" class="level2">
<h2 class="anchored" data-anchor-id="encoding-a-third-variable">Encoding a Third Variable</h2>
<section id="textbook-link-2" class="level3">
<h3 class="anchored" data-anchor-id="textbook-link-2">Textbook link</h3>
<p><a href="https://rafalab.dfci.harvard.edu/dsbook/data-visualization-principles.html#encoding-a-third-variable">Encoding a third variable</a></p>
</section>
<section id="key-points-33" class="level3">
<h3 class="anchored" data-anchor-id="key-points-33">Key Points</h3>
<ul>
<li><p>Encode a categorical third variable on a scatterplot using color hue or shape. Use the shape argument to control shape.</p></li>
<li><p>Encode a continuous third variable on a using color intensity or size.</p></li>
</ul>
</section>
</section>
<section id="case-study-vaccines" class="level2">
<h2 class="anchored" data-anchor-id="case-study-vaccines">Case Study: Vaccines</h2>
<section id="textbook-link-3" class="level3">
<h3 class="anchored" data-anchor-id="textbook-link-3">Textbook link</h3>
<p><a href="https://rafalab.dfci.harvard.edu/dsbook/data-visualization-principles.html#vaccines">Case study: vaccines and infectious diseases</a></p>
<p><a href="https://www.sthda.com/english/wiki/ggplot2-add-straight-lines-to-a-plot-horizontal-vertical-and-regression-lines">geom_vline: Add vertical lines</a></p>
</section>
<section id="key-points-34" class="level3">
<h3 class="anchored" data-anchor-id="key-points-34">Key Points</h3>
<ul>
<li><p>Vaccines save millions of lives, but misinformation has led some to question the safety of vaccines. The data support vaccines as safe and effective. We visualize data about measles incidence in order to demonstrate the impact of vaccination programs on disease rate.</p></li>
<li><p>The <strong>RColorBrewer</strong> package offers several color palettes. Sequential color palettes are best suited for data that span from high to low. Diverging color palettes are best suited for data that are centered and diverge towards high or low values.</p></li>
<li><p>The <code>geom_tile()</code> geometry creates a grid of colored tiles. Position and length are stronger cues than color for numeric values, but color can be appropriate sometimes.</p></li>
</ul>
</section>
<section id="code-tile-plot-of-measles-rate-by-year-and-state" class="level3">
<h3 class="anchored" data-anchor-id="code-tile-plot-of-measles-rate-by-year-and-state">Code: Tile plot of measles rate by year and state</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb122"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb122-1"><a href="#cb122-1"></a><span class="co"># import data and inspect</span></span>
<span id="cb122-2"><a href="#cb122-2"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb122-3"><a href="#cb122-3"></a><span class="fu">library</span>(dslabs)</span>
<span id="cb122-4"><a href="#cb122-4"></a><span class="fu">data</span>(us_contagious_diseases)</span>
<span id="cb122-5"><a href="#cb122-5"></a><span class="fu">str</span>(us_contagious_diseases)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb123"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb123-1"><a href="#cb123-1"></a><span class="co"># assign dat to the per 10,000 rate of measles, removing Alaska and Hawaii and adjusting for weeks reporting</span></span>
<span id="cb123-2"><a href="#cb123-2"></a>the_disease <span class="ot">&lt;-</span> <span class="st">"Measles"</span></span>
<span id="cb123-3"><a href="#cb123-3"></a>dat <span class="ot">&lt;-</span> us_contagious_diseases <span class="sc">%&gt;%</span></span>
<span id="cb123-4"><a href="#cb123-4"></a>    <span class="fu">filter</span>(<span class="sc">!</span>state <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Hawaii"</span>, <span class="st">"Alaska"</span>) <span class="sc">&amp;</span> disease <span class="sc">==</span> the_disease) <span class="sc">%&gt;%</span></span>
<span id="cb123-5"><a href="#cb123-5"></a>    <span class="fu">mutate</span>(<span class="at">rate =</span> count <span class="sc">/</span> population <span class="sc">*</span> <span class="dv">10000</span> <span class="sc">*</span> <span class="dv">52</span><span class="sc">/</span>weeks_reporting) <span class="sc">%&gt;%</span></span>
<span id="cb123-6"><a href="#cb123-6"></a>    <span class="fu">mutate</span>(<span class="at">state =</span> <span class="fu">reorder</span>(state, rate))</span>
<span id="cb123-7"><a href="#cb123-7"></a></span>
<span id="cb123-8"><a href="#cb123-8"></a><span class="co"># plot disease rates per year in California</span></span>
<span id="cb123-9"><a href="#cb123-9"></a>dat <span class="sc">%&gt;%</span> <span class="fu">filter</span>(state <span class="sc">==</span> <span class="st">"California"</span> <span class="sc">&amp;</span> <span class="sc">!</span><span class="fu">is.na</span>(rate)) <span class="sc">%&gt;%</span></span>
<span id="cb123-10"><a href="#cb123-10"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(year, rate)) <span class="sc">+</span></span>
<span id="cb123-11"><a href="#cb123-11"></a>    <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb123-12"><a href="#cb123-12"></a>    <span class="fu">ylab</span>(<span class="st">"Cases per 10,000"</span>) <span class="sc">+</span></span>
<span id="cb123-13"><a href="#cb123-13"></a>    <span class="fu">geom_vline</span>(<span class="at">xintercept=</span><span class="dv">1963</span>, <span class="at">col =</span> <span class="st">"blue"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-76-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb124"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb124-1"><a href="#cb124-1"></a><span class="co"># tile plot of disease rate by state and year</span></span>
<span id="cb124-2"><a href="#cb124-2"></a>dat <span class="sc">%&gt;%</span> <span class="fu">ggplot</span>(<span class="fu">aes</span>(year, state, <span class="at">fill=</span>rate)) <span class="sc">+</span></span>
<span id="cb124-3"><a href="#cb124-3"></a>    <span class="fu">geom_tile</span>(<span class="at">color =</span> <span class="st">"grey50"</span>) <span class="sc">+</span></span>
<span id="cb124-4"><a href="#cb124-4"></a>    <span class="fu">scale_x_continuous</span>(<span class="at">expand =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">0</span>)) <span class="sc">+</span></span>
<span id="cb124-5"><a href="#cb124-5"></a>    <span class="fu">scale_fill_gradientn</span>(<span class="at">colors =</span> RColorBrewer<span class="sc">::</span><span class="fu">brewer.pal</span>(<span class="dv">9</span>, <span class="st">"Reds"</span>), <span class="at">trans =</span> <span class="st">"sqrt"</span>) <span class="sc">+</span></span>
<span id="cb124-6"><a href="#cb124-6"></a>    <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="dv">1963</span>, <span class="at">col =</span> <span class="st">"blue"</span>) <span class="sc">+</span></span>
<span id="cb124-7"><a href="#cb124-7"></a>    <span class="fu">theme_minimal</span>() <span class="sc">+</span> <span class="fu">theme</span>(<span class="at">panel.grid =</span> <span class="fu">element_blank</span>()) <span class="sc">+</span></span>
<span id="cb124-8"><a href="#cb124-8"></a>    <span class="fu">ggtitle</span>(the_disease) <span class="sc">+</span></span>
<span id="cb124-9"><a href="#cb124-9"></a>    <span class="fu">ylab</span>(<span class="st">""</span>) <span class="sc">+</span></span>
<span id="cb124-10"><a href="#cb124-10"></a>    <span class="fu">xlab</span>(<span class="st">""</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-76-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="code-line-plot-of-measles-rate-by-year-and-state" class="level3">
<h3 class="anchored" data-anchor-id="code-line-plot-of-measles-rate-by-year-and-state">Code: Line plot of measles rate by year and state</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb125"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb125-1"><a href="#cb125-1"></a><span class="co"># compute US average measles rate by year</span></span>
<span id="cb125-2"><a href="#cb125-2"></a>avg <span class="ot">&lt;-</span> us_contagious_diseases <span class="sc">%&gt;%</span></span>
<span id="cb125-3"><a href="#cb125-3"></a>    <span class="fu">filter</span>(disease <span class="sc">==</span> the_disease) <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(year) <span class="sc">%&gt;%</span></span>
<span id="cb125-4"><a href="#cb125-4"></a>    <span class="fu">summarize</span>(<span class="at">us_rate =</span> <span class="fu">sum</span>(count, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)<span class="sc">/</span><span class="fu">sum</span>(population, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)<span class="sc">*</span><span class="dv">10000</span>)</span>
<span id="cb125-5"><a href="#cb125-5"></a></span>
<span id="cb125-6"><a href="#cb125-6"></a><span class="co"># make line plot of measles rate by year by state</span></span>
<span id="cb125-7"><a href="#cb125-7"></a>dat <span class="sc">%&gt;%</span></span>
<span id="cb125-8"><a href="#cb125-8"></a>    <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(rate)) <span class="sc">%&gt;%</span></span>
<span id="cb125-9"><a href="#cb125-9"></a>    <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb125-10"><a href="#cb125-10"></a>    <span class="fu">geom_line</span>(<span class="fu">aes</span>(year, rate, <span class="at">group =</span> state), <span class="at">color =</span> <span class="st">"grey50"</span>, </span>
<span id="cb125-11"><a href="#cb125-11"></a>        <span class="at">show.legend =</span> <span class="cn">FALSE</span>, <span class="at">alpha =</span> <span class="fl">0.2</span>, <span class="at">size =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb125-12"><a href="#cb125-12"></a>    <span class="fu">geom_line</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(year, us_rate), <span class="at">data =</span> avg, <span class="at">size =</span> <span class="dv">1</span>, <span class="at">col =</span> <span class="st">"black"</span>) <span class="sc">+</span></span>
<span id="cb125-13"><a href="#cb125-13"></a>    <span class="fu">scale_y_continuous</span>(<span class="at">trans =</span> <span class="st">"sqrt"</span>, <span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">5</span>, <span class="dv">25</span>, <span class="dv">125</span>, <span class="dv">300</span>)) <span class="sc">+</span></span>
<span id="cb125-14"><a href="#cb125-14"></a>    <span class="fu">ggtitle</span>(<span class="st">"Cases per 10,000 by state"</span>) <span class="sc">+</span></span>
<span id="cb125-15"><a href="#cb125-15"></a>    <span class="fu">xlab</span>(<span class="st">""</span>) <span class="sc">+</span></span>
<span id="cb125-16"><a href="#cb125-16"></a>    <span class="fu">ylab</span>(<span class="st">""</span>) <span class="sc">+</span></span>
<span id="cb125-17"><a href="#cb125-17"></a>    <span class="fu">geom_text</span>(<span class="at">data =</span> <span class="fu">data.frame</span>(<span class="at">x =</span> <span class="dv">1955</span>, <span class="at">y =</span> <span class="dv">50</span>),</span>
<span id="cb125-18"><a href="#cb125-18"></a>        <span class="at">mapping =</span> <span class="fu">aes</span>(x, y, <span class="at">label =</span> <span class="st">"US average"</span>), <span class="at">color =</span> <span class="st">"black"</span>) <span class="sc">+</span></span>
<span id="cb125-19"><a href="#cb125-19"></a>    <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="dv">1963</span>, <span class="at">col =</span> <span class="st">"blue"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-77-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="avoid-pseudo-and-gratuitous-3d-plots" class="level2">
<h2 class="anchored" data-anchor-id="avoid-pseudo-and-gratuitous-3d-plots">Avoid Pseudo and Gratuitous 3D Plots</h2>
<section id="textbook-link-4" class="level3">
<h3 class="anchored" data-anchor-id="textbook-link-4">Textbook link</h3>
<p><a href="https://rafalab.dfci.harvard.edu/dsbook/data-visualization-principles.html#avoid-pseudo-three-dimensional-plots">Avoid pseudo-three-dimensional plots</a></p>
</section>
<section id="key-points-35" class="level3">
<h3 class="anchored" data-anchor-id="key-points-35">Key Points</h3>
<p>In general, pseudo-3D plots and gratuitous 3D plots only add confusion. Use regular 2D plots instead.</p>
</section>
</section>
<section id="avoid-too-many-significant-digits" class="level2">
<h2 class="anchored" data-anchor-id="avoid-too-many-significant-digits">Avoid Too Many Significant Digits</h2>
<section id="textbook-link-5" class="level3">
<h3 class="anchored" data-anchor-id="textbook-link-5">Textbook link</h3>
<p><a href="https://rafalab.dfci.harvard.edu/dsbook/data-visualization-principles.html#avoid-too-many-significant-digits">Avoid too many significant digits</a></p>
</section>
<section id="key-points-36" class="level3">
<h3 class="anchored" data-anchor-id="key-points-36">Key points</h3>
<ul>
<li><p>In tables, avoid using too many significant digits. Too many digits can distract from the meaning of your data.</p></li>
<li><p>Reduce the number of significant digits globally by setting an option. For example, options(digits = 3) will cause all future computations that session to have 3 significant digits.</p></li>
<li><p>Reduce the number of digits locally using <code>round()</code> or <code>signif()</code>.</p></li>
</ul>


</section>
</section>
</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" id="quarto-citation"><h2 class="anchored quarto-appendix-heading">Citation</h2><div><div class="quarto-appendix-secondary-label">BibTeX citation:</div><pre class="sourceCode code-with-copy quarto-appendix-bibtex"><code class="sourceCode bibtex">@online{semba2024,
  author = {Semba, Masumbuko},
  title = {Data {Visualization}},
  date = {2024-05-05},
  url = {https://lugoga.github.io/kitaa/posts/dataviz/},
  langid = {en}
}
</code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre><div class="quarto-appendix-secondary-label">For attribution, please cite this work as:</div><div id="ref-semba2024" class="csl-entry quarto-appendix-citeas" role="listitem">
Semba, M., 2024. Data Visualization [WWW Document]. URL <a href="https://lugoga.github.io/kitaa/posts/dataviz/">https://lugoga.github.io/kitaa/posts/dataviz/</a>
</div></div></section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<script src="https://utteranc.es/client.js" repo="lugoga/kitaa" issue-term="pathname" theme="github-light" crossorigin="anonymous" async="">
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
<p>©2024 <a href="../../posts/dataviz/index.html">Datika</a></p>
</div>   
    <div class="nav-footer-center">
      <ul class="footer-items list-unstyled">
    <li class="nav-item">
    <a class="nav-link" href="../../faq.html">
<p>FAQ</p>
</a>
  </li>  
    <li class="nav-item">
    <a class="nav-link" href="../../feedback.html">
<p>Feedback</p>
</a>
  </li>  
    <li class="nav-item">
    <a class="nav-link" href="../../license.html">
<p>License</p>
</a>
  </li>  
    <li class="nav-item">
    <a class="nav-link" href="../../terms.html">
<p>Terms</p>
</a>
  </li>  
</ul>
    <div class="cookie-consent-footer"><a href="#" id="open_preferences_center">Cookie Preferences</a></div></div>
    <div class="nav-footer-right">
      &nbsp;
    </div>
  </div>
</footer>




</body></html>