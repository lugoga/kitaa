<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.550">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Masumbuko Semba">
<meta name="dcterms.date" content="2024-05-01">

<title>DATIKA - Data cleaning, merging, and appending</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/cookie-consent/cookie-consent.js"></script>
<link href="../../site_libs/cookie-consent/cookie-consent.css" rel="stylesheet">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script async="" src="https://www.googletagmanager.com/gtag/js?id=<Insert your ID here>"></script>

<script type="text/plain" cookie-consent="tracking">

window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', '<Insert your ID here>', { 'anonymize_ip': true});
</script>

<script type="text/javascript" charset="UTF-8">
document.addEventListener('DOMContentLoaded', function () {
cookieconsent.run({
  "notice_banner_type":"simple",
  "consent_type":"implied",
  "palette":"light",
  "language":"en",
  "page_load_consent_levels":["strictly-necessary","functionality","tracking","targeting"],
  "notice_banner_reject_button_hide":false,
  "preferences_center_close_button_hide":false,
  "website_name":""
  ,
"language":"en"
  });
});
</script> 
  
<link href="../../site_libs/tabwid-1.1.3/tabwid.css" rel="stylesheet">
<script src="../../site_libs/tabwid-1.1.3/tabwid.js"></script>


<meta name="twitter:title" content="DATIKA - Data cleaning, merging, and appending">
<meta name="twitter:description" content="Coding for all for better today and tommorow">
<meta name="twitter:image" content="thumbnail_blog.png">
<meta name="twitter:creator" content="@semba2024">
<meta name="twitter:card" content="summary_large_image">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top quarto-banner">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">DATIKA</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../blog.html"> 
<span class="menu-text">Posts</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../slides.html"> 
<span class="menu-text">Presentations</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../books.html"> 
<span class="menu-text">Books</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../data.html"> 
<span class="menu-text">Datasets</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../photos.html"> 
<span class="menu-text">Gallery</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/lugoga/kitaa"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="../../blog.xml"> <i class="bi bi-rss" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-ressources" role="button" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Ressources</span>
    </a>
    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="nav-menu-ressources">    
        <li>
    <a class="dropdown-item" href="https://semba-blog.netlify.app/">
 <span class="dropdown-text">Semba blog</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://lugoga.github.io/semba-quarto/">
 <span class="dropdown-text">Semba website</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://nyamisi.github.io/nyamisi/blog.html">
 <span class="dropdown-text">Nyamisi blog</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://rweekly.org/">
 <span class="dropdown-text">R Weekly</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://www.r-bloggers.com/">
 <span class="dropdown-text">R Bloggers</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="../../archive.html"> 
<span class="menu-text">Archive</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
          <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <div class="quarto-title-block"><div><h1 class="title">Data cleaning, merging, and appending</h1><button type="button" class="btn code-tools-button" id="quarto-code-tools-source"><i class="bi"></i> Code</button></div></div>
                                <div class="quarto-categories">
                <div class="quarto-category">visualization</div>
                <div class="quarto-category">code</div>
                <div class="quarto-category">analysis</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>Masumbuko Semba </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">May 1, 2024</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction"><span class="header-section-number">1</span> Introduction</a>
  <ul class="collapse">
  <li><a href="#importing-data" id="toc-importing-data" class="nav-link" data-scroll-target="#importing-data"><span class="header-section-number">1.1</span> Importing data</a></li>
  <li><a href="#common-import-frustrations" id="toc-common-import-frustrations" class="nav-link" data-scroll-target="#common-import-frustrations"><span class="header-section-number">1.2</span> Common import frustrations</a></li>
  <li><a href="#clean-variable-names" id="toc-clean-variable-names" class="nav-link" data-scroll-target="#clean-variable-names"><span class="header-section-number">1.3</span> clean variable names</a></li>
  <li><a href="#check-the-structure" id="toc-check-the-structure" class="nav-link" data-scroll-target="#check-the-structure"><span class="header-section-number">1.4</span> check the structure</a></li>
  <li><a href="#creating-variables" id="toc-creating-variables" class="nav-link" data-scroll-target="#creating-variables"><span class="header-section-number">1.5</span> creating variables</a></li>
  <li><a href="#dropping-and-keeping-variables" id="toc-dropping-and-keeping-variables" class="nav-link" data-scroll-target="#dropping-and-keeping-variables"><span class="header-section-number">1.6</span> Dropping and keeping variables</a></li>
  <li><a href="#missing-values" id="toc-missing-values" class="nav-link" data-scroll-target="#missing-values"><span class="header-section-number">1.7</span> Missing values</a></li>
  </ul></li>
  <li><a href="#length-frequency" id="toc-length-frequency" class="nav-link" data-scroll-target="#length-frequency"><span class="header-section-number">2</span> Length frequency</a>
  <ul class="collapse">
  <li><a href="#merging-and-combining-data" id="toc-merging-and-combining-data" class="nav-link" data-scroll-target="#merging-and-combining-data"><span class="header-section-number">2.1</span> Merging and combining data</a></li>
  <li><a href="#reshaping-data" id="toc-reshaping-data" class="nav-link" data-scroll-target="#reshaping-data"><span class="header-section-number">2.2</span> Reshaping data</a></li>
  <li><a href="#saving-transformed-data" id="toc-saving-transformed-data" class="nav-link" data-scroll-target="#saving-transformed-data"><span class="header-section-number">2.3</span> Saving transformed data</a></li>
  </ul></li>
  <li><a href="#transforming-summarising-and-analysing-data" id="toc-transforming-summarising-and-analysing-data" class="nav-link" data-scroll-target="#transforming-summarising-and-analysing-data"><span class="header-section-number">3</span> Transforming, summarising, and analysing data</a>
  <ul class="collapse">
  <li><a href="#renaming-variables" id="toc-renaming-variables" class="nav-link" data-scroll-target="#renaming-variables"><span class="header-section-number">3.1</span> Renaming variables</a></li>
  <li><a href="#filtering-data" id="toc-filtering-data" class="nav-link" data-scroll-target="#filtering-data"><span class="header-section-number">3.2</span> Filtering Data</a></li>
  <li><a href="#select" id="toc-select" class="nav-link" data-scroll-target="#select"><span class="header-section-number">3.3</span> Select</a></li>
  <li><a href="#arranging-variables" id="toc-arranging-variables" class="nav-link" data-scroll-target="#arranging-variables"><span class="header-section-number">3.4</span> Arranging variables</a></li>
  <li><a href="#extracting-unique-observations" id="toc-extracting-unique-observations" class="nav-link" data-scroll-target="#extracting-unique-observations"><span class="header-section-number">3.5</span> Extracting unique observations</a></li>
  <li><a href="#creating-new-variables" id="toc-creating-new-variables" class="nav-link" data-scroll-target="#creating-new-variables"><span class="header-section-number">3.6</span> Creating new variables</a></li>
  <li><a href="#group-wise-operations" id="toc-group-wise-operations" class="nav-link" data-scroll-target="#group-wise-operations"><span class="header-section-number">3.7</span> Group-wise operations</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">





<section id="introduction" class="level2" data-number="1">
<h2 data-number="1" class="anchored" data-anchor-id="introduction"><span class="header-section-number">1</span> Introduction</h2>
<p>In reality, data <code>cleaning</code> is not so much its own step in the data wrangling process as it is a constant activity that accompanies every other step, both because most data is not clean when we encounter it, and because how a data set (or part of it) needs to be “cleaned” is often revealed progressively as we work. At a high level, clean data might be summarized as being free from errors or typos – such as mismatched units, multiple spellings of the same word or term, and fields that are not well-separated – and missing or impossible values.</p>
<p>While many of these are at least somewhat straightforward to recognize (though not always to correct), however, deeper data problems may still persist. Measurement changes, calculation errors and other oversights – especially in system-generated data – often don’t reveal themselves until some level of analysis has been done and the data has been “reality-checked” with folks who significant expertise and/or first-hand experience with the subject.</p>
<p>The iterative nature of data cleaning is an example of why data wrangling is a cycle rather than a linear series of steps: as your work reveals more about the data and your understanding of its relationship to the world deepens, you may find that you need to revisit earlier work that you’ve done and repeat or adjust certain aspects of the data</p>
<section id="importing-data" class="level3" data-number="1.1">
<h3 data-number="1.1" class="anchored" data-anchor-id="importing-data"><span class="header-section-number">1.1</span> Importing data</h3>
<p>Although creating data frames from existing data structures is extremely useful, by far the most common approach is to create a data frame by importing data from an external file. To do this, you’ll need to have your data correctly formatted and saved in a file format that R is able to recognize. Fortunately for us, R is able to recognize a wide variety of file formats, although in reality you’ll probably end up only using two or three regularly—comma separated, excel spreadsheet and tab-delimited.</p>
<p>The easiest method of creating a data file to import into R is to enter your data into a spreadsheet using either Microsoft Excel or LibreOffice Calc and save the spreadsheet as a comma separated (<code>.csv</code>), excel spreadsheet (<code>.xls</code> or <code>.xlsx</code>) and tab-delimited (<code>.txt</code>). We then read the file into our session, for this mode, we are going to use the <code>LFQ_sample_1.xls</code>, which is an Excel spreadsheet file. To load into the R session, we use a <code>read_excel</code> function from <strong>readxl</strong> package <span class="citation" data-cites="readxl">(<a href="#ref-readxl" role="doc-biblioref">Wickham and Bryan 2023</a>)</span>. Before we import the data, we need to load the packages that we will use their functions in this chapter</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a><span class="fu">require</span>(tidyverse)</span>
<span id="cb1-2"><a href="#cb1-2"></a><span class="fu">require</span>(magrittr)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1"></a>lfq <span class="ot">=</span> readxl<span class="sc">::</span><span class="fu">read_excel</span>(<span class="at">path =</span> <span class="st">"../data/LFQ_sample_1.xls"</span>,</span>
<span id="cb2-2"><a href="#cb2-2"></a>                         <span class="at">sheet =</span> <span class="dv">1</span>, </span>
<span id="cb2-3"><a href="#cb2-3"></a>                         <span class="at">skip =</span> <span class="dv">0</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>There are a few things to note about the above command. First, the file path and the filename (including the file extension) needs to be enclosed in either single or double quotes (i.e.&nbsp;the data/flower.txt bit) as the <code>read_excel()</code> function expects this to be a character string. If your working directory is already set to the directory which contains the file, you don’t need to include the entire file path just the <code>filename</code>.</p>
<p>In the example above, the file path is separated with a single forward slash /. This will work regardless of the operating system you are using. The argument <code>sheet = 1</code> specify the function to pick the data from first sheet as spreadsheet store data in multiple sheet. The argument <code>skip = 0</code> specify the function not to skip any row in the datase. This used to specify when the data has metadata information at the top.</p>
<p>After importing our data into R it doesn’t appear that R has done much, at least nothing appears in the R Console! To see the contents of the data frame we need to tell R to do so using a print <code>function</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1"></a>lfq <span class="sc">%&gt;%</span> <span class="fu">print</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 779 × 6
   Date                Species `Size (cm)` `Size Class` `Gear type` Landing_site
   &lt;dttm&gt;              &lt;chr&gt;         &lt;dbl&gt;        &lt;dbl&gt; &lt;chr&gt;       &lt;chr&gt;       
 1 2019-05-30 00:00:00 Siganu…        16.5           18 Speargun    Pwani       
 2 2019-05-30 00:00:00 Siganu…        12             12 Speargun    Pwani       
 3 2019-05-30 00:00:00 Siganu…        15             15 Speargun    Pwani       
 4 2019-05-30 00:00:00 Siganu…        33             33 Speargun    Pwani       
 5 2019-05-30 00:00:00 Siganu…        11.2           12 hook and l… Pwani       
 6 2019-05-30 00:00:00 Siganu…        17             18 hook and l… Pwani       
 7 2019-05-30 00:00:00 Siganu…        19             21 Gill net    Pwani       
 8 2019-05-30 00:00:00 Lethri…        10             12 Traps       Pwani       
 9 2019-05-30 00:00:00 Lethri…        11             12 Traps       Pwani       
10 2019-05-30 00:00:00 Lethri…         9             12 Traps       Pwani       
# ℹ 769 more rows</code></pre>
</div>
</div>
<p>The data frame appears in the console and that prove to us that we successfully imported the data into R. But printing the imported data into console is only useful for small dataset and for large dataset that makes the console messy and there is nothing you can glean by simply printing the dataset in the console. The other common practice often used is looking on the internal structure of the dataset using <code>str()</code> function</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1"></a>lfq <span class="sc">%&gt;%</span> </span>
<span id="cb5-2"><a href="#cb5-2"></a>  <span class="fu">str</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>tibble [779 × 6] (S3: tbl_df/tbl/data.frame)
 $ Date        : POSIXct[1:779], format: "2019-05-30" "2019-05-30" ...
 $ Species     : chr [1:779] "Siganus sutor" "Siganus sutor" "Siganus sutor" "Siganus sutor" ...
 $ Size (cm)   : num [1:779] 16.5 12 15 33 11.2 17 19 10 11 9 ...
 $ Size Class  : num [1:779] 18 12 15 33 12 18 21 12 12 12 ...
 $ Gear type   : chr [1:779] "Speargun" "Speargun" "Speargun" "Speargun" ...
 $ Landing_site: chr [1:779] "Pwani" "Pwani" "Pwani" "Pwani" ...</code></pre>
</div>
</div>
<p>and a better solution is to use a tidyverse approach of <code>glimpse</code> function</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1"></a>lfq <span class="sc">%&gt;%</span> </span>
<span id="cb7-2"><a href="#cb7-2"></a>  <span class="fu">glimpse</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 779
Columns: 6
$ Date         &lt;dttm&gt; 2019-05-30, 2019-05-30, 2019-05-30, 2019-05-30, 2019-05-…
$ Species      &lt;chr&gt; "Siganus sutor", "Siganus sutor", "Siganus sutor", "Sigan…
$ `Size (cm)`  &lt;dbl&gt; 16.5, 12.0, 15.0, 33.0, 11.2, 17.0, 19.0, 10.0, 11.0, 9.0…
$ `Size Class` &lt;dbl&gt; 18, 12, 15, 33, 12, 18, 21, 12, 12, 12, 12, 12, 12, 12, 1…
$ `Gear type`  &lt;chr&gt; "Speargun", "Speargun", "Speargun", "Speargun", "hook and…
$ Landing_site &lt;chr&gt; "Pwani", "Pwani", "Pwani", "Pwani", "Pwani", "Pwani", "Pw…</code></pre>
</div>
</div>
<p>The output in the console tell us that <code>lfq</code> dataset we just imported has six columns (variables) and 779 rows (records). Each of the variable are listed along with their data types and few records of the data The first row of the data contains the variable (column) names.</p>
</section>
<section id="common-import-frustrations" class="level3" data-number="1.2">
<h3 data-number="1.2" class="anchored" data-anchor-id="common-import-frustrations"><span class="header-section-number">1.2</span> Common import frustrations</h3>
<p>It’s quite common to get a bunch of really frustrating error messages when you first start importing data into R. Perhaps the most common is</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1"></a>lfq <span class="ot">=</span> readxl<span class="sc">::</span><span class="fu">read_excel</span>(<span class="at">path =</span> <span class="st">"assets/fao_paul_dataset/LFQ_sample_1"</span>,</span>
<span id="cb9-2"><a href="#cb9-2"></a>                         <span class="at">sheet =</span> <span class="dv">1</span>, </span>
<span id="cb9-3"><a href="#cb9-3"></a>                         <span class="at">skip =</span> <span class="dv">0</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>This error message is telling you that R cannot find the file you are trying to import. Several reasons can lead to that information error.The first is that you’ve made a mistake in the spelling of either the filename or file path. Another common mistake is that you have forgotten to include the file extension in the filename (i.e.&nbsp;.txt). Lastly, the file is not where you say it is or you’ve used an incorrect file path. Using RStudio Projects and having a logical directory structure goes a long way to avoiding these types of errors.</p>
</section>
<section id="clean-variable-names" class="level3" data-number="1.3">
<h3 data-number="1.3" class="anchored" data-anchor-id="clean-variable-names"><span class="header-section-number">1.3</span> clean variable names</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1"></a>lfq <span class="sc">%&gt;%</span> </span>
<span id="cb10-2"><a href="#cb10-2"></a>  <span class="fu">names</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Date"         "Species"      "Size (cm)"    "Size Class"   "Gear type"   
[6] "Landing_site"</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1"></a>lfq.clean <span class="ot">=</span> lfq <span class="sc">%&gt;%</span> </span>
<span id="cb12-2"><a href="#cb12-2"></a>  janitor<span class="sc">::</span><span class="fu">clean_names</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb12-3"><a href="#cb12-3"></a>  janitor<span class="sc">::</span><span class="fu">remove_empty</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="check-the-structure" class="level3" data-number="1.4">
<h3 data-number="1.4" class="anchored" data-anchor-id="check-the-structure"><span class="header-section-number">1.4</span> check the structure</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1"></a>lfq.clean <span class="sc">%&gt;%</span> </span>
<span id="cb13-2"><a href="#cb13-2"></a>  <span class="fu">glimpse</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 779
Columns: 6
$ date         &lt;dttm&gt; 2019-05-30, 2019-05-30, 2019-05-30, 2019-05-30, 2019-05-…
$ species      &lt;chr&gt; "Siganus sutor", "Siganus sutor", "Siganus sutor", "Sigan…
$ size_cm      &lt;dbl&gt; 16.5, 12.0, 15.0, 33.0, 11.2, 17.0, 19.0, 10.0, 11.0, 9.0…
$ size_class   &lt;dbl&gt; 18, 12, 15, 33, 12, 18, 21, 12, 12, 12, 12, 12, 12, 12, 1…
$ gear_type    &lt;chr&gt; "Speargun", "Speargun", "Speargun", "Speargun", "hook and…
$ landing_site &lt;chr&gt; "Pwani", "Pwani", "Pwani", "Pwani", "Pwani", "Pwani", "Pw…</code></pre>
</div>
</div>
</section>
<section id="creating-variables" class="level3" data-number="1.5">
<h3 data-number="1.5" class="anchored" data-anchor-id="creating-variables"><span class="header-section-number">1.5</span> creating variables</h3>
<p>You notice that the date is datetime and date but the display is date. Thus, we need to create three variables that represent <code>day</code>, <code>month</code>, and <code>year</code>. We can extract these variables from date variables, We can use the <code>day()</code>, <code>month()</code>, and <code>year()</code> functions from <strong>lubridate</strong> package <span class="citation" data-cites="lubridate">(<a href="#ref-lubridate" role="doc-biblioref">Grolemund and Wickham 2011</a>)</span>;</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1"></a>lfq.time <span class="ot">=</span> lfq.clean <span class="sc">%&gt;%</span> </span>
<span id="cb15-2"><a href="#cb15-2"></a>  <span class="fu">mutate</span>(</span>
<span id="cb15-3"><a href="#cb15-3"></a>    <span class="at">day =</span> lubridate<span class="sc">::</span><span class="fu">day</span>(date),</span>
<span id="cb15-4"><a href="#cb15-4"></a>    <span class="at">month =</span> lubridate<span class="sc">::</span><span class="fu">month</span>(date),</span>
<span id="cb15-5"><a href="#cb15-5"></a>    <span class="at">year =</span> lubridate<span class="sc">::</span><span class="fu">year</span>(date)</span>
<span id="cb15-6"><a href="#cb15-6"></a>    ) <span class="sc">%&gt;%</span> </span>
<span id="cb15-7"><a href="#cb15-7"></a>  <span class="fu">relocate</span>(<span class="fu">c</span>(landing_site, day, month, year), <span class="at">.before =</span> date)</span>
<span id="cb15-8"><a href="#cb15-8"></a></span>
<span id="cb15-9"><a href="#cb15-9"></a>lfq.time <span class="sc">|&gt;</span> </span>
<span id="cb15-10"><a href="#cb15-10"></a>  <span class="fu">sample_n</span>(<span class="dv">30</span>) <span class="sc">|&gt;</span> </span>
<span id="cb15-11"><a href="#cb15-11"></a>  <span class="fu">select</span>(<span class="sc">-</span><span class="fu">c</span>(day, month, year)) <span class="sc">|&gt;</span> </span>
<span id="cb15-12"><a href="#cb15-12"></a>  flextable<span class="sc">::</span><span class="fu">flextable</span>() <span class="sc">|&gt;</span> </span>
<span id="cb15-13"><a href="#cb15-13"></a>  flextable<span class="sc">::</span><span class="fu">autofit</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="tabwid"><style>.cl-c865bfca{}.cl-c85f115c{font-family:'Arial';font-size:11pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-c861657e{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-c861657f{margin:0;text-align:right;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-c86177d0{width:1.101in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c86177da{width:1.704in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c86177db{width:1.831in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c86177e4{width:0.845in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c86177e5{width:0.99in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c86177e6{width:1.194in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c86177e7{width:1.101in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c86177ee{width:1.704in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c86177ef{width:1.831in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c86177f0{width:0.845in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c86177f1{width:0.99in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c86177f2{width:1.194in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c86177f3{width:1.101in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c86177f8{width:1.704in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c86177f9{width:1.831in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c86177fa{width:0.845in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c86177fb{width:0.99in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c8617802{width:1.194in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c8617803{width:1.101in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c8617804{width:1.704in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c8617805{width:1.831in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c861780c{width:0.845in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c861780d{width:0.99in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c861780e{width:1.194in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c8617816{width:1.101in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c8617817{width:1.704in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c8617818{width:1.831in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c8617819{width:0.845in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c861781a{width:0.99in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c861781b{width:1.194in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c8617820{width:1.101in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c8617821{width:1.704in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c8617822{width:1.831in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c8617823{width:0.845in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c861782a{width:0.99in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c861782b{width:1.194in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table data-quarto-disable-processing="true" class="cl-c865bfca"><thead><tr style="overflow-wrap:break-word;"><th class="cl-c86177d0"><p class="cl-c861657e"><span class="cl-c85f115c">landing_site</span></p></th><th class="cl-c86177da"><p class="cl-c861657f"><span class="cl-c85f115c">date</span></p></th><th class="cl-c86177db"><p class="cl-c861657e"><span class="cl-c85f115c">species</span></p></th><th class="cl-c86177e4"><p class="cl-c861657f"><span class="cl-c85f115c">size_cm</span></p></th><th class="cl-c86177e5"><p class="cl-c861657f"><span class="cl-c85f115c">size_class</span></p></th><th class="cl-c86177e6"><p class="cl-c861657e"><span class="cl-c85f115c">gear_type</span></p></th></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-c86177e7"><p class="cl-c861657e"><span class="cl-c85f115c">Pwani</span></p></td><td class="cl-c86177ee"><p class="cl-c861657f"><span class="cl-c85f115c">2019-07-11 00:00:00</span></p></td><td class="cl-c86177ef"><p class="cl-c861657e"><span class="cl-c85f115c">Calotomus carolinus</span></p></td><td class="cl-c86177f0"><p class="cl-c861657f"><span class="cl-c85f115c">17.00</span></p></td><td class="cl-c86177f1"><p class="cl-c861657f"><span class="cl-c85f115c">18</span></p></td><td class="cl-c86177f2"><p class="cl-c861657e"><span class="cl-c85f115c">Beach seine</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-c86177f3"><p class="cl-c861657e"><span class="cl-c85f115c">Bahari</span></p></td><td class="cl-c86177f8"><p class="cl-c861657f"><span class="cl-c85f115c">2020-06-15 00:00:00</span></p></td><td class="cl-c86177f9"><p class="cl-c861657e"><span class="cl-c85f115c">Lethrinus mahsena</span></p></td><td class="cl-c86177fa"><p class="cl-c861657f"><span class="cl-c85f115c">10.20</span></p></td><td class="cl-c86177fb"><p class="cl-c861657f"><span class="cl-c85f115c">12</span></p></td><td class="cl-c8617802"><p class="cl-c861657e"><span class="cl-c85f115c">Traps</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-c8617803"><p class="cl-c861657e"><span class="cl-c85f115c">Bahari</span></p></td><td class="cl-c8617804"><p class="cl-c861657f"><span class="cl-c85f115c">2020-06-15 00:00:00</span></p></td><td class="cl-c8617805"><p class="cl-c861657e"><span class="cl-c85f115c">Leptoscarus vaigiensis</span></p></td><td class="cl-c861780c"><p class="cl-c861657f"><span class="cl-c85f115c">16.30</span></p></td><td class="cl-c861780d"><p class="cl-c861657f"><span class="cl-c85f115c">18</span></p></td><td class="cl-c861780e"><p class="cl-c861657e"><span class="cl-c85f115c">Speargun</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-c8617816"><p class="cl-c861657e"><span class="cl-c85f115c">Pwani</span></p></td><td class="cl-c8617817"><p class="cl-c861657f"><span class="cl-c85f115c">2019-05-30 00:00:00</span></p></td><td class="cl-c8617818"><p class="cl-c861657e"><span class="cl-c85f115c">Lethrinus mahsena</span></p></td><td class="cl-c8617819"><p class="cl-c861657f"><span class="cl-c85f115c">13.50</span></p></td><td class="cl-c861781a"><p class="cl-c861657f"><span class="cl-c85f115c">15</span></p></td><td class="cl-c861781b"><p class="cl-c861657e"><span class="cl-c85f115c">hook and line</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-c8617803"><p class="cl-c861657e"><span class="cl-c85f115c">Bahari</span></p></td><td class="cl-c8617804"><p class="cl-c861657f"><span class="cl-c85f115c">2020-07-25 00:00:00</span></p></td><td class="cl-c8617805"><p class="cl-c861657e"><span class="cl-c85f115c">Siganus sutor</span></p></td><td class="cl-c861780c"><p class="cl-c861657f"><span class="cl-c85f115c">14.70</span></p></td><td class="cl-c861780d"><p class="cl-c861657f"><span class="cl-c85f115c">15</span></p></td><td class="cl-c861780e"><p class="cl-c861657e"><span class="cl-c85f115c">Traps</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-c8617803"><p class="cl-c861657e"><span class="cl-c85f115c">Bahari</span></p></td><td class="cl-c8617804"><p class="cl-c861657f"><span class="cl-c85f115c">2020-07-25 00:00:00</span></p></td><td class="cl-c8617805"><p class="cl-c861657e"><span class="cl-c85f115c">Siganus sutor</span></p></td><td class="cl-c861780c"><p class="cl-c861657f"><span class="cl-c85f115c">11.60</span></p></td><td class="cl-c861780d"><p class="cl-c861657f"><span class="cl-c85f115c">12</span></p></td><td class="cl-c861780e"><p class="cl-c861657e"><span class="cl-c85f115c">Speargun</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-c8617803"><p class="cl-c861657e"><span class="cl-c85f115c">Bahari</span></p></td><td class="cl-c8617804"><p class="cl-c861657f"><span class="cl-c85f115c">2020-07-25 00:00:00</span></p></td><td class="cl-c8617805"><p class="cl-c861657e"><span class="cl-c85f115c">Siganus sutor</span></p></td><td class="cl-c861780c"><p class="cl-c861657f"><span class="cl-c85f115c">12.90</span></p></td><td class="cl-c861780d"><p class="cl-c861657f"><span class="cl-c85f115c">15</span></p></td><td class="cl-c861780e"><p class="cl-c861657e"><span class="cl-c85f115c">Speargun</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-c8617803"><p class="cl-c861657e"><span class="cl-c85f115c">Bahari</span></p></td><td class="cl-c8617804"><p class="cl-c861657f"><span class="cl-c85f115c">2020-06-15 00:00:00</span></p></td><td class="cl-c8617805"><p class="cl-c861657e"><span class="cl-c85f115c">Acanthurus chronixis</span></p></td><td class="cl-c861780c"><p class="cl-c861657f"><span class="cl-c85f115c">12.00</span></p></td><td class="cl-c861780d"><p class="cl-c861657f"><span class="cl-c85f115c">12</span></p></td><td class="cl-c861780e"><p class="cl-c861657e"><span class="cl-c85f115c">Speargun</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-c8617803"><p class="cl-c861657e"><span class="cl-c85f115c">Bahari</span></p></td><td class="cl-c8617804"><p class="cl-c861657f"><span class="cl-c85f115c">2020-04-08 00:00:00</span></p></td><td class="cl-c8617805"><p class="cl-c861657e"><span class="cl-c85f115c">Acanthurus chronixis</span></p></td><td class="cl-c861780c"><p class="cl-c861657f"><span class="cl-c85f115c">16.40</span></p></td><td class="cl-c861780d"><p class="cl-c861657f"><span class="cl-c85f115c">18</span></p></td><td class="cl-c861780e"><p class="cl-c861657e"><span class="cl-c85f115c">Speargun</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-c86177e7"><p class="cl-c861657e"><span class="cl-c85f115c">Pwani</span></p></td><td class="cl-c86177ee"><p class="cl-c861657f"><span class="cl-c85f115c">2019-07-11 00:00:00</span></p></td><td class="cl-c86177ef"><p class="cl-c861657e"><span class="cl-c85f115c">Calotomus carolinus</span></p></td><td class="cl-c86177f0"><p class="cl-c861657f"><span class="cl-c85f115c">17.00</span></p></td><td class="cl-c86177f1"><p class="cl-c861657f"><span class="cl-c85f115c">18</span></p></td><td class="cl-c86177f2"><p class="cl-c861657e"><span class="cl-c85f115c">Beach seine</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-c86177e7"><p class="cl-c861657e"><span class="cl-c85f115c">Pwani</span></p></td><td class="cl-c86177ee"><p class="cl-c861657f"><span class="cl-c85f115c">2019-07-11 00:00:00</span></p></td><td class="cl-c86177ef"><p class="cl-c861657e"><span class="cl-c85f115c">Calotomus carolinus</span></p></td><td class="cl-c86177f0"><p class="cl-c861657f"><span class="cl-c85f115c">15.50</span></p></td><td class="cl-c86177f1"><p class="cl-c861657f"><span class="cl-c85f115c">18</span></p></td><td class="cl-c86177f2"><p class="cl-c861657e"><span class="cl-c85f115c">Beach seine</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-c8617803"><p class="cl-c861657e"><span class="cl-c85f115c">Pwani</span></p></td><td class="cl-c8617804"><p class="cl-c861657f"><span class="cl-c85f115c">2019-07-12 00:00:00</span></p></td><td class="cl-c8617805"><p class="cl-c861657e"><span class="cl-c85f115c">Siganus sutor</span></p></td><td class="cl-c861780c"><p class="cl-c861657f"><span class="cl-c85f115c">16.50</span></p></td><td class="cl-c861780d"><p class="cl-c861657f"><span class="cl-c85f115c">18</span></p></td><td class="cl-c861780e"><p class="cl-c861657e"><span class="cl-c85f115c">Traps</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-c8617803"><p class="cl-c861657e"><span class="cl-c85f115c">Pwani</span></p></td><td class="cl-c8617804"><p class="cl-c861657f"><span class="cl-c85f115c">2019-07-11 00:00:00</span></p></td><td class="cl-c8617805"><p class="cl-c861657e"><span class="cl-c85f115c">Lutjanus fulviflamma</span></p></td><td class="cl-c861780c"><p class="cl-c861657f"><span class="cl-c85f115c">18.40</span></p></td><td class="cl-c861780d"><p class="cl-c861657f"><span class="cl-c85f115c">21</span></p></td><td class="cl-c861780e"><p class="cl-c861657e"><span class="cl-c85f115c">hook and line</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-c8617803"><p class="cl-c861657e"><span class="cl-c85f115c">Pwani</span></p></td><td class="cl-c8617804"><p class="cl-c861657f"><span class="cl-c85f115c">2019-07-11 00:00:00</span></p></td><td class="cl-c8617805"><p class="cl-c861657e"><span class="cl-c85f115c">Siganus sutor</span></p></td><td class="cl-c861780c"><p class="cl-c861657f"><span class="cl-c85f115c">19.00</span></p></td><td class="cl-c861780d"><p class="cl-c861657f"><span class="cl-c85f115c">21</span></p></td><td class="cl-c861780e"><p class="cl-c861657e"><span class="cl-c85f115c">Traps</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-c8617803"><p class="cl-c861657e"><span class="cl-c85f115c">Pwani</span></p></td><td class="cl-c8617804"><p class="cl-c861657f"><span class="cl-c85f115c">2019-07-11 00:00:00</span></p></td><td class="cl-c8617805"><p class="cl-c861657e"><span class="cl-c85f115c">Siganus sutor</span></p></td><td class="cl-c861780c"><p class="cl-c861657f"><span class="cl-c85f115c">20.10</span></p></td><td class="cl-c861780d"><p class="cl-c861657f"><span class="cl-c85f115c">21</span></p></td><td class="cl-c861780e"><p class="cl-c861657e"><span class="cl-c85f115c">hook and line</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-c86177f3"><p class="cl-c861657e"><span class="cl-c85f115c">Bahari</span></p></td><td class="cl-c86177f8"><p class="cl-c861657f"><span class="cl-c85f115c">2020-04-08 00:00:00</span></p></td><td class="cl-c86177f9"><p class="cl-c861657e"><span class="cl-c85f115c">Lethrinus harak</span></p></td><td class="cl-c86177fa"><p class="cl-c861657f"><span class="cl-c85f115c">10.90</span></p></td><td class="cl-c86177fb"><p class="cl-c861657f"><span class="cl-c85f115c">12</span></p></td><td class="cl-c8617802"><p class="cl-c861657e"><span class="cl-c85f115c">Traps</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-c8617803"><p class="cl-c861657e"><span class="cl-c85f115c">Pwani</span></p></td><td class="cl-c8617804"><p class="cl-c861657f"><span class="cl-c85f115c">2019-05-30 00:00:00</span></p></td><td class="cl-c8617805"><p class="cl-c861657e"><span class="cl-c85f115c">Leptoscarus vaigiensis</span></p></td><td class="cl-c861780c"><p class="cl-c861657f"><span class="cl-c85f115c">13.90</span></p></td><td class="cl-c861780d"><p class="cl-c861657f"><span class="cl-c85f115c">15</span></p></td><td class="cl-c861780e"><p class="cl-c861657e"><span class="cl-c85f115c">Speargun</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-c8617803"><p class="cl-c861657e"><span class="cl-c85f115c">Bahari</span></p></td><td class="cl-c8617804"><p class="cl-c861657f"><span class="cl-c85f115c">2020-07-25 00:00:00</span></p></td><td class="cl-c8617805"><p class="cl-c861657e"><span class="cl-c85f115c">Siganus sutor</span></p></td><td class="cl-c861780c"><p class="cl-c861657f"><span class="cl-c85f115c">14.50</span></p></td><td class="cl-c861780d"><p class="cl-c861657f"><span class="cl-c85f115c">15</span></p></td><td class="cl-c861780e"><p class="cl-c861657e"><span class="cl-c85f115c">Traps</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-c86177f3"><p class="cl-c861657e"><span class="cl-c85f115c">Bahari</span></p></td><td class="cl-c86177f8"><p class="cl-c861657f"><span class="cl-c85f115c">2020-06-15 00:00:00</span></p></td><td class="cl-c86177f9"><p class="cl-c861657e"><span class="cl-c85f115c">Lethrinus mahsena</span></p></td><td class="cl-c86177fa"><p class="cl-c861657f"><span class="cl-c85f115c">12.40</span></p></td><td class="cl-c86177fb"><p class="cl-c861657f"><span class="cl-c85f115c">15</span></p></td><td class="cl-c8617802"><p class="cl-c861657e"><span class="cl-c85f115c">Traps</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-c86177f3"><p class="cl-c861657e"><span class="cl-c85f115c">Bahari</span></p></td><td class="cl-c86177f8"><p class="cl-c861657f"><span class="cl-c85f115c">2020-04-08 00:00:00</span></p></td><td class="cl-c86177f9"><p class="cl-c861657e"><span class="cl-c85f115c">Lethrinus mahsena</span></p></td><td class="cl-c86177fa"><p class="cl-c861657f"><span class="cl-c85f115c">10.60</span></p></td><td class="cl-c86177fb"><p class="cl-c861657f"><span class="cl-c85f115c">12</span></p></td><td class="cl-c8617802"><p class="cl-c861657e"><span class="cl-c85f115c">Traps</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-c86177f3"><p class="cl-c861657e"><span class="cl-c85f115c">Bahari</span></p></td><td class="cl-c86177f8"><p class="cl-c861657f"><span class="cl-c85f115c">2020-06-15 00:00:00</span></p></td><td class="cl-c86177f9"><p class="cl-c861657e"><span class="cl-c85f115c">Lethrinus mahsena</span></p></td><td class="cl-c86177fa"><p class="cl-c861657f"><span class="cl-c85f115c">13.50</span></p></td><td class="cl-c86177fb"><p class="cl-c861657f"><span class="cl-c85f115c">15</span></p></td><td class="cl-c8617802"><p class="cl-c861657e"><span class="cl-c85f115c">Traps</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-c8617803"><p class="cl-c861657e"><span class="cl-c85f115c">Bahari</span></p></td><td class="cl-c8617804"><p class="cl-c861657f"><span class="cl-c85f115c">2020-07-25 00:00:00</span></p></td><td class="cl-c8617805"><p class="cl-c861657e"><span class="cl-c85f115c">Siganus sutor</span></p></td><td class="cl-c861780c"><p class="cl-c861657f"><span class="cl-c85f115c">17.00</span></p></td><td class="cl-c861780d"><p class="cl-c861657f"><span class="cl-c85f115c">18</span></p></td><td class="cl-c861780e"><p class="cl-c861657e"><span class="cl-c85f115c">Traps</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-c86177e7"><p class="cl-c861657e"><span class="cl-c85f115c">Pwani</span></p></td><td class="cl-c86177ee"><p class="cl-c861657f"><span class="cl-c85f115c">2019-07-11 00:00:00</span></p></td><td class="cl-c86177ef"><p class="cl-c861657e"><span class="cl-c85f115c">Calotomus carolinus</span></p></td><td class="cl-c86177f0"><p class="cl-c861657f"><span class="cl-c85f115c">17.00</span></p></td><td class="cl-c86177f1"><p class="cl-c861657f"><span class="cl-c85f115c">18</span></p></td><td class="cl-c86177f2"><p class="cl-c861657e"><span class="cl-c85f115c">Beach seine</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-c8617803"><p class="cl-c861657e"><span class="cl-c85f115c">Pwani</span></p></td><td class="cl-c8617804"><p class="cl-c861657f"><span class="cl-c85f115c">2019-05-30 00:00:00</span></p></td><td class="cl-c8617805"><p class="cl-c861657e"><span class="cl-c85f115c">Siganus sutor</span></p></td><td class="cl-c861780c"><p class="cl-c861657f"><span class="cl-c85f115c">15.00</span></p></td><td class="cl-c861780d"><p class="cl-c861657f"><span class="cl-c85f115c">15</span></p></td><td class="cl-c861780e"><p class="cl-c861657e"><span class="cl-c85f115c">Speargun</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-c8617803"><p class="cl-c861657e"><span class="cl-c85f115c">Bahari</span></p></td><td class="cl-c8617804"><p class="cl-c861657f"><span class="cl-c85f115c">2020-07-25 00:00:00</span></p></td><td class="cl-c8617805"><p class="cl-c861657e"><span class="cl-c85f115c">Siganus sutor</span></p></td><td class="cl-c861780c"><p class="cl-c861657f"><span class="cl-c85f115c">15.50</span></p></td><td class="cl-c861780d"><p class="cl-c861657f"><span class="cl-c85f115c">18</span></p></td><td class="cl-c861780e"><p class="cl-c861657e"><span class="cl-c85f115c">Traps</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-c86177e7"><p class="cl-c861657e"><span class="cl-c85f115c">Pwani</span></p></td><td class="cl-c86177ee"><p class="cl-c861657f"><span class="cl-c85f115c">2019-07-11 00:00:00</span></p></td><td class="cl-c86177ef"><p class="cl-c861657e"><span class="cl-c85f115c">Calotomus carolinus</span></p></td><td class="cl-c86177f0"><p class="cl-c861657f"><span class="cl-c85f115c">17.00</span></p></td><td class="cl-c86177f1"><p class="cl-c861657f"><span class="cl-c85f115c">18</span></p></td><td class="cl-c86177f2"><p class="cl-c861657e"><span class="cl-c85f115c">Beach seine</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-c8617816"><p class="cl-c861657e"><span class="cl-c85f115c">Pwani</span></p></td><td class="cl-c8617817"><p class="cl-c861657f"><span class="cl-c85f115c">2019-05-30 00:00:00</span></p></td><td class="cl-c8617818"><p class="cl-c861657e"><span class="cl-c85f115c">Lethrinus mahsena</span></p></td><td class="cl-c8617819"><p class="cl-c861657f"><span class="cl-c85f115c">10.00</span></p></td><td class="cl-c861781a"><p class="cl-c861657f"><span class="cl-c85f115c">12</span></p></td><td class="cl-c861781b"><p class="cl-c861657e"><span class="cl-c85f115c">hook and line</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-c8617803"><p class="cl-c861657e"><span class="cl-c85f115c">Pwani</span></p></td><td class="cl-c8617804"><p class="cl-c861657f"><span class="cl-c85f115c">2019-05-30 00:00:00</span></p></td><td class="cl-c8617805"><p class="cl-c861657e"><span class="cl-c85f115c">Leptoscarus vaigiensis</span></p></td><td class="cl-c861780c"><p class="cl-c861657f"><span class="cl-c85f115c">13.90</span></p></td><td class="cl-c861780d"><p class="cl-c861657f"><span class="cl-c85f115c">15</span></p></td><td class="cl-c861780e"><p class="cl-c861657e"><span class="cl-c85f115c">Speargun</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-c8617803"><p class="cl-c861657e"><span class="cl-c85f115c">Pwani</span></p></td><td class="cl-c8617804"><p class="cl-c861657f"><span class="cl-c85f115c">2019-07-12 00:00:00</span></p></td><td class="cl-c8617805"><p class="cl-c861657e"><span class="cl-c85f115c">Siganus sutor</span></p></td><td class="cl-c861780c"><p class="cl-c861657f"><span class="cl-c85f115c">22.65</span></p></td><td class="cl-c861780d"><p class="cl-c861657f"><span class="cl-c85f115c">24</span></p></td><td class="cl-c861780e"><p class="cl-c861657e"><span class="cl-c85f115c">Traps</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-c8617820"><p class="cl-c861657e"><span class="cl-c85f115c">Pwani</span></p></td><td class="cl-c8617821"><p class="cl-c861657f"><span class="cl-c85f115c">2019-05-30 00:00:00</span></p></td><td class="cl-c8617822"><p class="cl-c861657e"><span class="cl-c85f115c">Siganus sutor</span></p></td><td class="cl-c8617823"><p class="cl-c861657f"><span class="cl-c85f115c">11.20</span></p></td><td class="cl-c861782a"><p class="cl-c861657f"><span class="cl-c85f115c">12</span></p></td><td class="cl-c861782b"><p class="cl-c861657e"><span class="cl-c85f115c">hook and line</span></p></td></tr></tbody></table></div>
</div>
</div>
</section>
<section id="dropping-and-keeping-variables" class="level3" data-number="1.6">
<h3 data-number="1.6" class="anchored" data-anchor-id="dropping-and-keeping-variables"><span class="header-section-number">1.6</span> Dropping and keeping variables</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1"></a>lfq.time <span class="sc">%&gt;%</span> </span>
<span id="cb16-2"><a href="#cb16-2"></a>  <span class="fu">select</span>(<span class="sc">-</span>date)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 779 × 8
   landing_site   day month  year species           size_cm size_class gear_type
   &lt;chr&gt;        &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;               &lt;dbl&gt;      &lt;dbl&gt; &lt;chr&gt;    
 1 Pwani           30     5  2019 Siganus sutor        16.5         18 Speargun 
 2 Pwani           30     5  2019 Siganus sutor        12           12 Speargun 
 3 Pwani           30     5  2019 Siganus sutor        15           15 Speargun 
 4 Pwani           30     5  2019 Siganus sutor        33           33 Speargun 
 5 Pwani           30     5  2019 Siganus sutor        11.2         12 hook and…
 6 Pwani           30     5  2019 Siganus sutor        17           18 hook and…
 7 Pwani           30     5  2019 Siganus sutor        19           21 Gill net 
 8 Pwani           30     5  2019 Lethrinus mahsena    10           12 Traps    
 9 Pwani           30     5  2019 Lethrinus mahsena    11           12 Traps    
10 Pwani           30     5  2019 Lethrinus mahsena     9           12 Traps    
# ℹ 769 more rows</code></pre>
</div>
</div>
</section>
<section id="missing-values" class="level3" data-number="1.7">
<h3 data-number="1.7" class="anchored" data-anchor-id="missing-values"><span class="header-section-number">1.7</span> Missing values</h3>
<p>R handles missing values differently than some other programs, including Stata. Missing values will appear as NA (whereas in Stata these will appear as large numeric values). Note, though, that NA is not a string, it is a symbol. If you try to conduct logical tests with NA, you are likely to get errors or NULL.</p>
</section>
</section>
<section id="length-frequency" class="level2" data-number="2">
<h2 data-number="2" class="anchored" data-anchor-id="length-frequency"><span class="header-section-number">2</span> Length frequency</h2>
<p>Let’s first look at the length data from the catch, which gives an indication of the size structure and health of the population. Using several case studies, we will filter the dataset to choose certain species and then plot histograms of the length data, which reveal the number of individual of each size class were measured in a sample or catch data.</p>
<p>You have several options for dealing with <code>NA</code> values. - <code>na.omit()</code> or <code>na.exclude()</code> will row-wise delete missing values in your dataset - <code>na.fail()</code> will keep an object only if no missing values are present - <code>na.action=</code> is a common option in many functions, for example in a linear model where you might write <code>model &lt;- lm(y~x, data = data, na.action = na.omit)</code>. - <code>is.na</code> allows you to logically test for <code>NA</code> values, for example when subsetting</p>
<section id="merging-and-combining-data" class="level3" data-number="2.1">
<h3 data-number="2.1" class="anchored" data-anchor-id="merging-and-combining-data"><span class="header-section-number">2.1</span> Merging and combining data</h3>
<p>You may want to draw on data from multiple sources or at differing levels of aggregation. To do this, you first must know what your data look like and know what format you ultimately want them to take. Whatever you do, do not attempt to merge datasets by hand—this leads to mistakes and frustration.</p>
<p>left join bind_row bind_col</p>
</section>
<section id="reshaping-data" class="level3" data-number="2.2">
<h3 data-number="2.2" class="anchored" data-anchor-id="reshaping-data"><span class="header-section-number">2.2</span> Reshaping data</h3>
<p>Reshaping data into different formats is a common task. With rectangular type data (data frames have the same number of rows in each column) there are two main data frame shapes that you will come across: the <code>long</code> format (sometimes called stacked) and the <code>wide</code> format. An example of a long format data frame is given in <a href="#tbl-long1" class="quarto-xref">Table&nbsp;1</a>. We can see that each row is a single observation from an individual species and each species can have multiple rows with different values of year and catch.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1"></a><span class="fu">set.seed</span>(<span class="dv">123</span>)</span>
<span id="cb18-2"><a href="#cb18-2"></a></span>
<span id="cb18-3"><a href="#cb18-3"></a>aa <span class="ot">=</span> <span class="fu">read_csv</span>(<span class="st">"../data/tidy/fao_capture.csv"</span>)  <span class="sc">%&gt;%</span> </span>
<span id="cb18-4"><a href="#cb18-4"></a>  <span class="fu">sample_n</span>(<span class="at">size =</span> <span class="dv">5</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb18-5"><a href="#cb18-5"></a>  <span class="fu">separate</span>(<span class="at">col =</span> <span class="st">'ASFIS species'</span>, <span class="at">into =</span> <span class="fu">c</span>(<span class="st">"english_name"</span>, <span class="st">"species"</span>), <span class="at">sep =</span> <span class="st">"-"</span>) <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>, <span class="dv">7</span><span class="sc">:</span><span class="dv">10</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div id="tbl-long1" class="cell quarto-float anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-long1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;1: Long format data frame data format
</figcaption>
<div aria-describedby="tbl-long1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output-display">
<div class="tabwid"><style>.cl-c8a50590{}.cl-c89edf4e{font-family:'Arial';font-size:11pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-c8a1239e{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-c8a13154{width:1.754in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c8a1315e{width:1.763in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c8a1315f{width:0.625in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c8a13160{width:0.905in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c8a13168{width:1.754in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c8a13169{width:1.763in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c8a1316a{width:0.625in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c8a1316b{width:0.905in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c8a13172{width:1.754in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c8a1317c{width:1.763in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c8a1317d{width:0.625in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c8a1317e{width:0.905in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c8a13186{width:1.754in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c8a13187{width:1.763in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c8a13188{width:0.625in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c8a13190{width:0.905in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c8a13191{width:1.754in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c8a13192{width:1.763in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c8a1319a{width:0.625in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c8a1319b{width:0.905in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c8a131a4{width:1.754in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c8a131a5{width:1.763in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c8a131a6{width:0.625in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c8a131ae{width:0.905in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table data-quarto-disable-processing="true" class="cl-c8a50590"><thead><tr style="overflow-wrap:break-word;"><th class="cl-c8a13154"><p class="cl-c8a1239e"><span class="cl-c89edf4e">english_name</span></p></th><th class="cl-c8a1315e"><p class="cl-c8a1239e"><span class="cl-c89edf4e">species</span></p></th><th class="cl-c8a1315f"><p class="cl-c8a1239e"><span class="cl-c89edf4e">year</span></p></th><th class="cl-c8a13160"><p class="cl-c8a1239e"><span class="cl-c89edf4e">catch_mt</span></p></th></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-c8a13168"><p class="cl-c8a1239e"><span class="cl-c89edf4e">Round sardinella</span></p></td><td class="cl-c8a13169"><p class="cl-c8a1239e"><span class="cl-c89edf4e">Sardinella aurita</span></p></td><td class="cl-c8a1316a"><p class="cl-c8a1239e"><span class="cl-c89edf4e">2016</span></p></td><td class="cl-c8a1316b"><p class="cl-c8a1239e"><span class="cl-c89edf4e">123 377</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-c8a13168"><p class="cl-c8a1239e"><span class="cl-c89edf4e">Round sardinella</span></p></td><td class="cl-c8a13169"><p class="cl-c8a1239e"><span class="cl-c89edf4e">Sardinella aurita</span></p></td><td class="cl-c8a1316a"><p class="cl-c8a1239e"><span class="cl-c89edf4e">2017</span></p></td><td class="cl-c8a1316b"><p class="cl-c8a1239e"><span class="cl-c89edf4e">126 766</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-c8a13168"><p class="cl-c8a1239e"><span class="cl-c89edf4e">Round sardinella</span></p></td><td class="cl-c8a13169"><p class="cl-c8a1239e"><span class="cl-c89edf4e">Sardinella aurita</span></p></td><td class="cl-c8a1316a"><p class="cl-c8a1239e"><span class="cl-c89edf4e">2018</span></p></td><td class="cl-c8a1316b"><p class="cl-c8a1239e"><span class="cl-c89edf4e">126 400</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-c8a13168"><p class="cl-c8a1239e"><span class="cl-c89edf4e">Round sardinella</span></p></td><td class="cl-c8a13169"><p class="cl-c8a1239e"><span class="cl-c89edf4e">Sardinella aurita</span></p></td><td class="cl-c8a1316a"><p class="cl-c8a1239e"><span class="cl-c89edf4e">2019</span></p></td><td class="cl-c8a1316b"><p class="cl-c8a1239e"><span class="cl-c89edf4e">126 400</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-c8a13172"><p class="cl-c8a1239e"><span class="cl-c89edf4e">Mexican four</span></p></td><td class="cl-c8a1317c"><p class="cl-c8a1239e"><span class="cl-c89edf4e">eyed octopus</span></p></td><td class="cl-c8a1317d"><p class="cl-c8a1239e"><span class="cl-c89edf4e">2016</span></p></td><td class="cl-c8a1317e"><p class="cl-c8a1239e"><span class="cl-c89edf4e">25 722</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-c8a13172"><p class="cl-c8a1239e"><span class="cl-c89edf4e">Mexican four</span></p></td><td class="cl-c8a1317c"><p class="cl-c8a1239e"><span class="cl-c89edf4e">eyed octopus</span></p></td><td class="cl-c8a1317d"><p class="cl-c8a1239e"><span class="cl-c89edf4e">2017</span></p></td><td class="cl-c8a1317e"><p class="cl-c8a1239e"><span class="cl-c89edf4e">26 020</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-c8a13172"><p class="cl-c8a1239e"><span class="cl-c89edf4e">Mexican four</span></p></td><td class="cl-c8a1317c"><p class="cl-c8a1239e"><span class="cl-c89edf4e">eyed octopus</span></p></td><td class="cl-c8a1317d"><p class="cl-c8a1239e"><span class="cl-c89edf4e">2018</span></p></td><td class="cl-c8a1317e"><p class="cl-c8a1239e"><span class="cl-c89edf4e">28809</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-c8a13172"><p class="cl-c8a1239e"><span class="cl-c89edf4e">Mexican four</span></p></td><td class="cl-c8a1317c"><p class="cl-c8a1239e"><span class="cl-c89edf4e">eyed octopus</span></p></td><td class="cl-c8a1317d"><p class="cl-c8a1239e"><span class="cl-c89edf4e">2019</span></p></td><td class="cl-c8a1317e"><p class="cl-c8a1239e"><span class="cl-c89edf4e">20 119</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-c8a13186"><p class="cl-c8a1239e"><span class="cl-c89edf4e">Gulf menhaden</span></p></td><td class="cl-c8a13187"><p class="cl-c8a1239e"><span class="cl-c89edf4e">Brevoortia patronus</span></p></td><td class="cl-c8a13188"><p class="cl-c8a1239e"><span class="cl-c89edf4e">2016</span></p></td><td class="cl-c8a13190"><p class="cl-c8a1239e"><span class="cl-c89edf4e">618 563</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-c8a13186"><p class="cl-c8a1239e"><span class="cl-c89edf4e">Gulf menhaden</span></p></td><td class="cl-c8a13187"><p class="cl-c8a1239e"><span class="cl-c89edf4e">Brevoortia patronus</span></p></td><td class="cl-c8a13188"><p class="cl-c8a1239e"><span class="cl-c89edf4e">2017</span></p></td><td class="cl-c8a13190"><p class="cl-c8a1239e"><span class="cl-c89edf4e">461 189</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-c8a13186"><p class="cl-c8a1239e"><span class="cl-c89edf4e">Gulf menhaden</span></p></td><td class="cl-c8a13187"><p class="cl-c8a1239e"><span class="cl-c89edf4e">Brevoortia patronus</span></p></td><td class="cl-c8a13188"><p class="cl-c8a1239e"><span class="cl-c89edf4e">2018</span></p></td><td class="cl-c8a13190"><p class="cl-c8a1239e"><span class="cl-c89edf4e">529 231</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-c8a13186"><p class="cl-c8a1239e"><span class="cl-c89edf4e">Gulf menhaden</span></p></td><td class="cl-c8a13187"><p class="cl-c8a1239e"><span class="cl-c89edf4e">Brevoortia patronus</span></p></td><td class="cl-c8a13188"><p class="cl-c8a1239e"><span class="cl-c89edf4e">2019</span></p></td><td class="cl-c8a13190"><p class="cl-c8a1239e"><span class="cl-c89edf4e">336 221</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-c8a13191"><p class="cl-c8a1239e"><span class="cl-c89edf4e">Stromboid conchs nei</span></p></td><td class="cl-c8a13192"><p class="cl-c8a1239e"><span class="cl-c89edf4e">Strombus spp</span></p></td><td class="cl-c8a1319a"><p class="cl-c8a1239e"><span class="cl-c89edf4e">2016</span></p></td><td class="cl-c8a1319b"><p class="cl-c8a1239e"><span class="cl-c89edf4e">28 774</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-c8a13191"><p class="cl-c8a1239e"><span class="cl-c89edf4e">Stromboid conchs nei</span></p></td><td class="cl-c8a13192"><p class="cl-c8a1239e"><span class="cl-c89edf4e">Strombus spp</span></p></td><td class="cl-c8a1319a"><p class="cl-c8a1239e"><span class="cl-c89edf4e">2017</span></p></td><td class="cl-c8a1319b"><p class="cl-c8a1239e"><span class="cl-c89edf4e">35 273</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-c8a13191"><p class="cl-c8a1239e"><span class="cl-c89edf4e">Stromboid conchs nei</span></p></td><td class="cl-c8a13192"><p class="cl-c8a1239e"><span class="cl-c89edf4e">Strombus spp</span></p></td><td class="cl-c8a1319a"><p class="cl-c8a1239e"><span class="cl-c89edf4e">2018</span></p></td><td class="cl-c8a1319b"><p class="cl-c8a1239e"><span class="cl-c89edf4e">34 856</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-c8a13191"><p class="cl-c8a1239e"><span class="cl-c89edf4e">Stromboid conchs nei</span></p></td><td class="cl-c8a13192"><p class="cl-c8a1239e"><span class="cl-c89edf4e">Strombus spp</span></p></td><td class="cl-c8a1319a"><p class="cl-c8a1239e"><span class="cl-c89edf4e">2019</span></p></td><td class="cl-c8a1319b"><p class="cl-c8a1239e"><span class="cl-c89edf4e">28 308</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-c8a13172"><p class="cl-c8a1239e"><span class="cl-c89edf4e">Atlantic seabob</span></p></td><td class="cl-c8a1317c"><p class="cl-c8a1239e"><span class="cl-c89edf4e">Xiphopenaeus kroyeri</span></p></td><td class="cl-c8a1317d"><p class="cl-c8a1239e"><span class="cl-c89edf4e">2016</span></p></td><td class="cl-c8a1317e"><p class="cl-c8a1239e"><span class="cl-c89edf4e">30 147</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-c8a13172"><p class="cl-c8a1239e"><span class="cl-c89edf4e">Atlantic seabob</span></p></td><td class="cl-c8a1317c"><p class="cl-c8a1239e"><span class="cl-c89edf4e">Xiphopenaeus kroyeri</span></p></td><td class="cl-c8a1317d"><p class="cl-c8a1239e"><span class="cl-c89edf4e">2017</span></p></td><td class="cl-c8a1317e"><p class="cl-c8a1239e"><span class="cl-c89edf4e">31 319</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-c8a13172"><p class="cl-c8a1239e"><span class="cl-c89edf4e">Atlantic seabob</span></p></td><td class="cl-c8a1317c"><p class="cl-c8a1239e"><span class="cl-c89edf4e">Xiphopenaeus kroyeri</span></p></td><td class="cl-c8a1317d"><p class="cl-c8a1239e"><span class="cl-c89edf4e">2018</span></p></td><td class="cl-c8a1317e"><p class="cl-c8a1239e"><span class="cl-c89edf4e">31 625</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-c8a131a4"><p class="cl-c8a1239e"><span class="cl-c89edf4e">Atlantic seabob</span></p></td><td class="cl-c8a131a5"><p class="cl-c8a1239e"><span class="cl-c89edf4e">Xiphopenaeus kroyeri</span></p></td><td class="cl-c8a131a6"><p class="cl-c8a1239e"><span class="cl-c89edf4e">2019</span></p></td><td class="cl-c8a131ae"><p class="cl-c8a1239e"><span class="cl-c89edf4e">22 497</span></p></td></tr></tbody></table></div>
</div>
</div>
</figure>
</div>
</div>
<p>We can also format the same data in the wide format as in <a href="#tbl-wide" class="quarto-xref">Table&nbsp;2</a>. In this format the year are treated as variables and catches are values within the years.</p>
<div class="cell">
<div id="tbl-wide" class="cell quarto-float anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-wide-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;2: Wide format data frame data format
</figcaption>
<div aria-describedby="tbl-wide-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output-display">
<div class="tabwid"><style>.cl-c8baeebe{}.cl-c8b47228{font-family:'Arial';font-size:11pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-c8b69ca6{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-c8b6abd8{width:1.754in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c8b6abe2{width:1.763in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c8b6abe3{width:0.837in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c8b6abe4{width:1.754in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c8b6abe5{width:1.763in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c8b6abec{width:0.837in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c8b6abf6{width:1.754in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c8b6abf7{width:1.763in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c8b6abf8{width:0.837in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c8b6ac00{width:1.754in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c8b6ac01{width:1.763in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c8b6ac02{width:0.837in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c8b6ac03{width:1.754in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c8b6ac0a{width:1.763in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c8b6ac0b{width:0.837in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c8b6ac14{width:1.754in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c8b6ac15{width:1.763in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c8b6ac16{width:0.837in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table data-quarto-disable-processing="true" class="cl-c8baeebe"><thead><tr style="overflow-wrap:break-word;"><th class="cl-c8b6abd8"><p class="cl-c8b69ca6"><span class="cl-c8b47228">english_name</span></p></th><th class="cl-c8b6abe2"><p class="cl-c8b69ca6"><span class="cl-c8b47228">species</span></p></th><th class="cl-c8b6abe3"><p class="cl-c8b69ca6"><span class="cl-c8b47228">2016</span></p></th><th class="cl-c8b6abe3"><p class="cl-c8b69ca6"><span class="cl-c8b47228">2017</span></p></th><th class="cl-c8b6abe3"><p class="cl-c8b69ca6"><span class="cl-c8b47228">2018</span></p></th><th class="cl-c8b6abe3"><p class="cl-c8b69ca6"><span class="cl-c8b47228">2019</span></p></th></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-c8b6abe4"><p class="cl-c8b69ca6"><span class="cl-c8b47228">Round sardinella</span></p></td><td class="cl-c8b6abe5"><p class="cl-c8b69ca6"><span class="cl-c8b47228">Sardinella aurita</span></p></td><td class="cl-c8b6abec"><p class="cl-c8b69ca6"><span class="cl-c8b47228">123 377</span></p></td><td class="cl-c8b6abec"><p class="cl-c8b69ca6"><span class="cl-c8b47228">126 766</span></p></td><td class="cl-c8b6abec"><p class="cl-c8b69ca6"><span class="cl-c8b47228">126 400</span></p></td><td class="cl-c8b6abec"><p class="cl-c8b69ca6"><span class="cl-c8b47228">126 400</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-c8b6abf6"><p class="cl-c8b69ca6"><span class="cl-c8b47228">Mexican four</span></p></td><td class="cl-c8b6abf7"><p class="cl-c8b69ca6"><span class="cl-c8b47228">eyed octopus</span></p></td><td class="cl-c8b6abf8"><p class="cl-c8b69ca6"><span class="cl-c8b47228">25 722</span></p></td><td class="cl-c8b6abf8"><p class="cl-c8b69ca6"><span class="cl-c8b47228">26 020</span></p></td><td class="cl-c8b6abf8"><p class="cl-c8b69ca6"><span class="cl-c8b47228">28809</span></p></td><td class="cl-c8b6abf8"><p class="cl-c8b69ca6"><span class="cl-c8b47228">20 119</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-c8b6ac00"><p class="cl-c8b69ca6"><span class="cl-c8b47228">Gulf menhaden</span></p></td><td class="cl-c8b6ac01"><p class="cl-c8b69ca6"><span class="cl-c8b47228">Brevoortia patronus</span></p></td><td class="cl-c8b6ac02"><p class="cl-c8b69ca6"><span class="cl-c8b47228">618 563</span></p></td><td class="cl-c8b6ac02"><p class="cl-c8b69ca6"><span class="cl-c8b47228">461 189</span></p></td><td class="cl-c8b6ac02"><p class="cl-c8b69ca6"><span class="cl-c8b47228">529 231</span></p></td><td class="cl-c8b6ac02"><p class="cl-c8b69ca6"><span class="cl-c8b47228">336 221</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-c8b6ac03"><p class="cl-c8b69ca6"><span class="cl-c8b47228">Stromboid conchs nei</span></p></td><td class="cl-c8b6ac0a"><p class="cl-c8b69ca6"><span class="cl-c8b47228">Strombus spp</span></p></td><td class="cl-c8b6ac0b"><p class="cl-c8b69ca6"><span class="cl-c8b47228">28 774</span></p></td><td class="cl-c8b6ac0b"><p class="cl-c8b69ca6"><span class="cl-c8b47228">35 273</span></p></td><td class="cl-c8b6ac0b"><p class="cl-c8b69ca6"><span class="cl-c8b47228">34 856</span></p></td><td class="cl-c8b6ac0b"><p class="cl-c8b69ca6"><span class="cl-c8b47228">28 308</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-c8b6ac14"><p class="cl-c8b69ca6"><span class="cl-c8b47228">Atlantic seabob</span></p></td><td class="cl-c8b6ac15"><p class="cl-c8b69ca6"><span class="cl-c8b47228">Xiphopenaeus kroyeri</span></p></td><td class="cl-c8b6ac16"><p class="cl-c8b69ca6"><span class="cl-c8b47228">30 147</span></p></td><td class="cl-c8b6ac16"><p class="cl-c8b69ca6"><span class="cl-c8b47228">31 319</span></p></td><td class="cl-c8b6ac16"><p class="cl-c8b69ca6"><span class="cl-c8b47228">31 625</span></p></td><td class="cl-c8b6ac16"><p class="cl-c8b69ca6"><span class="cl-c8b47228">22 497</span></p></td></tr></tbody></table></div>
</div>
</div>
</figure>
</div>
</div>
<p>Whilst there’s no inherent problem with either of these formats we will sometimes need to convert between the two because some functions will require a specific format for them to work. But for the modern tidyverse function, only the dataset that is <code>long</code> format accepted.</p>
<p>There are many ways to convert between these two formats but we’ll use the <code>pivot_longer()</code> and <code>pivot_wider()</code> functions from the <strong>tidyr</strong> package <span class="citation" data-cites="tidyr">(<a href="#ref-tidyr" role="doc-biblioref"><strong>tidyr?</strong></a>)</span>. We will use <code>fao_capture.csv</code> dataset in this session, we can simply load it with <code>read_csv</code> function and specify the path our dataset reside;</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1"></a>capture.wide <span class="ot">=</span> <span class="fu">read_csv</span>(<span class="st">"../data/tidy/fao_capture.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1"></a>capture.wide  <span class="sc">|&gt;</span> </span>
<span id="cb20-2"><a href="#cb20-2"></a>  flextable<span class="sc">::</span><span class="fu">flextable</span>() <span class="sc">|&gt;</span> </span>
<span id="cb20-3"><a href="#cb20-3"></a>  flextable<span class="sc">::</span><span class="fu">autofit</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="tabwid"><style>.cl-c8e321fe{}.cl-c8dcf5b8{font-family:'Arial';font-size:11pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-c8df5d62{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-c8df6bfe{width:3.41in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c8df6bff{width:0.837in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c8df6c08{width:3.41in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c8df6c09{width:0.837in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c8df6c0a{width:3.41in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c8df6c12{width:0.837in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c8df6c13{width:3.41in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c8df6c14{width:0.837in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c8df6c1c{width:3.41in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c8df6c1d{width:0.837in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c8df6c1e{width:3.41in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c8df6c26{width:0.837in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c8df6c27{width:3.41in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c8df6c28{width:0.837in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c8df6c29{width:3.41in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c8df6c30{width:0.837in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c8df6c31{width:3.41in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c8df6c32{width:0.837in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table data-quarto-disable-processing="true" class="cl-c8e321fe"><thead><tr style="overflow-wrap:break-word;"><th class="cl-c8df6bfe"><p class="cl-c8df5d62"><span class="cl-c8dcf5b8">ASFIS species</span></p></th><th class="cl-c8df6bff"><p class="cl-c8df5d62"><span class="cl-c8dcf5b8">2012</span></p></th><th class="cl-c8df6bff"><p class="cl-c8df5d62"><span class="cl-c8dcf5b8">2013</span></p></th><th class="cl-c8df6bff"><p class="cl-c8df5d62"><span class="cl-c8dcf5b8">2014</span></p></th><th class="cl-c8df6bff"><p class="cl-c8df5d62"><span class="cl-c8dcf5b8">2015</span></p></th><th class="cl-c8df6bff"><p class="cl-c8df5d62"><span class="cl-c8dcf5b8">2016</span></p></th><th class="cl-c8df6bff"><p class="cl-c8df5d62"><span class="cl-c8dcf5b8">2017</span></p></th><th class="cl-c8df6bff"><p class="cl-c8df5d62"><span class="cl-c8dcf5b8">2018</span></p></th><th class="cl-c8df6bff"><p class="cl-c8df5d62"><span class="cl-c8dcf5b8">2019</span></p></th></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-c8df6c08"><p class="cl-c8df5d62"><span class="cl-c8dcf5b8">Marine fishes nei-Osteichthyes</span></p></td><td class="cl-c8df6c09"><p class="cl-c8df5d62"><span class="cl-c8dcf5b8">137 683</span></p></td><td class="cl-c8df6c09"><p class="cl-c8df5d62"><span class="cl-c8dcf5b8">112 095</span></p></td><td class="cl-c8df6c09"><p class="cl-c8df5d62"><span class="cl-c8dcf5b8">110 535</span></p></td><td class="cl-c8df6c09"><p class="cl-c8df5d62"><span class="cl-c8dcf5b8">118 078</span></p></td><td class="cl-c8df6c09"><p class="cl-c8df5d62"><span class="cl-c8dcf5b8">118 204</span></p></td><td class="cl-c8df6c09"><p class="cl-c8df5d62"><span class="cl-c8dcf5b8">124 895</span></p></td><td class="cl-c8df6c09"><p class="cl-c8df5d62"><span class="cl-c8dcf5b8">109 938</span></p></td><td class="cl-c8df6c09"><p class="cl-c8df5d62"><span class="cl-c8dcf5b8">415 031</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-c8df6c0a"><p class="cl-c8df5d62"><span class="cl-c8dcf5b8">Gulf menhaden-Brevoortia patronus</span></p></td><td class="cl-c8df6c12"><p class="cl-c8df5d62"><span class="cl-c8dcf5b8">500 162</span></p></td><td class="cl-c8df6c12"><p class="cl-c8df5d62"><span class="cl-c8dcf5b8">440 709</span></p></td><td class="cl-c8df6c12"><p class="cl-c8df5d62"><span class="cl-c8dcf5b8">385 022</span></p></td><td class="cl-c8df6c12"><p class="cl-c8df5d62"><span class="cl-c8dcf5b8">539 198</span></p></td><td class="cl-c8df6c12"><p class="cl-c8df5d62"><span class="cl-c8dcf5b8">618 563</span></p></td><td class="cl-c8df6c12"><p class="cl-c8df5d62"><span class="cl-c8dcf5b8">461 189</span></p></td><td class="cl-c8df6c12"><p class="cl-c8df5d62"><span class="cl-c8dcf5b8">529 231</span></p></td><td class="cl-c8df6c12"><p class="cl-c8df5d62"><span class="cl-c8dcf5b8">336 221</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-c8df6c13"><p class="cl-c8df5d62"><span class="cl-c8dcf5b8">Round sardinella-Sardinella aurita</span></p></td><td class="cl-c8df6c14"><p class="cl-c8df5d62"><span class="cl-c8dcf5b8">42 344</span></p></td><td class="cl-c8df6c14"><p class="cl-c8df5d62"><span class="cl-c8dcf5b8">46 299</span></p></td><td class="cl-c8df6c14"><p class="cl-c8df5d62"><span class="cl-c8dcf5b8">50 698</span></p></td><td class="cl-c8df6c14"><p class="cl-c8df5d62"><span class="cl-c8dcf5b8">79 851</span></p></td><td class="cl-c8df6c14"><p class="cl-c8df5d62"><span class="cl-c8dcf5b8">123 377</span></p></td><td class="cl-c8df6c14"><p class="cl-c8df5d62"><span class="cl-c8dcf5b8">126 766</span></p></td><td class="cl-c8df6c14"><p class="cl-c8df5d62"><span class="cl-c8dcf5b8">126 400</span></p></td><td class="cl-c8df6c14"><p class="cl-c8df5d62"><span class="cl-c8dcf5b8">126 400</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-c8df6c1c"><p class="cl-c8df5d62"><span class="cl-c8dcf5b8">American cupped oyster-Crassostrea virginica</span></p></td><td class="cl-c8df6c1d"><p class="cl-c8df5d62"><span class="cl-c8dcf5b8">77 900</span></p></td><td class="cl-c8df6c1d"><p class="cl-c8df5d62"><span class="cl-c8dcf5b8">53 866</span></p></td><td class="cl-c8df6c1d"><p class="cl-c8df5d62"><span class="cl-c8dcf5b8">57 930</span></p></td><td class="cl-c8df6c1d"><p class="cl-c8df5d62"><span class="cl-c8dcf5b8">55 041</span></p></td><td class="cl-c8df6c1d"><p class="cl-c8df5d62"><span class="cl-c8dcf5b8">44 313</span></p></td><td class="cl-c8df6c1d"><p class="cl-c8df5d62"><span class="cl-c8dcf5b8">78 961</span></p></td><td class="cl-c8df6c1d"><p class="cl-c8df5d62"><span class="cl-c8dcf5b8">49 631</span></p></td><td class="cl-c8df6c1d"><p class="cl-c8df5d62"><span class="cl-c8dcf5b8">47 723</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-c8df6c1e"><p class="cl-c8df5d62"><span class="cl-c8dcf5b8">Ark clams nei-Arca spp</span></p></td><td class="cl-c8df6c26"><p class="cl-c8df5d62"><span class="cl-c8dcf5b8">12 687</span></p></td><td class="cl-c8df6c26"><p class="cl-c8df5d62"><span class="cl-c8dcf5b8">15 000</span></p></td><td class="cl-c8df6c26"><p class="cl-c8df5d62"><span class="cl-c8dcf5b8">17 384</span></p></td><td class="cl-c8df6c26"><p class="cl-c8df5d62"><span class="cl-c8dcf5b8">29 073</span></p></td><td class="cl-c8df6c26"><p class="cl-c8df5d62"><span class="cl-c8dcf5b8">29 076</span></p></td><td class="cl-c8df6c26"><p class="cl-c8df5d62"><span class="cl-c8dcf5b8">29 970</span></p></td><td class="cl-c8df6c26"><p class="cl-c8df5d62"><span class="cl-c8dcf5b8">29 970</span></p></td><td class="cl-c8df6c26"><p class="cl-c8df5d62"><span class="cl-c8dcf5b8">29 970</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-c8df6c0a"><p class="cl-c8df5d62"><span class="cl-c8dcf5b8">Stromboid conchs nei-Strombus spp</span></p></td><td class="cl-c8df6c12"><p class="cl-c8df5d62"><span class="cl-c8dcf5b8">36 855</span></p></td><td class="cl-c8df6c12"><p class="cl-c8df5d62"><span class="cl-c8dcf5b8">36 610</span></p></td><td class="cl-c8df6c12"><p class="cl-c8df5d62"><span class="cl-c8dcf5b8">30 691</span></p></td><td class="cl-c8df6c12"><p class="cl-c8df5d62"><span class="cl-c8dcf5b8">34 388</span></p></td><td class="cl-c8df6c12"><p class="cl-c8df5d62"><span class="cl-c8dcf5b8">28 774</span></p></td><td class="cl-c8df6c12"><p class="cl-c8df5d62"><span class="cl-c8dcf5b8">35 273</span></p></td><td class="cl-c8df6c12"><p class="cl-c8df5d62"><span class="cl-c8dcf5b8">34 856</span></p></td><td class="cl-c8df6c12"><p class="cl-c8df5d62"><span class="cl-c8dcf5b8">28 308</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-c8df6c0a"><p class="cl-c8df5d62"><span class="cl-c8dcf5b8">Blue crab-Callinectes sapidus</span></p></td><td class="cl-c8df6c12"><p class="cl-c8df5d62"><span class="cl-c8dcf5b8">43 997</span></p></td><td class="cl-c8df6c12"><p class="cl-c8df5d62"><span class="cl-c8dcf5b8">40 570</span></p></td><td class="cl-c8df6c12"><p class="cl-c8df5d62"><span class="cl-c8dcf5b8">44 361</span></p></td><td class="cl-c8df6c12"><p class="cl-c8df5d62"><span class="cl-c8dcf5b8">50 781</span></p></td><td class="cl-c8df6c12"><p class="cl-c8df5d62"><span class="cl-c8dcf5b8">53 616</span></p></td><td class="cl-c8df6c12"><p class="cl-c8df5d62"><span class="cl-c8dcf5b8">54 628</span></p></td><td class="cl-c8df6c12"><p class="cl-c8df5d62"><span class="cl-c8dcf5b8">56 689</span></p></td><td class="cl-c8df6c12"><p class="cl-c8df5d62"><span class="cl-c8dcf5b8">25 937</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-c8df6c27"><p class="cl-c8df5d62"><span class="cl-c8dcf5b8">Yellowfin tuna-Thunnus albacares</span></p></td><td class="cl-c8df6c28"><p class="cl-c8df5d62"><span class="cl-c8dcf5b8">19 087</span></p></td><td class="cl-c8df6c28"><p class="cl-c8df5d62"><span class="cl-c8dcf5b8">21 865</span></p></td><td class="cl-c8df6c28"><p class="cl-c8df5d62"><span class="cl-c8dcf5b8">25 831</span></p></td><td class="cl-c8df6c28"><p class="cl-c8df5d62"><span class="cl-c8dcf5b8">27 036</span></p></td><td class="cl-c8df6c28"><p class="cl-c8df5d62"><span class="cl-c8dcf5b8">34487</span></p></td><td class="cl-c8df6c28"><p class="cl-c8df5d62"><span class="cl-c8dcf5b8">29 310</span></p></td><td class="cl-c8df6c28"><p class="cl-c8df5d62"><span class="cl-c8dcf5b8">30 966</span></p></td><td class="cl-c8df6c28"><p class="cl-c8df5d62"><span class="cl-c8dcf5b8">24 503</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-c8df6c1c"><p class="cl-c8df5d62"><span class="cl-c8dcf5b8">Caribbean spiny lobster-Panulirus argus</span></p></td><td class="cl-c8df6c1d"><p class="cl-c8df5d62"><span class="cl-c8dcf5b8">31 102</span></p></td><td class="cl-c8df6c1d"><p class="cl-c8df5d62"><span class="cl-c8dcf5b8">28 468</span></p></td><td class="cl-c8df6c1d"><p class="cl-c8df5d62"><span class="cl-c8dcf5b8">28 298</span></p></td><td class="cl-c8df6c1d"><p class="cl-c8df5d62"><span class="cl-c8dcf5b8">31 358</span></p></td><td class="cl-c8df6c1d"><p class="cl-c8df5d62"><span class="cl-c8dcf5b8">32 410</span></p></td><td class="cl-c8df6c1d"><p class="cl-c8df5d62"><span class="cl-c8dcf5b8">30 204</span></p></td><td class="cl-c8df6c1d"><p class="cl-c8df5d62"><span class="cl-c8dcf5b8">28 325</span></p></td><td class="cl-c8df6c1d"><p class="cl-c8df5d62"><span class="cl-c8dcf5b8">24 311</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-c8df6c29"><p class="cl-c8df5d62"><span class="cl-c8dcf5b8">Atlantic seabob-Xiphopenaeus kroyeri</span></p></td><td class="cl-c8df6c30"><p class="cl-c8df5d62"><span class="cl-c8dcf5b8">36 073</span></p></td><td class="cl-c8df6c30"><p class="cl-c8df5d62"><span class="cl-c8dcf5b8">34 243</span></p></td><td class="cl-c8df6c30"><p class="cl-c8df5d62"><span class="cl-c8dcf5b8">25 203</span></p></td><td class="cl-c8df6c30"><p class="cl-c8df5d62"><span class="cl-c8dcf5b8">25 322</span></p></td><td class="cl-c8df6c30"><p class="cl-c8df5d62"><span class="cl-c8dcf5b8">30 147</span></p></td><td class="cl-c8df6c30"><p class="cl-c8df5d62"><span class="cl-c8dcf5b8">31 319</span></p></td><td class="cl-c8df6c30"><p class="cl-c8df5d62"><span class="cl-c8dcf5b8">31 625</span></p></td><td class="cl-c8df6c30"><p class="cl-c8df5d62"><span class="cl-c8dcf5b8">22 497</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-c8df6c31"><p class="cl-c8df5d62"><span class="cl-c8dcf5b8">Mexican four-eyed octopus-Octopus maya</span></p></td><td class="cl-c8df6c32"><p class="cl-c8df5d62"><span class="cl-c8dcf5b8">12 629</span></p></td><td class="cl-c8df6c32"><p class="cl-c8df5d62"><span class="cl-c8dcf5b8">8 806</span></p></td><td class="cl-c8df6c32"><p class="cl-c8df5d62"><span class="cl-c8dcf5b8">15 403</span></p></td><td class="cl-c8df6c32"><p class="cl-c8df5d62"><span class="cl-c8dcf5b8">23 441</span></p></td><td class="cl-c8df6c32"><p class="cl-c8df5d62"><span class="cl-c8dcf5b8">25 722</span></p></td><td class="cl-c8df6c32"><p class="cl-c8df5d62"><span class="cl-c8dcf5b8">26 020</span></p></td><td class="cl-c8df6c32"><p class="cl-c8df5d62"><span class="cl-c8dcf5b8">28809</span></p></td><td class="cl-c8df6c32"><p class="cl-c8df5d62"><span class="cl-c8dcf5b8">20 119</span></p></td></tr></tbody></table></div>
</div>
</div>
<p>The <code>capture.wide</code>object we just created is the dataframe but is in wide format. To change from wide to long format data table, we use the <code>pivot_longer</code> function. The first argument specified in <code>pivot_longer</code> is <code>cols = 2:9</code> are index value of the variable in column 2 to colum 9 of the dataset we want to stack, <code>names_to = "year"</code> argument specify that the stacked variables will all be under a new variable name called <code>year</code> and the values in the stacked variables will all be under one variable called <code>catch</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1"></a>capture.long <span class="ot">=</span> capture.wide <span class="sc">%&gt;%</span> </span>
<span id="cb21-2"><a href="#cb21-2"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="dv">2</span><span class="sc">:</span><span class="dv">9</span>, <span class="at">names_to =</span> <span class="st">"year"</span>, <span class="at">values_to =</span> <span class="st">"catch"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1"></a>capture.long <span class="sc">%&gt;%</span> </span>
<span id="cb22-2"><a href="#cb22-2"></a>  FSA<span class="sc">::</span><span class="fu">headtail</span>(<span class="at">n =</span> <span class="dv">4</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb22-3"><a href="#cb22-3"></a>  gt<span class="sc">::</span><span class="fu">gt</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div id="tbl-long2" class="cell quarto-float anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-long2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;3: Data values arranged in tidy wide format
</figcaption>
<div aria-describedby="tbl-long2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output-display">
<div>
<div id="etnvyzesyy" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#etnvyzesyy table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#etnvyzesyy thead, #etnvyzesyy tbody, #etnvyzesyy tfoot, #etnvyzesyy tr, #etnvyzesyy td, #etnvyzesyy th {
  border-style: none;
}

#etnvyzesyy p {
  margin: 0;
  padding: 0;
}

#etnvyzesyy .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#etnvyzesyy .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#etnvyzesyy .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#etnvyzesyy .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#etnvyzesyy .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#etnvyzesyy .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#etnvyzesyy .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#etnvyzesyy .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#etnvyzesyy .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#etnvyzesyy .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#etnvyzesyy .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#etnvyzesyy .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#etnvyzesyy .gt_spanner_row {
  border-bottom-style: hidden;
}

#etnvyzesyy .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#etnvyzesyy .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#etnvyzesyy .gt_from_md > :first-child {
  margin-top: 0;
}

#etnvyzesyy .gt_from_md > :last-child {
  margin-bottom: 0;
}

#etnvyzesyy .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#etnvyzesyy .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#etnvyzesyy .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#etnvyzesyy .gt_row_group_first td {
  border-top-width: 2px;
}

#etnvyzesyy .gt_row_group_first th {
  border-top-width: 2px;
}

#etnvyzesyy .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#etnvyzesyy .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#etnvyzesyy .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#etnvyzesyy .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#etnvyzesyy .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#etnvyzesyy .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#etnvyzesyy .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#etnvyzesyy .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#etnvyzesyy .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#etnvyzesyy .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#etnvyzesyy .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#etnvyzesyy .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#etnvyzesyy .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#etnvyzesyy .gt_left {
  text-align: left;
}

#etnvyzesyy .gt_center {
  text-align: center;
}

#etnvyzesyy .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#etnvyzesyy .gt_font_normal {
  font-weight: normal;
}

#etnvyzesyy .gt_font_bold {
  font-weight: bold;
}

#etnvyzesyy .gt_font_italic {
  font-style: italic;
}

#etnvyzesyy .gt_super {
  font-size: 65%;
}

#etnvyzesyy .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#etnvyzesyy .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#etnvyzesyy .gt_indent_1 {
  text-indent: 5px;
}

#etnvyzesyy .gt_indent_2 {
  text-indent: 10px;
}

#etnvyzesyy .gt_indent_3 {
  text-indent: 15px;
}

#etnvyzesyy .gt_indent_4 {
  text-indent: 20px;
}

#etnvyzesyy .gt_indent_5 {
  text-indent: 25px;
}
</style>

<table class="gt_table do-not-create-environment cell table table-sm table-striped small" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead>
<tr class="header gt_col_headings">
<th id="ASFIS species" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">ASFIS species</th>
<th id="year" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">year</th>
<th id="catch" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">catch</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="odd">
<td class="gt_row gt_left" headers="ASFIS species">Marine fishes nei-Osteichthyes</td>
<td class="gt_row gt_right" headers="year">2012</td>
<td class="gt_row gt_right" headers="catch">137 683</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="ASFIS species">Marine fishes nei-Osteichthyes</td>
<td class="gt_row gt_right" headers="year">2013</td>
<td class="gt_row gt_right" headers="catch">112 095</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="ASFIS species">Marine fishes nei-Osteichthyes</td>
<td class="gt_row gt_right" headers="year">2014</td>
<td class="gt_row gt_right" headers="catch">110 535</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="ASFIS species">Marine fishes nei-Osteichthyes</td>
<td class="gt_row gt_right" headers="year">2015</td>
<td class="gt_row gt_right" headers="catch">118 078</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="ASFIS species">Mexican four-eyed octopus-Octopus maya</td>
<td class="gt_row gt_right" headers="year">2016</td>
<td class="gt_row gt_right" headers="catch">25 722</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="ASFIS species">Mexican four-eyed octopus-Octopus maya</td>
<td class="gt_row gt_right" headers="year">2017</td>
<td class="gt_row gt_right" headers="catch">26 020</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="ASFIS species">Mexican four-eyed octopus-Octopus maya</td>
<td class="gt_row gt_right" headers="year">2018</td>
<td class="gt_row gt_right" headers="catch">28809</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="ASFIS species">Mexican four-eyed octopus-Octopus maya</td>
<td class="gt_row gt_right" headers="year">2019</td>
<td class="gt_row gt_right" headers="catch">20 119</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</div>
</figure>
</div>
</div>
<p>The <code>pivot_wider()</code> function is used to convert from a <code>long</code> format data frame to a <code>wide</code> format data frame. The first argument is <code>names_from = year</code> is the variable of the data frame for which we want spread across and the second argument <code>values_from = catch</code> is the corresponding values will reside in each casted variable.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1"></a>capture.wide <span class="ot">=</span> capture.long <span class="sc">%&gt;%</span> </span>
<span id="cb23-2"><a href="#cb23-2"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> year, <span class="at">values_from =</span> catch)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div id="tbl-long" class="cell quarto-float anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-long-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;4: Data values arranged in tidy wide format
</figcaption>
<div aria-describedby="tbl-long-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output-display">
<div class="tabwid"><style>.cl-c910348c{}.cl-c90a2902{font-family:'Arial';font-size:11pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-c90c561e{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-c90c63ca{width:3.41in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c90c63cb{width:0.837in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c90c63d4{width:3.41in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c90c63d5{width:0.837in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c90c63d6{width:3.41in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c90c63d7{width:0.837in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c90c63de{width:3.41in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c90c63df{width:0.837in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c90c63e0{width:3.41in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c90c63e1{width:0.837in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c90c63e2{width:3.41in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c90c63e8{width:0.837in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c90c63e9{width:3.41in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c90c63ea{width:0.837in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c90c63f2{width:3.41in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c90c63f3{width:0.837in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c90c63f4{width:3.41in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c90c63f5{width:0.837in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table data-quarto-disable-processing="true" class="cl-c910348c"><thead><tr style="overflow-wrap:break-word;"><th class="cl-c90c63ca"><p class="cl-c90c561e"><span class="cl-c90a2902">ASFIS species</span></p></th><th class="cl-c90c63cb"><p class="cl-c90c561e"><span class="cl-c90a2902">2012</span></p></th><th class="cl-c90c63cb"><p class="cl-c90c561e"><span class="cl-c90a2902">2013</span></p></th><th class="cl-c90c63cb"><p class="cl-c90c561e"><span class="cl-c90a2902">2014</span></p></th><th class="cl-c90c63cb"><p class="cl-c90c561e"><span class="cl-c90a2902">2015</span></p></th><th class="cl-c90c63cb"><p class="cl-c90c561e"><span class="cl-c90a2902">2016</span></p></th><th class="cl-c90c63cb"><p class="cl-c90c561e"><span class="cl-c90a2902">2017</span></p></th><th class="cl-c90c63cb"><p class="cl-c90c561e"><span class="cl-c90a2902">2018</span></p></th><th class="cl-c90c63cb"><p class="cl-c90c561e"><span class="cl-c90a2902">2019</span></p></th></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-c90c63d4"><p class="cl-c90c561e"><span class="cl-c90a2902">Marine fishes nei-Osteichthyes</span></p></td><td class="cl-c90c63d5"><p class="cl-c90c561e"><span class="cl-c90a2902">137 683</span></p></td><td class="cl-c90c63d5"><p class="cl-c90c561e"><span class="cl-c90a2902">112 095</span></p></td><td class="cl-c90c63d5"><p class="cl-c90c561e"><span class="cl-c90a2902">110 535</span></p></td><td class="cl-c90c63d5"><p class="cl-c90c561e"><span class="cl-c90a2902">118 078</span></p></td><td class="cl-c90c63d5"><p class="cl-c90c561e"><span class="cl-c90a2902">118 204</span></p></td><td class="cl-c90c63d5"><p class="cl-c90c561e"><span class="cl-c90a2902">124 895</span></p></td><td class="cl-c90c63d5"><p class="cl-c90c561e"><span class="cl-c90a2902">109 938</span></p></td><td class="cl-c90c63d5"><p class="cl-c90c561e"><span class="cl-c90a2902">415 031</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-c90c63d6"><p class="cl-c90c561e"><span class="cl-c90a2902">Gulf menhaden-Brevoortia patronus</span></p></td><td class="cl-c90c63d7"><p class="cl-c90c561e"><span class="cl-c90a2902">500 162</span></p></td><td class="cl-c90c63d7"><p class="cl-c90c561e"><span class="cl-c90a2902">440 709</span></p></td><td class="cl-c90c63d7"><p class="cl-c90c561e"><span class="cl-c90a2902">385 022</span></p></td><td class="cl-c90c63d7"><p class="cl-c90c561e"><span class="cl-c90a2902">539 198</span></p></td><td class="cl-c90c63d7"><p class="cl-c90c561e"><span class="cl-c90a2902">618 563</span></p></td><td class="cl-c90c63d7"><p class="cl-c90c561e"><span class="cl-c90a2902">461 189</span></p></td><td class="cl-c90c63d7"><p class="cl-c90c561e"><span class="cl-c90a2902">529 231</span></p></td><td class="cl-c90c63d7"><p class="cl-c90c561e"><span class="cl-c90a2902">336 221</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-c90c63de"><p class="cl-c90c561e"><span class="cl-c90a2902">Round sardinella-Sardinella aurita</span></p></td><td class="cl-c90c63df"><p class="cl-c90c561e"><span class="cl-c90a2902">42 344</span></p></td><td class="cl-c90c63df"><p class="cl-c90c561e"><span class="cl-c90a2902">46 299</span></p></td><td class="cl-c90c63df"><p class="cl-c90c561e"><span class="cl-c90a2902">50 698</span></p></td><td class="cl-c90c63df"><p class="cl-c90c561e"><span class="cl-c90a2902">79 851</span></p></td><td class="cl-c90c63df"><p class="cl-c90c561e"><span class="cl-c90a2902">123 377</span></p></td><td class="cl-c90c63df"><p class="cl-c90c561e"><span class="cl-c90a2902">126 766</span></p></td><td class="cl-c90c63df"><p class="cl-c90c561e"><span class="cl-c90a2902">126 400</span></p></td><td class="cl-c90c63df"><p class="cl-c90c561e"><span class="cl-c90a2902">126 400</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-c90c63e0"><p class="cl-c90c561e"><span class="cl-c90a2902">American cupped oyster-Crassostrea virginica</span></p></td><td class="cl-c90c63e1"><p class="cl-c90c561e"><span class="cl-c90a2902">77 900</span></p></td><td class="cl-c90c63e1"><p class="cl-c90c561e"><span class="cl-c90a2902">53 866</span></p></td><td class="cl-c90c63e1"><p class="cl-c90c561e"><span class="cl-c90a2902">57 930</span></p></td><td class="cl-c90c63e1"><p class="cl-c90c561e"><span class="cl-c90a2902">55 041</span></p></td><td class="cl-c90c63e1"><p class="cl-c90c561e"><span class="cl-c90a2902">44 313</span></p></td><td class="cl-c90c63e1"><p class="cl-c90c561e"><span class="cl-c90a2902">78 961</span></p></td><td class="cl-c90c63e1"><p class="cl-c90c561e"><span class="cl-c90a2902">49 631</span></p></td><td class="cl-c90c63e1"><p class="cl-c90c561e"><span class="cl-c90a2902">47 723</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-c90c63e2"><p class="cl-c90c561e"><span class="cl-c90a2902">Ark clams nei-Arca spp</span></p></td><td class="cl-c90c63e8"><p class="cl-c90c561e"><span class="cl-c90a2902">12 687</span></p></td><td class="cl-c90c63e8"><p class="cl-c90c561e"><span class="cl-c90a2902">15 000</span></p></td><td class="cl-c90c63e8"><p class="cl-c90c561e"><span class="cl-c90a2902">17 384</span></p></td><td class="cl-c90c63e8"><p class="cl-c90c561e"><span class="cl-c90a2902">29 073</span></p></td><td class="cl-c90c63e8"><p class="cl-c90c561e"><span class="cl-c90a2902">29 076</span></p></td><td class="cl-c90c63e8"><p class="cl-c90c561e"><span class="cl-c90a2902">29 970</span></p></td><td class="cl-c90c63e8"><p class="cl-c90c561e"><span class="cl-c90a2902">29 970</span></p></td><td class="cl-c90c63e8"><p class="cl-c90c561e"><span class="cl-c90a2902">29 970</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-c90c63d6"><p class="cl-c90c561e"><span class="cl-c90a2902">Stromboid conchs nei-Strombus spp</span></p></td><td class="cl-c90c63d7"><p class="cl-c90c561e"><span class="cl-c90a2902">36 855</span></p></td><td class="cl-c90c63d7"><p class="cl-c90c561e"><span class="cl-c90a2902">36 610</span></p></td><td class="cl-c90c63d7"><p class="cl-c90c561e"><span class="cl-c90a2902">30 691</span></p></td><td class="cl-c90c63d7"><p class="cl-c90c561e"><span class="cl-c90a2902">34 388</span></p></td><td class="cl-c90c63d7"><p class="cl-c90c561e"><span class="cl-c90a2902">28 774</span></p></td><td class="cl-c90c63d7"><p class="cl-c90c561e"><span class="cl-c90a2902">35 273</span></p></td><td class="cl-c90c63d7"><p class="cl-c90c561e"><span class="cl-c90a2902">34 856</span></p></td><td class="cl-c90c63d7"><p class="cl-c90c561e"><span class="cl-c90a2902">28 308</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-c90c63d6"><p class="cl-c90c561e"><span class="cl-c90a2902">Blue crab-Callinectes sapidus</span></p></td><td class="cl-c90c63d7"><p class="cl-c90c561e"><span class="cl-c90a2902">43 997</span></p></td><td class="cl-c90c63d7"><p class="cl-c90c561e"><span class="cl-c90a2902">40 570</span></p></td><td class="cl-c90c63d7"><p class="cl-c90c561e"><span class="cl-c90a2902">44 361</span></p></td><td class="cl-c90c63d7"><p class="cl-c90c561e"><span class="cl-c90a2902">50 781</span></p></td><td class="cl-c90c63d7"><p class="cl-c90c561e"><span class="cl-c90a2902">53 616</span></p></td><td class="cl-c90c63d7"><p class="cl-c90c561e"><span class="cl-c90a2902">54 628</span></p></td><td class="cl-c90c63d7"><p class="cl-c90c561e"><span class="cl-c90a2902">56 689</span></p></td><td class="cl-c90c63d7"><p class="cl-c90c561e"><span class="cl-c90a2902">25 937</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-c90c63e9"><p class="cl-c90c561e"><span class="cl-c90a2902">Yellowfin tuna-Thunnus albacares</span></p></td><td class="cl-c90c63ea"><p class="cl-c90c561e"><span class="cl-c90a2902">19 087</span></p></td><td class="cl-c90c63ea"><p class="cl-c90c561e"><span class="cl-c90a2902">21 865</span></p></td><td class="cl-c90c63ea"><p class="cl-c90c561e"><span class="cl-c90a2902">25 831</span></p></td><td class="cl-c90c63ea"><p class="cl-c90c561e"><span class="cl-c90a2902">27 036</span></p></td><td class="cl-c90c63ea"><p class="cl-c90c561e"><span class="cl-c90a2902">34487</span></p></td><td class="cl-c90c63ea"><p class="cl-c90c561e"><span class="cl-c90a2902">29 310</span></p></td><td class="cl-c90c63ea"><p class="cl-c90c561e"><span class="cl-c90a2902">30 966</span></p></td><td class="cl-c90c63ea"><p class="cl-c90c561e"><span class="cl-c90a2902">24 503</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-c90c63e0"><p class="cl-c90c561e"><span class="cl-c90a2902">Caribbean spiny lobster-Panulirus argus</span></p></td><td class="cl-c90c63e1"><p class="cl-c90c561e"><span class="cl-c90a2902">31 102</span></p></td><td class="cl-c90c63e1"><p class="cl-c90c561e"><span class="cl-c90a2902">28 468</span></p></td><td class="cl-c90c63e1"><p class="cl-c90c561e"><span class="cl-c90a2902">28 298</span></p></td><td class="cl-c90c63e1"><p class="cl-c90c561e"><span class="cl-c90a2902">31 358</span></p></td><td class="cl-c90c63e1"><p class="cl-c90c561e"><span class="cl-c90a2902">32 410</span></p></td><td class="cl-c90c63e1"><p class="cl-c90c561e"><span class="cl-c90a2902">30 204</span></p></td><td class="cl-c90c63e1"><p class="cl-c90c561e"><span class="cl-c90a2902">28 325</span></p></td><td class="cl-c90c63e1"><p class="cl-c90c561e"><span class="cl-c90a2902">24 311</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-c90c63f2"><p class="cl-c90c561e"><span class="cl-c90a2902">Atlantic seabob-Xiphopenaeus kroyeri</span></p></td><td class="cl-c90c63f3"><p class="cl-c90c561e"><span class="cl-c90a2902">36 073</span></p></td><td class="cl-c90c63f3"><p class="cl-c90c561e"><span class="cl-c90a2902">34 243</span></p></td><td class="cl-c90c63f3"><p class="cl-c90c561e"><span class="cl-c90a2902">25 203</span></p></td><td class="cl-c90c63f3"><p class="cl-c90c561e"><span class="cl-c90a2902">25 322</span></p></td><td class="cl-c90c63f3"><p class="cl-c90c561e"><span class="cl-c90a2902">30 147</span></p></td><td class="cl-c90c63f3"><p class="cl-c90c561e"><span class="cl-c90a2902">31 319</span></p></td><td class="cl-c90c63f3"><p class="cl-c90c561e"><span class="cl-c90a2902">31 625</span></p></td><td class="cl-c90c63f3"><p class="cl-c90c561e"><span class="cl-c90a2902">22 497</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-c90c63f4"><p class="cl-c90c561e"><span class="cl-c90a2902">Mexican four-eyed octopus-Octopus maya</span></p></td><td class="cl-c90c63f5"><p class="cl-c90c561e"><span class="cl-c90a2902">12 629</span></p></td><td class="cl-c90c63f5"><p class="cl-c90c561e"><span class="cl-c90a2902">8 806</span></p></td><td class="cl-c90c63f5"><p class="cl-c90c561e"><span class="cl-c90a2902">15 403</span></p></td><td class="cl-c90c63f5"><p class="cl-c90c561e"><span class="cl-c90a2902">23 441</span></p></td><td class="cl-c90c63f5"><p class="cl-c90c561e"><span class="cl-c90a2902">25 722</span></p></td><td class="cl-c90c63f5"><p class="cl-c90c561e"><span class="cl-c90a2902">26 020</span></p></td><td class="cl-c90c63f5"><p class="cl-c90c561e"><span class="cl-c90a2902">28809</span></p></td><td class="cl-c90c63f5"><p class="cl-c90c561e"><span class="cl-c90a2902">20 119</span></p></td></tr></tbody></table></div>
</div>
</div>
</figure>
</div>
</div>
</section>
<section id="saving-transformed-data" class="level3" data-number="2.3">
<h3 data-number="2.3" class="anchored" data-anchor-id="saving-transformed-data"><span class="header-section-number">2.3</span> Saving transformed data</h3>
<p>Once you have transformed your data and edited variables, you may want to save your new dataframe as an external data file that your collaborators or other researchers can use. As with reading in data, for saving out data you will need the foreign package. Similarly, you can choose from a number of different data formats to export to as well. Most commonly you will want to save out data as a <code>.csv</code> or a tab-delited text file.</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1"></a>myfile <span class="sc">%&gt;%</span> <span class="fu">write_csv</span>(<span class="st">"my.directory/file_name.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
</section>
<section id="transforming-summarising-and-analysing-data" class="level2" data-number="3">
<h2 data-number="3" class="anchored" data-anchor-id="transforming-summarising-and-analysing-data"><span class="header-section-number">3</span> Transforming, summarising, and analysing data</h2>
<p>The R universe basically builds upon two (seemingly contradictive) approaches: base R and the tidyverse. While these two approaches are often seen as two different philosophies, they can form a symbiosis. We therefore recommend to pick whichever works best for you – or to combine the two.Whereas base R is already implemented in R, using the tidyverse requires users to load new packages. People often find base R unintuitive and hard to read. This is why Hadley Wickham developed and introduced the tidyverse – a more intuitive approach to managing and wrangling data [<span class="citation" data-cites="tidyverse">Wickham et al. (<a href="#ref-tidyverse" role="doc-biblioref">2019</a>)</span>.</p>
<p>Code written before 2014 was usually written in base R whereas the tidyverse style is becoming increasingly widespread. Again, which approach you prefer is rather a matter of personal taste than a decision between “right or wrong”. We first familiarize ourselves with the basic logic of the tidyverse style using some examples. For this, we use <code>LFQ_sample_1.xls</code>. since is an Excel format, lets import it in our session;</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1"></a>lfq.sample1 <span class="ot">=</span> readxl<span class="sc">::</span><span class="fu">read_excel</span>(<span class="st">"../data/LFQ_sample_1.xls"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Let’s print the assigned lfq.sample1</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1"></a>lfq.sample1 <span class="sc">|&gt;</span> </span>
<span id="cb26-2"><a href="#cb26-2"></a>  FSA<span class="sc">::</span><span class="fu">headtail</span>() <span class="sc">|&gt;</span> </span>
<span id="cb26-3"><a href="#cb26-3"></a>  flextable<span class="sc">::</span><span class="fu">flextable</span>() <span class="sc">|&gt;</span> </span>
<span id="cb26-4"><a href="#cb26-4"></a>  flextable<span class="sc">::</span><span class="fu">autofit</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="tabwid"><style>.cl-c929b3d0{}.cl-c9235c4c{font-family:'Arial';font-size:11pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-c925ee3a{margin:0;text-align:right;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-c925ee44{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-c925fbf0{width:1.704in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c925fbfa{width:1.678in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c925fbfb{width:0.93in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c925fbfc{width:1.007in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c925fbfd{width:0.956in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c925fc04{width:1.152in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c925fc05{width:1.704in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c925fc06{width:1.678in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c925fc07{width:0.93in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c925fc08{width:1.007in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c925fc0e{width:0.956in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c925fc0f{width:1.152in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c925fc10{width:1.704in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c925fc11{width:1.678in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c925fc12{width:0.93in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c925fc18{width:1.007in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c925fc19{width:0.956in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c925fc1a{width:1.152in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table data-quarto-disable-processing="true" class="cl-c929b3d0"><thead><tr style="overflow-wrap:break-word;"><th class="cl-c925fbf0"><p class="cl-c925ee3a"><span class="cl-c9235c4c">Date</span></p></th><th class="cl-c925fbfa"><p class="cl-c925ee44"><span class="cl-c9235c4c">Species</span></p></th><th class="cl-c925fbfb"><p class="cl-c925ee3a"><span class="cl-c9235c4c">Size (cm)</span></p></th><th class="cl-c925fbfc"><p class="cl-c925ee3a"><span class="cl-c9235c4c">Size Class</span></p></th><th class="cl-c925fbfd"><p class="cl-c925ee44"><span class="cl-c9235c4c">Gear type</span></p></th><th class="cl-c925fc04"><p class="cl-c925ee44"><span class="cl-c9235c4c">Landing_site</span></p></th></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-c925fc05"><p class="cl-c925ee3a"><span class="cl-c9235c4c">2019-05-30 00:00:00</span></p></td><td class="cl-c925fc06"><p class="cl-c925ee44"><span class="cl-c9235c4c">Siganus sutor</span></p></td><td class="cl-c925fc07"><p class="cl-c925ee3a"><span class="cl-c9235c4c">16.5</span></p></td><td class="cl-c925fc08"><p class="cl-c925ee3a"><span class="cl-c9235c4c">18</span></p></td><td class="cl-c925fc0e"><p class="cl-c925ee44"><span class="cl-c9235c4c">Speargun</span></p></td><td class="cl-c925fc0f"><p class="cl-c925ee44"><span class="cl-c9235c4c">Pwani</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-c925fc05"><p class="cl-c925ee3a"><span class="cl-c9235c4c">2019-05-30 00:00:00</span></p></td><td class="cl-c925fc06"><p class="cl-c925ee44"><span class="cl-c9235c4c">Siganus sutor</span></p></td><td class="cl-c925fc07"><p class="cl-c925ee3a"><span class="cl-c9235c4c">12.0</span></p></td><td class="cl-c925fc08"><p class="cl-c925ee3a"><span class="cl-c9235c4c">12</span></p></td><td class="cl-c925fc0e"><p class="cl-c925ee44"><span class="cl-c9235c4c">Speargun</span></p></td><td class="cl-c925fc0f"><p class="cl-c925ee44"><span class="cl-c9235c4c">Pwani</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-c925fc05"><p class="cl-c925ee3a"><span class="cl-c9235c4c">2019-05-30 00:00:00</span></p></td><td class="cl-c925fc06"><p class="cl-c925ee44"><span class="cl-c9235c4c">Siganus sutor</span></p></td><td class="cl-c925fc07"><p class="cl-c925ee3a"><span class="cl-c9235c4c">15.0</span></p></td><td class="cl-c925fc08"><p class="cl-c925ee3a"><span class="cl-c9235c4c">15</span></p></td><td class="cl-c925fc0e"><p class="cl-c925ee44"><span class="cl-c9235c4c">Speargun</span></p></td><td class="cl-c925fc0f"><p class="cl-c925ee44"><span class="cl-c9235c4c">Pwani</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-c925fc05"><p class="cl-c925ee3a"><span class="cl-c9235c4c">2020-07-25 00:00:00</span></p></td><td class="cl-c925fc06"><p class="cl-c925ee44"><span class="cl-c9235c4c">Lutjanus fulviflamma</span></p></td><td class="cl-c925fc07"><p class="cl-c925ee3a"><span class="cl-c9235c4c">13.0</span></p></td><td class="cl-c925fc08"><p class="cl-c925ee3a"><span class="cl-c9235c4c">15</span></p></td><td class="cl-c925fc0e"><p class="cl-c925ee44"><span class="cl-c9235c4c">Speargun</span></p></td><td class="cl-c925fc0f"><p class="cl-c925ee44"><span class="cl-c9235c4c">Bahari</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-c925fc05"><p class="cl-c925ee3a"><span class="cl-c9235c4c">2020-07-25 00:00:00</span></p></td><td class="cl-c925fc06"><p class="cl-c925ee44"><span class="cl-c9235c4c">Lutjanus fulviflamma</span></p></td><td class="cl-c925fc07"><p class="cl-c925ee3a"><span class="cl-c9235c4c">17.0</span></p></td><td class="cl-c925fc08"><p class="cl-c925ee3a"><span class="cl-c9235c4c">18</span></p></td><td class="cl-c925fc0e"><p class="cl-c925ee44"><span class="cl-c9235c4c">Speargun</span></p></td><td class="cl-c925fc0f"><p class="cl-c925ee44"><span class="cl-c9235c4c">Bahari</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-c925fc10"><p class="cl-c925ee3a"><span class="cl-c9235c4c">2020-07-25 00:00:00</span></p></td><td class="cl-c925fc11"><p class="cl-c925ee44"><span class="cl-c9235c4c">Lutjanus fulviflamma</span></p></td><td class="cl-c925fc12"><p class="cl-c925ee3a"><span class="cl-c9235c4c">18.5</span></p></td><td class="cl-c925fc18"><p class="cl-c925ee3a"><span class="cl-c9235c4c">21</span></p></td><td class="cl-c925fc19"><p class="cl-c925ee44"><span class="cl-c9235c4c">Speargun</span></p></td><td class="cl-c925fc1a"><p class="cl-c925ee44"><span class="cl-c9235c4c">Bahari</span></p></td></tr></tbody></table></div>
</div>
</div>
<p>As you can see from the output generated in your console, the <code>lfq.sample1</code> data frame object contains length information of several species. The fisheries data collected in this dataset ensured that each record on a separate row and each column represents a variable. The dataset contains six variables (columns) and 779 records (rows). These variables includes;</p>
<ul>
<li><code>Date</code> a sample was collected. The date is in the <code>YYYY-MM-DD</code>, which is the format that accepted</li>
<li><code>Species</code> the scientific name of the species</li>
<li><code>Size (cm)</code> the length of the fish species measured in centimeter</li>
<li><code>Size Class</code> of the individual</li>
<li><code>Gear type</code> used to catch the recorded fish, and</li>
<li><code>Landing-site</code> a landing station where the fish was recorded</li>
</ul>
<p>This dataset is arranged in appropriate format. The data was entered in spreadsheet with a few basics. These correspond to: what, where, when it only miss who collect the data or the originator of this dataset. The way this dataset is organized is the classical example of how set out our data in a similar fashion. This makes manipulating the data more straightforward and also maintains the multi-purpose nature of the analysis work. Having your data organized is really important!</p>
<div class="callout callout-style-default callout-warning callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Warning
</div>
</div>
<div class="callout-body-container callout-body">
<p>Though the size and unit of the dataaset is provide, but it does not tell us much because we do not know whether the measurement is total length (TL), standard length (SL) or fork length (FL). It is imperative to specify in the dataset variable names what was measured and the unit</p>
</div>
</div>
<section id="renaming-variables" class="level3" data-number="3.1">
<h3 data-number="3.1" class="anchored" data-anchor-id="renaming-variables"><span class="header-section-number">3.1</span> Renaming variables</h3>
<p>Looking <code>lfq.sample1</code> dataset presented in <strong>?@tbl-case1</strong>, we notice that variable names do not adhere to standard variable names. The tidyverse style guide recommends snake case (words separated by underscores tl_cm) for object and column names. Let’s look back at our column names for a minute. Using the <code>names()</code> function from the and pipe operator <code>%&gt;%</code> from the <strong>magrittr</strong> package simultaneously serves as the first pipe in a chain of commands and print names in the dataset</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1"></a>lfq.sample1 <span class="sc">%&gt;%</span> </span>
<span id="cb27-2"><a href="#cb27-2"></a>  <span class="fu">names</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Date"         "Species"      "Size (cm)"    "Size Class"   "Gear type"   
[6] "Landing_site"</code></pre>
</div>
</div>
<p>There are all sorts of capital letters and spaces (e.g.&nbsp;“Gear type” ,” “Size Class” ) as well as symbols (“Size (cm)”). Therefore we mustl convert all of these to snake case for us. We can rename specific variables using the <code>rename</code> function from the <strong>dplyr</strong> package <span class="citation" data-cites="dplyr">(<a href="#ref-dplyr" role="doc-biblioref"><strong>dplyr?</strong></a>)</span>. Since <strong>dplyr</strong> is part of the <strong>tidyverse</strong> package <span class="citation" data-cites="tidyverse">(<a href="#ref-tidyverse" role="doc-biblioref">Wickham et al. 2019</a>)</span> that was loaded, we do not need to load it again but rather use its function to rename the variables. We’ll begin by specifying the name of our data frame object <code>lfq.sample1</code>, followed by the <code>=</code> operator so that we can overwrite the existing <code>lfq.sample1</code> frame object with one that contains the renamed variables.</p>
<p>Next type <code>lfq.sample1</code> followed by pipe operator <code>%&gt;%</code> and then call a<code>rename</code> function, where you parse the new names to their corresponding old names. As the first argument, let’s change the <code>Date</code> variable to <code>date</code> by typing the name of our new variable followed by = and, in quotation marks (” “), the name of the original variable <code>date = "Date"</code>. As the second argument, let’s apply the same process as the second argument and change the <code>Species</code> variable to <code>species</code> by typing the name of our new variable followed by = and, in quotation marks (” “), the name of the original variable <code>species = "Species"</code>. We follow the same naming procedure to the six variables as the chunk below highlight;</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1"></a>lfq.sample1 <span class="ot">=</span> lfq.sample1 <span class="sc">%&gt;%</span> </span>
<span id="cb29-2"><a href="#cb29-2"></a>  <span class="fu">rename</span>(</span>
<span id="cb29-3"><a href="#cb29-3"></a>    <span class="at">date =</span> <span class="st">"Date"</span>,</span>
<span id="cb29-4"><a href="#cb29-4"></a>    <span class="at">species =</span> <span class="st">"Species"</span>,</span>
<span id="cb29-5"><a href="#cb29-5"></a>    <span class="at">size_cm =</span> <span class="st">"Size (cm)"</span>,</span>
<span id="cb29-6"><a href="#cb29-6"></a>    <span class="at">size_class =</span> <span class="st">"Size Class"</span>,</span>
<span id="cb29-7"><a href="#cb29-7"></a>    <span class="at">gear_type =</span> <span class="st">"Gear type"</span>,</span>
<span id="cb29-8"><a href="#cb29-8"></a>    <span class="at">landing_site =</span> <span class="st">"Landing_site"</span></span>
<span id="cb29-9"><a href="#cb29-9"></a>    )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Using the head function from base R, let’s verify that we renamed the two variables successfully.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1"></a>lfq.sample1</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 779 × 6
   date                species         size_cm size_class gear_type landing_site
   &lt;dttm&gt;              &lt;chr&gt;             &lt;dbl&gt;      &lt;dbl&gt; &lt;chr&gt;     &lt;chr&gt;       
 1 2019-05-30 00:00:00 Siganus sutor      16.5         18 Speargun  Pwani       
 2 2019-05-30 00:00:00 Siganus sutor      12           12 Speargun  Pwani       
 3 2019-05-30 00:00:00 Siganus sutor      15           15 Speargun  Pwani       
 4 2019-05-30 00:00:00 Siganus sutor      33           33 Speargun  Pwani       
 5 2019-05-30 00:00:00 Siganus sutor      11.2         12 hook and… Pwani       
 6 2019-05-30 00:00:00 Siganus sutor      17           18 hook and… Pwani       
 7 2019-05-30 00:00:00 Siganus sutor      19           21 Gill net  Pwani       
 8 2019-05-30 00:00:00 Lethrinus mahs…    10           12 Traps     Pwani       
 9 2019-05-30 00:00:00 Lethrinus mahs…    11           12 Traps     Pwani       
10 2019-05-30 00:00:00 Lethrinus mahs…     9           12 Traps     Pwani       
# ℹ 769 more rows</code></pre>
</div>
</div>
<p>As you can see, the new names have no spaces and all are written in small letters. Spaces in variables names were replaced with the underscore symbol.</p>
<p>Though the rename function is great tool to rename variables in the dataset, however there are times when you a dataset has hundred of variables names to change and using <code>rename</code> function from dplyr package become tedious. Furtunate , a <strong>janitor</strong> package has a nifty <code>clean_names()</code> function that clean all the variable names with a single line of code. I highly recommend incorporating it into your workflow.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1"></a>lfq.sample1 <span class="ot">=</span> readxl<span class="sc">::</span><span class="fu">read_excel</span>(<span class="st">"../data/LFQ_sample_1.xls"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb32-2"><a href="#cb32-2"></a>  janitor<span class="sc">::</span><span class="fu">clean_names</span>()</span>
<span id="cb32-3"><a href="#cb32-3"></a></span>
<span id="cb32-4"><a href="#cb32-4"></a>lfq.sample1</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 779 × 6
   date                species         size_cm size_class gear_type landing_site
   &lt;dttm&gt;              &lt;chr&gt;             &lt;dbl&gt;      &lt;dbl&gt; &lt;chr&gt;     &lt;chr&gt;       
 1 2019-05-30 00:00:00 Siganus sutor      16.5         18 Speargun  Pwani       
 2 2019-05-30 00:00:00 Siganus sutor      12           12 Speargun  Pwani       
 3 2019-05-30 00:00:00 Siganus sutor      15           15 Speargun  Pwani       
 4 2019-05-30 00:00:00 Siganus sutor      33           33 Speargun  Pwani       
 5 2019-05-30 00:00:00 Siganus sutor      11.2         12 hook and… Pwani       
 6 2019-05-30 00:00:00 Siganus sutor      17           18 hook and… Pwani       
 7 2019-05-30 00:00:00 Siganus sutor      19           21 Gill net  Pwani       
 8 2019-05-30 00:00:00 Lethrinus mahs…    10           12 Traps     Pwani       
 9 2019-05-30 00:00:00 Lethrinus mahs…    11           12 Traps     Pwani       
10 2019-05-30 00:00:00 Lethrinus mahs…     9           12 Traps     Pwani       
# ℹ 769 more rows</code></pre>
</div>
</div>
<p>As you can see above, the <code>clean_names()</code> function handled every kind of messy variable name that was present in our <code>lfq.sample1</code> dataset. Everything now looks neat and tidy</p>
</section>
<section id="filtering-data" class="level3" data-number="3.2">
<h3 data-number="3.2" class="anchored" data-anchor-id="filtering-data"><span class="header-section-number">3.2</span> Filtering Data</h3>
<p>Our <code>lfq.sample1</code> contains six variables – date, species, size_cm, size_class, gear_type and landing_site;</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1"></a>lfq.sample1 <span class="sc">%&gt;%</span> </span>
<span id="cb34-2"><a href="#cb34-2"></a>  <span class="fu">glimpse</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 779
Columns: 6
$ date         &lt;dttm&gt; 2019-05-30, 2019-05-30, 2019-05-30, 2019-05-30, 2019-05-…
$ species      &lt;chr&gt; "Siganus sutor", "Siganus sutor", "Siganus sutor", "Sigan…
$ size_cm      &lt;dbl&gt; 16.5, 12.0, 15.0, 33.0, 11.2, 17.0, 19.0, 10.0, 11.0, 9.0…
$ size_class   &lt;dbl&gt; 18, 12, 15, 33, 12, 18, 21, 12, 12, 12, 12, 12, 12, 12, 1…
$ gear_type    &lt;chr&gt; "Speargun", "Speargun", "Speargun", "Speargun", "hook and…
$ landing_site &lt;chr&gt; "Pwani", "Pwani", "Pwani", "Pwani", "Pwani", "Pwani", "Pw…</code></pre>
</div>
</div>
<p>Suppose we are only interested in <em>Siganus sutor</em> species only from the dataset. For this purpose, we can use the <code>filter()</code> function from <strong>dplyr</strong> package <span class="citation" data-cites="dplyr">(<a href="#ref-dplyr" role="doc-biblioref"><strong>dplyr?</strong></a>)</span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1"></a>lfq.sample1 <span class="sc">%&gt;%</span> </span>
<span id="cb36-2"><a href="#cb36-2"></a>  <span class="fu">filter</span>(species <span class="sc">==</span> <span class="st">"Siganus sutor"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 196 × 6
   date                species       size_cm size_class gear_type   landing_site
   &lt;dttm&gt;              &lt;chr&gt;           &lt;dbl&gt;      &lt;dbl&gt; &lt;chr&gt;       &lt;chr&gt;       
 1 2019-05-30 00:00:00 Siganus sutor    16.5         18 Speargun    Pwani       
 2 2019-05-30 00:00:00 Siganus sutor    12           12 Speargun    Pwani       
 3 2019-05-30 00:00:00 Siganus sutor    15           15 Speargun    Pwani       
 4 2019-05-30 00:00:00 Siganus sutor    33           33 Speargun    Pwani       
 5 2019-05-30 00:00:00 Siganus sutor    11.2         12 hook and l… Pwani       
 6 2019-05-30 00:00:00 Siganus sutor    17           18 hook and l… Pwani       
 7 2019-05-30 00:00:00 Siganus sutor    19           21 Gill net    Pwani       
 8 2019-06-25 00:00:00 Siganus sutor    36.5         39 Speargun    Pwani       
 9 2019-06-25 00:00:00 Siganus sutor    11           12 hook and l… Pwani       
10 2019-06-25 00:00:00 Siganus sutor    11           12 hook and l… Pwani       
# ℹ 186 more rows</code></pre>
</div>
</div>
</section>
<section id="select" class="level3" data-number="3.3">
<h3 data-number="3.3" class="anchored" data-anchor-id="select"><span class="header-section-number">3.3</span> Select</h3>
<p>Sometimes, you want to select specific variables. For instance, We are interested in three variables – date, landing_site, species, size_cm but not so much in the other variables. A <code>select()</code> function <strong>dplyr</strong> package allows you to do exactly this.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1"></a>lfq.sample1 <span class="sc">%&gt;%</span> </span>
<span id="cb38-2"><a href="#cb38-2"></a>  <span class="fu">select</span>(date, landing_site, species, size_cm)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 779 × 4
   date                landing_site species           size_cm
   &lt;dttm&gt;              &lt;chr&gt;        &lt;chr&gt;               &lt;dbl&gt;
 1 2019-05-30 00:00:00 Pwani        Siganus sutor        16.5
 2 2019-05-30 00:00:00 Pwani        Siganus sutor        12  
 3 2019-05-30 00:00:00 Pwani        Siganus sutor        15  
 4 2019-05-30 00:00:00 Pwani        Siganus sutor        33  
 5 2019-05-30 00:00:00 Pwani        Siganus sutor        11.2
 6 2019-05-30 00:00:00 Pwani        Siganus sutor        17  
 7 2019-05-30 00:00:00 Pwani        Siganus sutor        19  
 8 2019-05-30 00:00:00 Pwani        Lethrinus mahsena    10  
 9 2019-05-30 00:00:00 Pwani        Lethrinus mahsena    11  
10 2019-05-30 00:00:00 Pwani        Lethrinus mahsena     9  
# ℹ 769 more rows</code></pre>
</div>
</div>
</section>
<section id="arranging-variables" class="level3" data-number="3.4">
<h3 data-number="3.4" class="anchored" data-anchor-id="arranging-variables"><span class="header-section-number">3.4</span> Arranging variables</h3>
<p>Let’s say we want to know the species with larges and smallest size throughout the entire dataset. This can be done with the <code>arrange()</code> function.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1"></a>lfq.sample1 <span class="sc">%&gt;%</span> </span>
<span id="cb40-2"><a href="#cb40-2"></a>  <span class="fu">arrange</span>(size_cm)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 779 × 6
   date                species         size_cm size_class gear_type landing_site
   &lt;dttm&gt;              &lt;chr&gt;             &lt;dbl&gt;      &lt;dbl&gt; &lt;chr&gt;     &lt;chr&gt;       
 1 2019-07-12 00:00:00 Lethrinus harak     6            6 Traps     Pwani       
 2 2020-04-08 00:00:00 Lethrinus mahs…     8.3         12 Traps     Bahari      
 3 2020-04-08 00:00:00 Lethrinus mahs…     8.4         12 Traps     Bahari      
 4 2019-05-30 00:00:00 Lethrinus mahs…     9           12 Traps     Pwani       
 5 2019-05-30 00:00:00 Lethrinus mahs…     9           12 Traps     Pwani       
 6 2020-06-15 00:00:00 Siganus sutor       9           12 Traps     Bahari      
 7 2020-06-15 00:00:00 Lethrinus harak     9           12 Traps     Bahari      
 8 2019-05-30 00:00:00 Lethrinus mahs…     9.3         12 hook and… Pwani       
 9 2019-05-30 00:00:00 Lethrinus mahs…     9.3         12 hook and… Pwani       
10 2020-04-08 00:00:00 Lethrinus mahs…     9.4         12 Traps     Bahari      
# ℹ 769 more rows</code></pre>
</div>
</div>
<p>As we can see, <em>Lethrinus</em> are the species with the smallest size in the datase. The smallest size in the dataset is 6cm. By default, the <code>arrange()</code> function sorts the data in ascending order. To display the data in descending order, we add desc().</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1"></a>lfq.sample1 <span class="sc">%&gt;%</span> </span>
<span id="cb42-2"><a href="#cb42-2"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(size_cm))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 779 × 6
   date                species         size_cm size_class gear_type landing_site
   &lt;dttm&gt;              &lt;chr&gt;             &lt;dbl&gt;      &lt;dbl&gt; &lt;chr&gt;     &lt;chr&gt;       
 1 2019-06-25 00:00:00 Siganus sutor      36.5         39 Speargun  Pwani       
 2 2019-05-30 00:00:00 Siganus sutor      33           33 Speargun  Pwani       
 3 2020-04-08 00:00:00 Calotomus caro…    30.4         33 Traps     Bahari      
 4 2020-06-15 00:00:00 Lethrinus mahs…    30.2         33 hook and… Bahari      
 5 2019-05-30 00:00:00 Leptoscarus va…    30           30 Speargun  Pwani       
 6 2020-04-08 00:00:00 Anampses spp.      30           30 Speargun  Bahari      
 7 2019-07-11 00:00:00 Lutjanus fulvi…    27.5         30 hook and… Pwani       
 8 2019-07-12 00:00:00 Siganus sutor      27.5         30 Gill net  Pwani       
 9 2019-07-11 00:00:00 Calotomus caro…    27           27 Beach se… Pwani       
10 2019-07-12 00:00:00 Siganus sutor      27           27 Gill net  Pwani       
# ℹ 769 more rows</code></pre>
</div>
</div>
<p>As we can see, <em>Siganus sutor</em> are the species with the larges size in the dataset. The highest size in the dataset is 36.50cm.</p>
</section>
<section id="extracting-unique-observations" class="level3" data-number="3.5">
<h3 data-number="3.5" class="anchored" data-anchor-id="extracting-unique-observations"><span class="header-section-number">3.5</span> Extracting unique observations</h3>
<p>Which unique species are included in the dataset? To get this information, we use the <code>distinct()</code> function in dplyr.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1"></a>lfq.sample1 <span class="sc">%&gt;%</span> </span>
<span id="cb44-2"><a href="#cb44-2"></a>  <span class="fu">distinct</span>(species)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 9 × 1
  species               
  &lt;chr&gt;                 
1 Siganus sutor         
2 Lethrinus mahsena     
3 Leptoscarus vaigiensis
4 Calotomus carolinus   
5 Lutjanus fulviflamma  
6 Lethrinus harak       
7 Anampses spp.         
8 Acanthurus chronixis  
9 Cheilinus chlorourus  </code></pre>
</div>
</div>
<p>As we see, there are nine species in the dataset arranged in the species variable of the dataframe. However, We might need these species in vector instead of data frame. We use the function <code>pull</code> for that, which convert from dataframe to vector dataset.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1"></a>lfq.sample1 <span class="sc">%&gt;%</span> </span>
<span id="cb46-2"><a href="#cb46-2"></a>  <span class="fu">distinct</span>(species) <span class="sc">%&gt;%</span> </span>
<span id="cb46-3"><a href="#cb46-3"></a>  <span class="fu">pull</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Siganus sutor"          "Lethrinus mahsena"      "Leptoscarus vaigiensis"
[4] "Calotomus carolinus"    "Lutjanus fulviflamma"   "Lethrinus harak"       
[7] "Anampses spp."          "Acanthurus chronixis"   "Cheilinus chlorourus"  </code></pre>
</div>
</div>
</section>
<section id="creating-new-variables" class="level3" data-number="3.6">
<h3 data-number="3.6" class="anchored" data-anchor-id="creating-new-variables"><span class="header-section-number">3.6</span> Creating new variables</h3>
<p>The <code>mutate()</code> command allows you to generate a new variable from existing. Let’s say you want to generate a day, month and year from date variables. The lubridate packaged <span class="citation" data-cites="lubridate">(<a href="#ref-lubridate" role="doc-biblioref">Grolemund and Wickham 2011</a>)</span> has functions dedicated for dealing with dates, some of these functions include <code>day()</code>, <code>month()</code>, and <code>year()</code> that are used to extract values.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1"></a>lfq.sample1 <span class="sc">%&gt;%</span> </span>
<span id="cb48-2"><a href="#cb48-2"></a>  <span class="fu">select</span>(date, species, size_cm) <span class="sc">%&gt;%</span> </span>
<span id="cb48-3"><a href="#cb48-3"></a>  <span class="fu">mutate</span>(</span>
<span id="cb48-4"><a href="#cb48-4"></a>    <span class="at">year =</span> lubridate<span class="sc">::</span><span class="fu">year</span>(date),</span>
<span id="cb48-5"><a href="#cb48-5"></a>    <span class="at">month =</span> lubridate<span class="sc">::</span><span class="fu">month</span>(date),</span>
<span id="cb48-6"><a href="#cb48-6"></a>    <span class="at">day =</span> lubridate<span class="sc">::</span><span class="fu">day</span>(date)</span>
<span id="cb48-7"><a href="#cb48-7"></a>    )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 779 × 6
   date                species           size_cm  year month   day
   &lt;dttm&gt;              &lt;chr&gt;               &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt;
 1 2019-05-30 00:00:00 Siganus sutor        16.5  2019     5    30
 2 2019-05-30 00:00:00 Siganus sutor        12    2019     5    30
 3 2019-05-30 00:00:00 Siganus sutor        15    2019     5    30
 4 2019-05-30 00:00:00 Siganus sutor        33    2019     5    30
 5 2019-05-30 00:00:00 Siganus sutor        11.2  2019     5    30
 6 2019-05-30 00:00:00 Siganus sutor        17    2019     5    30
 7 2019-05-30 00:00:00 Siganus sutor        19    2019     5    30
 8 2019-05-30 00:00:00 Lethrinus mahsena    10    2019     5    30
 9 2019-05-30 00:00:00 Lethrinus mahsena    11    2019     5    30
10 2019-05-30 00:00:00 Lethrinus mahsena     9    2019     5    30
# ℹ 769 more rows</code></pre>
</div>
</div>
</section>
<section id="group-wise-operations" class="level3" data-number="3.7">
<h3 data-number="3.7" class="anchored" data-anchor-id="group-wise-operations"><span class="header-section-number">3.7</span> Group-wise operations</h3>
<p>Suppose we are interested to know the sample size for each species in the dataset along with the mean, median, and standard deviation of the body size. That’s is not possible with single function in the tidyverse but rather a combination of functions. We use a combination of <code>group_by()</code> (to group our results by month), and parse the specific function we want to compute in the <code>summarise()</code> function.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1"></a>lfq.sample1 <span class="sc">%&gt;%</span> </span>
<span id="cb50-2"><a href="#cb50-2"></a>  <span class="fu">group_by</span>(species) <span class="sc">%&gt;%</span> </span>
<span id="cb50-3"><a href="#cb50-3"></a>  <span class="fu">summarise</span>(</span>
<span id="cb50-4"><a href="#cb50-4"></a>    <span class="at">n =</span> <span class="fu">n</span>(),</span>
<span id="cb50-5"><a href="#cb50-5"></a>    <span class="at">mean_cm =</span> <span class="fu">mean</span>(size_cm),</span>
<span id="cb50-6"><a href="#cb50-6"></a>    <span class="at">median_cm =</span> <span class="fu">median</span>(size_cm),</span>
<span id="cb50-7"><a href="#cb50-7"></a>    <span class="at">std_cm =</span> <span class="fu">sd</span>(size_cm)</span>
<span id="cb50-8"><a href="#cb50-8"></a>    ) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 9 × 5
  species                    n mean_cm median_cm std_cm
  &lt;chr&gt;                  &lt;int&gt;   &lt;dbl&gt;     &lt;dbl&gt;  &lt;dbl&gt;
1 Acanthurus chronixis      21    13.7      12.5  2.65 
2 Anampses spp.             17    17.5      16.5  4.43 
3 Calotomus carolinus      176    16.4      16.5  3.05 
4 Cheilinus chlorourus       4    13.9      14    0.810
5 Leptoscarus vaigiensis   146    18.1      17.5  3.53 
6 Lethrinus harak           37    12.6      12    2.72 
7 Lethrinus mahsena        135    11.9      11.9  2.39 
8 Lutjanus fulviflamma      47    16.7      16.9  2.67 
9 Siganus sutor            196    18.2      17.5  4.66 </code></pre>
</div>
</div>
<p>The computed variables are grouped after performing transformations. In this case, you can pipe another command with <code>ungroup()</code> to ungroup your result.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1"></a>lfq.sample1 <span class="sc">%&gt;%</span> </span>
<span id="cb52-2"><a href="#cb52-2"></a>  <span class="fu">group_by</span>(species) <span class="sc">%&gt;%</span> </span>
<span id="cb52-3"><a href="#cb52-3"></a>  <span class="fu">summarise</span>(</span>
<span id="cb52-4"><a href="#cb52-4"></a>    <span class="at">n =</span> <span class="fu">n</span>(),</span>
<span id="cb52-5"><a href="#cb52-5"></a>    <span class="at">mean_cm =</span> <span class="fu">mean</span>(size_cm),</span>
<span id="cb52-6"><a href="#cb52-6"></a>    <span class="at">median_cm =</span> <span class="fu">median</span>(size_cm),</span>
<span id="cb52-7"><a href="#cb52-7"></a>    <span class="at">std_cm =</span> <span class="fu">sd</span>(size_cm)</span>
<span id="cb52-8"><a href="#cb52-8"></a>    ) <span class="sc">%&gt;%</span> </span>
<span id="cb52-9"><a href="#cb52-9"></a>  <span class="fu">ungroup</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 9 × 5
  species                    n mean_cm median_cm std_cm
  &lt;chr&gt;                  &lt;int&gt;   &lt;dbl&gt;     &lt;dbl&gt;  &lt;dbl&gt;
1 Acanthurus chronixis      21    13.7      12.5  2.65 
2 Anampses spp.             17    17.5      16.5  4.43 
3 Calotomus carolinus      176    16.4      16.5  3.05 
4 Cheilinus chlorourus       4    13.9      14    0.810
5 Leptoscarus vaigiensis   146    18.1      17.5  3.53 
6 Lethrinus harak           37    12.6      12    2.72 
7 Lethrinus mahsena        135    11.9      11.9  2.39 
8 Lutjanus fulviflamma      47    16.7      16.9  2.67 
9 Siganus sutor            196    18.2      17.5  4.66 </code></pre>
</div>
</div>
<p>In some cases, you might wish to arrange the sample size from lowest to highest sample size along with the computed values. You just add the <code>arrange</code> function</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1"></a>lfq.sample1 <span class="sc">%&gt;%</span> </span>
<span id="cb54-2"><a href="#cb54-2"></a>  <span class="fu">group_by</span>(species) <span class="sc">%&gt;%</span> </span>
<span id="cb54-3"><a href="#cb54-3"></a>  <span class="fu">summarise</span>(</span>
<span id="cb54-4"><a href="#cb54-4"></a>    <span class="at">n =</span> <span class="fu">n</span>(),</span>
<span id="cb54-5"><a href="#cb54-5"></a>    <span class="at">mean_cm =</span> <span class="fu">mean</span>(size_cm),</span>
<span id="cb54-6"><a href="#cb54-6"></a>    <span class="at">median_cm =</span> <span class="fu">median</span>(size_cm),</span>
<span id="cb54-7"><a href="#cb54-7"></a>    <span class="at">std_cm =</span> <span class="fu">sd</span>(size_cm)</span>
<span id="cb54-8"><a href="#cb54-8"></a>    ) <span class="sc">%&gt;%</span> </span>
<span id="cb54-9"><a href="#cb54-9"></a>  <span class="fu">arrange</span>(n)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 9 × 5
  species                    n mean_cm median_cm std_cm
  &lt;chr&gt;                  &lt;int&gt;   &lt;dbl&gt;     &lt;dbl&gt;  &lt;dbl&gt;
1 Cheilinus chlorourus       4    13.9      14    0.810
2 Anampses spp.             17    17.5      16.5  4.43 
3 Acanthurus chronixis      21    13.7      12.5  2.65 
4 Lethrinus harak           37    12.6      12    2.72 
5 Lutjanus fulviflamma      47    16.7      16.9  2.67 
6 Lethrinus mahsena        135    11.9      11.9  2.39 
7 Leptoscarus vaigiensis   146    18.1      17.5  3.53 
8 Calotomus carolinus      176    16.4      16.5  3.05 
9 Siganus sutor            196    18.2      17.5  4.66 </code></pre>
</div>
</div>
<p>You notice that <em>Cheilinus chlorourus</em> has a only four observation where as <em>Siganus sutor</em> has 196 records in the dataset. You can also explore the summary statistics to see whether the mean and median values are close (indicator of normal distribution) or differ (indication of skewness)</p>


<!-- -->


</section>
</section>

<a onclick="window.scrollTo(0, 0); return false;" role="button" id="quarto-back-to-top"><i class="bi bi-arrow-up"></i> Back to top</a><div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" role="doc-bibliography" id="quarto-bibliography"><h2 class="anchored quarto-appendix-heading">References</h2><div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" role="list">
<div id="ref-lubridate" class="csl-entry" role="listitem">
Grolemund, Garrett, and Hadley Wickham. 2011. <span>“Dates and Times Made Easy with <span class="nocase">lubridate</span>.”</span> <em>Journal of Statistical Software</em> 40 (3): 1–25. <a href="https://www.jstatsoft.org/v40/i03/">https://www.jstatsoft.org/v40/i03/</a>.
</div>
<div id="ref-tidyverse" class="csl-entry" role="listitem">
Wickham, Hadley, Mara Averick, Jennifer Bryan, Winston Chang, Lucy D’Agostino McGowan, Romain François, Garrett Grolemund, et al. 2019. <span>“Welcome to the <span class="nocase">tidyverse</span>.”</span> <em>Journal of Open Source Software</em> 4 (43): 1686. <a href="https://doi.org/10.21105/joss.01686">https://doi.org/10.21105/joss.01686</a>.
</div>
<div id="ref-readxl" class="csl-entry" role="listitem">
Wickham, Hadley, and Jennifer Bryan. 2023. <em>Readxl: Read Excel Files</em>. <a href="https://CRAN.R-project.org/package=readxl">https://CRAN.R-project.org/package=readxl</a>.
</div>
</div></section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  const viewSource = window.document.getElementById('quarto-view-source') ||
                     window.document.getElementById('quarto-code-tools-source');
  if (viewSource) {
    const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
    viewSource.addEventListener("click", function(e) {
      if (sourceUrl) {
        // rstudio viewer pane
        if (/\bcapabilities=\b/.test(window.location)) {
          window.open(sourceUrl);
        } else {
          window.location.href = sourceUrl;
        }
      } else {
        const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
        modal.show();
      }
      return false;
    });
  }
  function toggleCodeHandler(show) {
    return function(e) {
      const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
      for (let i=0; i<detailsSrc.length; i++) {
        const details = detailsSrc[i].parentElement;
        if (show) {
          details.open = true;
        } else {
          details.removeAttribute("open");
        }
      }
      const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
      const fromCls = show ? "hidden" : "unhidden";
      const toCls = show ? "unhidden" : "hidden";
      for (let i=0; i<cellCodeDivs.length; i++) {
        const codeDiv = cellCodeDivs[i];
        if (codeDiv.classList.contains(fromCls)) {
          codeDiv.classList.remove(fromCls);
          codeDiv.classList.add(toCls);
        } 
      }
      return false;
    }
  }
  const hideAllCode = window.document.getElementById("quarto-hide-all-code");
  if (hideAllCode) {
    hideAllCode.addEventListener("click", toggleCodeHandler(false));
  }
  const showAllCode = window.document.getElementById("quarto-show-all-code");
  if (showAllCode) {
    showAllCode.addEventListener("click", toggleCodeHandler(true));
  }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<script src="https://utteranc.es/client.js" repo="lugoga/kitaa" issue-term="pathname" theme="github-light" crossorigin="anonymous" async="">
</script><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Source Code</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="sourceCode" id="cb56" data-shortcodes="false"><pre class="sourceCode numberSource markdown number-lines code-with-copy"><code class="sourceCode markdown"><span id="cb56-1"><a href="#cb56-1"></a><span class="co">---</span></span>
<span id="cb56-2"><a href="#cb56-2"></a><span class="an">title:</span><span class="co"> "Data cleaning, merging, and appending"</span></span>
<span id="cb56-3"><a href="#cb56-3"></a><span class="an">author:</span><span class="co"> "Masumbuko Semba"</span></span>
<span id="cb56-4"><a href="#cb56-4"></a><span class="an">date:</span><span class="co"> "2024-05-01"</span></span>
<span id="cb56-5"><a href="#cb56-5"></a><span class="an">categories:</span><span class="co"> [visualization, code, analysis]</span></span>
<span id="cb56-6"><a href="#cb56-6"></a><span class="co"># image: "../screenshots/Rproject.png"</span></span>
<span id="cb56-7"><a href="#cb56-7"></a><span class="an">execute:</span><span class="co"> </span></span>
<span id="cb56-8"><a href="#cb56-8"></a><span class="co">  warning: false</span></span>
<span id="cb56-9"><a href="#cb56-9"></a><span class="co">  message: false</span></span>
<span id="cb56-10"><a href="#cb56-10"></a><span class="co">  comment: ""</span></span>
<span id="cb56-11"><a href="#cb56-11"></a><span class="an">number-sections:</span><span class="co"> true  </span></span>
<span id="cb56-12"><a href="#cb56-12"></a><span class="co">---</span></span>
<span id="cb56-13"><a href="#cb56-13"></a></span>
<span id="cb56-14"><a href="#cb56-14"></a></span>
<span id="cb56-17"><a href="#cb56-17"></a><span class="in">```{r}</span></span>
<span id="cb56-18"><a href="#cb56-18"></a><span class="co">#| message: false</span></span>
<span id="cb56-19"><a href="#cb56-19"></a><span class="co">#| warning: false</span></span>
<span id="cb56-20"><a href="#cb56-20"></a><span class="co">#| echo: false</span></span>
<span id="cb56-21"><a href="#cb56-21"></a></span>
<span id="cb56-22"><a href="#cb56-22"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb56-23"><a href="#cb56-23"></a><span class="fu">library</span>(readxl)</span>
<span id="cb56-24"><a href="#cb56-24"></a><span class="fu">library</span>(magrittr)</span>
<span id="cb56-25"><a href="#cb56-25"></a></span>
<span id="cb56-26"><a href="#cb56-26"></a>knitr<span class="sc">::</span>knit_hooks<span class="sc">$</span><span class="fu">set</span>(<span class="at">crop =</span> knitr<span class="sc">::</span>hook_pdfcrop)</span>
<span id="cb56-27"><a href="#cb56-27"></a></span>
<span id="cb56-28"><a href="#cb56-28"></a></span>
<span id="cb56-29"><a href="#cb56-29"></a><span class="in">```</span></span>
<span id="cb56-30"><a href="#cb56-30"></a></span>
<span id="cb56-31"><a href="#cb56-31"></a></span>
<span id="cb56-32"><a href="#cb56-32"></a></span>
<span id="cb56-33"><a href="#cb56-33"></a><span class="fu">## Introduction</span></span>
<span id="cb56-34"><a href="#cb56-34"></a></span>
<span id="cb56-35"><a href="#cb56-35"></a>In reality, data <span class="in">`cleaning`</span> is not so much its own step in the data wrangling process as it is a constant activity that accompanies every other step, both because most data is not clean when we encounter it, and because how a data set (or part of it) needs to be “cleaned” is often revealed progressively as we work. At a high level, clean data might be summarized as being free from errors or typos -- such as mismatched units, multiple spellings of the same word or term, and fields that are not well-separated -- and missing or impossible values.</span>
<span id="cb56-36"><a href="#cb56-36"></a></span>
<span id="cb56-37"><a href="#cb56-37"></a>While many of these are at least somewhat straightforward to recognize (though not always to correct), however, deeper data problems may still persist. Measurement changes, calculation errors and other oversights -- especially in system-generated data -- often don’t reveal themselves until some level of analysis has been done and the data has been “reality-checked” with folks who significant expertise and/or first-hand experience with the subject.</span>
<span id="cb56-38"><a href="#cb56-38"></a></span>
<span id="cb56-39"><a href="#cb56-39"></a>The iterative nature of data cleaning is an example of why data wrangling is a cycle rather than a linear series of steps: as your work reveals more about the data and your understanding of its relationship to the world deepens, you may find that you need to revisit earlier work that you’ve done and repeat or adjust certain aspects of the data</span>
<span id="cb56-40"><a href="#cb56-40"></a></span>
<span id="cb56-41"><a href="#cb56-41"></a></span>
<span id="cb56-42"><a href="#cb56-42"></a></span>
<span id="cb56-43"><a href="#cb56-43"></a><span class="fu">### Importing data</span></span>
<span id="cb56-44"><a href="#cb56-44"></a></span>
<span id="cb56-45"><a href="#cb56-45"></a>Although creating data frames from existing data structures is extremely useful, by far the most common approach is to create a data frame by importing data from an external file. To do this, you’ll need to have your data correctly formatted and saved in a file format that R is able to recognize. Fortunately for us, R is able to recognize a wide variety of file formats, although in reality you’ll probably end up only using two or three regularly---comma separated, excel spreadsheet and tab-delimited.</span>
<span id="cb56-46"><a href="#cb56-46"></a></span>
<span id="cb56-47"><a href="#cb56-47"></a>The easiest method of creating a data file to import into R is to enter your data into a spreadsheet using either Microsoft Excel or LibreOffice Calc and save the spreadsheet as a comma separated (<span class="in">`.csv`</span>), excel spreadsheet (<span class="in">`.xls`</span> or <span class="in">`.xlsx`</span>) and tab-delimited (<span class="in">`.txt`</span>). We then read the file into our session, for this mode, we are going to use the <span class="in">`LFQ_sample_1.xls`</span>, which is an Excel spreadsheet file. To load into the R session, we use a <span class="in">`read_excel`</span> function from **readxl** package <span class="co">[</span><span class="ot">@readxl</span><span class="co">]</span>. Before we import the data, we need to load the packages that we will use their functions in this chapter</span>
<span id="cb56-48"><a href="#cb56-48"></a></span>
<span id="cb56-51"><a href="#cb56-51"></a><span class="in">```{r}</span></span>
<span id="cb56-52"><a href="#cb56-52"></a><span class="co">#| warning: false</span></span>
<span id="cb56-53"><a href="#cb56-53"></a><span class="co">#| message: false</span></span>
<span id="cb56-54"><a href="#cb56-54"></a></span>
<span id="cb56-55"><a href="#cb56-55"></a><span class="fu">require</span>(tidyverse)</span>
<span id="cb56-56"><a href="#cb56-56"></a><span class="fu">require</span>(magrittr)</span>
<span id="cb56-57"><a href="#cb56-57"></a><span class="in">```</span></span>
<span id="cb56-58"><a href="#cb56-58"></a></span>
<span id="cb56-59"><a href="#cb56-59"></a></span>
<span id="cb56-60"><a href="#cb56-60"></a></span>
<span id="cb56-63"><a href="#cb56-63"></a><span class="in">```{r}</span></span>
<span id="cb56-64"><a href="#cb56-64"></a>lfq <span class="ot">=</span> readxl<span class="sc">::</span><span class="fu">read_excel</span>(<span class="at">path =</span> <span class="st">"../data/LFQ_sample_1.xls"</span>,</span>
<span id="cb56-65"><a href="#cb56-65"></a>                         <span class="at">sheet =</span> <span class="dv">1</span>, </span>
<span id="cb56-66"><a href="#cb56-66"></a>                         <span class="at">skip =</span> <span class="dv">0</span>)</span>
<span id="cb56-67"><a href="#cb56-67"></a></span>
<span id="cb56-68"><a href="#cb56-68"></a><span class="in">```</span></span>
<span id="cb56-69"><a href="#cb56-69"></a></span>
<span id="cb56-70"><a href="#cb56-70"></a></span>
<span id="cb56-71"><a href="#cb56-71"></a></span>
<span id="cb56-72"><a href="#cb56-72"></a>There are a few things to note about the above command. First, the file path and the filename (including the file extension) needs to be enclosed in either single or double quotes (i.e. the data/flower.txt bit) as the <span class="in">`read_excel()`</span> function expects this to be a character string. If your working directory is already set to the directory which contains the file, you don’t need to include the entire file path just the <span class="in">`filename`</span>. </span>
<span id="cb56-73"><a href="#cb56-73"></a></span>
<span id="cb56-74"><a href="#cb56-74"></a></span>
<span id="cb56-75"><a href="#cb56-75"></a>In the example above, the file path is separated with a single forward slash /. This will work regardless of the operating system you are using. The argument <span class="in">`sheet = 1`</span> specify the function to pick the data from first sheet as spreadsheet store data in multiple sheet. The argument <span class="in">`skip = 0`</span> specify the function not to skip any row in the datase. This used to specify when the data has metadata information at the top. </span>
<span id="cb56-76"><a href="#cb56-76"></a></span>
<span id="cb56-77"><a href="#cb56-77"></a>After importing our data into R it doesn’t appear that R has done much, at least nothing appears in the R Console! To see the contents of the data frame we need to tell R to do so using a print <span class="in">`function`</span>.</span>
<span id="cb56-78"><a href="#cb56-78"></a></span>
<span id="cb56-79"><a href="#cb56-79"></a></span>
<span id="cb56-82"><a href="#cb56-82"></a><span class="in">```{r}</span></span>
<span id="cb56-83"><a href="#cb56-83"></a>lfq <span class="sc">%&gt;%</span> <span class="fu">print</span>()</span>
<span id="cb56-84"><a href="#cb56-84"></a><span class="in">```</span></span>
<span id="cb56-85"><a href="#cb56-85"></a></span>
<span id="cb56-86"><a href="#cb56-86"></a>The data frame appears in the console and that prove to us that we successfully imported the data into R. But printing the imported data into console is only useful for small dataset and for large dataset that makes the console messy and there is nothing you can glean by simply printing the dataset in the console. The other common practice often used is looking on the internal structure of the dataset using <span class="in">`str()`</span> function</span>
<span id="cb56-87"><a href="#cb56-87"></a></span>
<span id="cb56-90"><a href="#cb56-90"></a><span class="in">```{r}</span></span>
<span id="cb56-91"><a href="#cb56-91"></a>lfq <span class="sc">%&gt;%</span> </span>
<span id="cb56-92"><a href="#cb56-92"></a>  <span class="fu">str</span>()</span>
<span id="cb56-93"><a href="#cb56-93"></a><span class="in">```</span></span>
<span id="cb56-94"><a href="#cb56-94"></a></span>
<span id="cb56-95"><a href="#cb56-95"></a>and a better solution is to use a tidyverse approach of <span class="in">`glimpse`</span> function</span>
<span id="cb56-96"><a href="#cb56-96"></a></span>
<span id="cb56-99"><a href="#cb56-99"></a><span class="in">```{r}</span></span>
<span id="cb56-100"><a href="#cb56-100"></a>lfq <span class="sc">%&gt;%</span> </span>
<span id="cb56-101"><a href="#cb56-101"></a>  <span class="fu">glimpse</span>()</span>
<span id="cb56-102"><a href="#cb56-102"></a><span class="in">```</span></span>
<span id="cb56-103"><a href="#cb56-103"></a></span>
<span id="cb56-104"><a href="#cb56-104"></a>The output in the console tell us that <span class="in">`lfq`</span> dataset we just imported has six columns (variables) and 779 rows (records). Each of the variable are listed along with their data types and few records of the data</span>
<span id="cb56-105"><a href="#cb56-105"></a>The first row of the data contains the variable (column) names. </span>
<span id="cb56-106"><a href="#cb56-106"></a></span>
<span id="cb56-107"><a href="#cb56-107"></a><span class="fu">### Common import frustrations</span></span>
<span id="cb56-108"><a href="#cb56-108"></a></span>
<span id="cb56-109"><a href="#cb56-109"></a>It’s quite common to get a bunch of really frustrating error messages when you first start importing data into R. Perhaps the most common is</span>
<span id="cb56-110"><a href="#cb56-110"></a></span>
<span id="cb56-111"><a href="#cb56-111"></a></span>
<span id="cb56-112"><a href="#cb56-112"></a><span class="in">```r</span></span>
<span id="cb56-113"><a href="#cb56-113"></a>lfq <span class="ot">=</span> readxl<span class="sc">::</span><span class="fu">read_excel</span>(<span class="at">path =</span> <span class="st">"assets/fao_paul_dataset/LFQ_sample_1"</span>,</span>
<span id="cb56-114"><a href="#cb56-114"></a>                         <span class="at">sheet =</span> <span class="dv">1</span>, </span>
<span id="cb56-115"><a href="#cb56-115"></a>                         <span class="at">skip =</span> <span class="dv">0</span>)</span>
<span id="cb56-116"><a href="#cb56-116"></a></span>
<span id="cb56-117"><a href="#cb56-117"></a><span class="in">```</span></span>
<span id="cb56-118"><a href="#cb56-118"></a></span>
<span id="cb56-119"><a href="#cb56-119"></a>This error message is telling you that R cannot find the file you are trying to import. Several reasons can lead to that information error.The first is that you’ve made a mistake in the spelling of either the filename or file path. Another common mistake is that you have forgotten to include the file extension in the filename (i.e. .txt). Lastly, the file is not where you say it is or you’ve used an incorrect file path. Using RStudio Projects and having a logical directory structure goes a long way to avoiding these types of errors.</span>
<span id="cb56-120"><a href="#cb56-120"></a></span>
<span id="cb56-121"><a href="#cb56-121"></a></span>
<span id="cb56-122"><a href="#cb56-122"></a></span>
<span id="cb56-123"><a href="#cb56-123"></a><span class="fu">### clean variable names</span></span>
<span id="cb56-124"><a href="#cb56-124"></a></span>
<span id="cb56-127"><a href="#cb56-127"></a><span class="in">```{r}</span></span>
<span id="cb56-128"><a href="#cb56-128"></a>lfq <span class="sc">%&gt;%</span> </span>
<span id="cb56-129"><a href="#cb56-129"></a>  <span class="fu">names</span>()</span>
<span id="cb56-130"><a href="#cb56-130"></a><span class="in">```</span></span>
<span id="cb56-131"><a href="#cb56-131"></a></span>
<span id="cb56-134"><a href="#cb56-134"></a><span class="in">```{r}</span></span>
<span id="cb56-135"><a href="#cb56-135"></a>lfq.clean <span class="ot">=</span> lfq <span class="sc">%&gt;%</span> </span>
<span id="cb56-136"><a href="#cb56-136"></a>  janitor<span class="sc">::</span><span class="fu">clean_names</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb56-137"><a href="#cb56-137"></a>  janitor<span class="sc">::</span><span class="fu">remove_empty</span>()</span>
<span id="cb56-138"><a href="#cb56-138"></a><span class="in">```</span></span>
<span id="cb56-139"><a href="#cb56-139"></a></span>
<span id="cb56-140"><a href="#cb56-140"></a><span class="fu">### check the structure</span></span>
<span id="cb56-141"><a href="#cb56-141"></a></span>
<span id="cb56-144"><a href="#cb56-144"></a><span class="in">```{r}</span></span>
<span id="cb56-145"><a href="#cb56-145"></a>lfq.clean <span class="sc">%&gt;%</span> </span>
<span id="cb56-146"><a href="#cb56-146"></a>  <span class="fu">glimpse</span>()</span>
<span id="cb56-147"><a href="#cb56-147"></a><span class="in">```</span></span>
<span id="cb56-148"><a href="#cb56-148"></a></span>
<span id="cb56-149"><a href="#cb56-149"></a><span class="fu">### creating variables</span></span>
<span id="cb56-150"><a href="#cb56-150"></a></span>
<span id="cb56-151"><a href="#cb56-151"></a>You notice that the date is datetime and date but the display is date. Thus, we need to create three variables that represent <span class="in">`day`</span>, <span class="in">`month`</span>, and <span class="in">`year`</span>. We can extract these variables from date variables, We can use the <span class="in">`day()`</span>, <span class="in">`month()`</span>, and <span class="in">`year()`</span> functions from **lubridate** package <span class="co">[</span><span class="ot">@lubridate</span><span class="co">]</span>;</span>
<span id="cb56-152"><a href="#cb56-152"></a></span>
<span id="cb56-155"><a href="#cb56-155"></a><span class="in">```{r}</span></span>
<span id="cb56-156"><a href="#cb56-156"></a>lfq.time <span class="ot">=</span> lfq.clean <span class="sc">%&gt;%</span> </span>
<span id="cb56-157"><a href="#cb56-157"></a>  <span class="fu">mutate</span>(</span>
<span id="cb56-158"><a href="#cb56-158"></a>    <span class="at">day =</span> lubridate<span class="sc">::</span><span class="fu">day</span>(date),</span>
<span id="cb56-159"><a href="#cb56-159"></a>    <span class="at">month =</span> lubridate<span class="sc">::</span><span class="fu">month</span>(date),</span>
<span id="cb56-160"><a href="#cb56-160"></a>    <span class="at">year =</span> lubridate<span class="sc">::</span><span class="fu">year</span>(date)</span>
<span id="cb56-161"><a href="#cb56-161"></a>    ) <span class="sc">%&gt;%</span> </span>
<span id="cb56-162"><a href="#cb56-162"></a>  <span class="fu">relocate</span>(<span class="fu">c</span>(landing_site, day, month, year), <span class="at">.before =</span> date)</span>
<span id="cb56-163"><a href="#cb56-163"></a></span>
<span id="cb56-164"><a href="#cb56-164"></a>lfq.time <span class="sc">|&gt;</span> </span>
<span id="cb56-165"><a href="#cb56-165"></a>  <span class="fu">sample_n</span>(<span class="dv">30</span>) <span class="sc">|&gt;</span> </span>
<span id="cb56-166"><a href="#cb56-166"></a>  <span class="fu">select</span>(<span class="sc">-</span><span class="fu">c</span>(day, month, year)) <span class="sc">|&gt;</span> </span>
<span id="cb56-167"><a href="#cb56-167"></a>  flextable<span class="sc">::</span><span class="fu">flextable</span>() <span class="sc">|&gt;</span> </span>
<span id="cb56-168"><a href="#cb56-168"></a>  flextable<span class="sc">::</span><span class="fu">autofit</span>()</span>
<span id="cb56-169"><a href="#cb56-169"></a>  </span>
<span id="cb56-170"><a href="#cb56-170"></a></span>
<span id="cb56-171"><a href="#cb56-171"></a><span class="in">```</span></span>
<span id="cb56-172"><a href="#cb56-172"></a></span>
<span id="cb56-173"><a href="#cb56-173"></a><span class="fu">### Dropping and keeping variables</span></span>
<span id="cb56-174"><a href="#cb56-174"></a></span>
<span id="cb56-177"><a href="#cb56-177"></a><span class="in">```{r}</span></span>
<span id="cb56-178"><a href="#cb56-178"></a>lfq.time <span class="sc">%&gt;%</span> </span>
<span id="cb56-179"><a href="#cb56-179"></a>  <span class="fu">select</span>(<span class="sc">-</span>date)</span>
<span id="cb56-180"><a href="#cb56-180"></a><span class="in">```</span></span>
<span id="cb56-181"><a href="#cb56-181"></a></span>
<span id="cb56-182"><a href="#cb56-182"></a></span>
<span id="cb56-183"><a href="#cb56-183"></a><span class="fu">### Missing values</span></span>
<span id="cb56-184"><a href="#cb56-184"></a></span>
<span id="cb56-185"><a href="#cb56-185"></a>R handles missing values differently than some other programs, including Stata. Missing values will appear as NA (whereas in Stata these will appear as large numeric values). Note, though, that NA is not a string, it is a symbol. If you try to conduct logical tests with NA, you are likely to get errors or NULL.</span>
<span id="cb56-186"><a href="#cb56-186"></a></span>
<span id="cb56-187"><a href="#cb56-187"></a><span class="fu">## Length frequency</span></span>
<span id="cb56-188"><a href="#cb56-188"></a></span>
<span id="cb56-189"><a href="#cb56-189"></a>Let's first look at the length data from the catch, which gives an indication of the size structure and health of the population. Using several case studies, we will filter the dataset to choose certain species and then plot histograms of the length data, which reveal the number of individual of each size class were measured in a sample or catch data.</span>
<span id="cb56-190"><a href="#cb56-190"></a></span>
<span id="cb56-191"><a href="#cb56-191"></a>You have several options for dealing with <span class="in">`NA`</span> values.</span>
<span id="cb56-192"><a href="#cb56-192"></a><span class="ss">-   </span><span class="in">`na.omit()`</span> or <span class="in">`na.exclude()`</span> will row-wise delete missing values in your dataset</span>
<span id="cb56-193"><a href="#cb56-193"></a><span class="ss">-   </span><span class="in">`na.fail()`</span> will keep an object only if no missing values are present</span>
<span id="cb56-194"><a href="#cb56-194"></a><span class="ss">-   </span><span class="in">`na.action=`</span> is a common option in many functions, for example in a linear model where you might write <span class="in">`model &lt;- lm(y~x, data = data, na.action = na.omit)`</span>.</span>
<span id="cb56-195"><a href="#cb56-195"></a><span class="ss">-   </span><span class="in">`is.na`</span> allows you to logically test for <span class="in">`NA`</span> values, for example when subsetting</span>
<span id="cb56-196"><a href="#cb56-196"></a></span>
<span id="cb56-197"><a href="#cb56-197"></a></span>
<span id="cb56-198"><a href="#cb56-198"></a><span class="fu">### Merging and combining data</span></span>
<span id="cb56-199"><a href="#cb56-199"></a>You may want to draw on data from multiple sources or at differing levels of aggregation. To do this, you first must know what your data look like and know what format you ultimately want them to take. Whatever you do, do not attempt to merge datasets by hand—this leads to mistakes and frustration.</span>
<span id="cb56-200"><a href="#cb56-200"></a></span>
<span id="cb56-201"><a href="#cb56-201"></a>left join</span>
<span id="cb56-202"><a href="#cb56-202"></a>bind_row</span>
<span id="cb56-203"><a href="#cb56-203"></a>bind_col</span>
<span id="cb56-204"><a href="#cb56-204"></a></span>
<span id="cb56-205"><a href="#cb56-205"></a><span class="fu">### Reshaping data</span></span>
<span id="cb56-206"><a href="#cb56-206"></a>Reshaping data into different formats is a common task. With rectangular type data (data frames have the same number of rows in each column) there are two main data frame shapes that you will come across: the <span class="in">`long`</span> format (sometimes called stacked) and the <span class="in">`wide`</span> format. An example of a long format data frame is given in @tbl-long1. We can see that each row is a single observation from an individual species and each species can have multiple rows with different values of year and catch.</span>
<span id="cb56-207"><a href="#cb56-207"></a></span>
<span id="cb56-208"><a href="#cb56-208"></a></span>
<span id="cb56-209"><a href="#cb56-209"></a></span>
<span id="cb56-212"><a href="#cb56-212"></a><span class="in">```{r}</span></span>
<span id="cb56-213"><a href="#cb56-213"></a><span class="co">#| warning: false</span></span>
<span id="cb56-214"><a href="#cb56-214"></a><span class="co">#| message: false</span></span>
<span id="cb56-215"><a href="#cb56-215"></a><span class="co">#| comment: ""</span></span>
<span id="cb56-216"><a href="#cb56-216"></a><span class="co">#| </span></span>
<span id="cb56-217"><a href="#cb56-217"></a><span class="fu">set.seed</span>(<span class="dv">123</span>)</span>
<span id="cb56-218"><a href="#cb56-218"></a></span>
<span id="cb56-219"><a href="#cb56-219"></a>aa <span class="ot">=</span> <span class="fu">read_csv</span>(<span class="st">"../data/tidy/fao_capture.csv"</span>)  <span class="sc">%&gt;%</span> </span>
<span id="cb56-220"><a href="#cb56-220"></a>  <span class="fu">sample_n</span>(<span class="at">size =</span> <span class="dv">5</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb56-221"><a href="#cb56-221"></a>  <span class="fu">separate</span>(<span class="at">col =</span> <span class="st">'ASFIS species'</span>, <span class="at">into =</span> <span class="fu">c</span>(<span class="st">"english_name"</span>, <span class="st">"species"</span>), <span class="at">sep =</span> <span class="st">"-"</span>) <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>, <span class="dv">7</span><span class="sc">:</span><span class="dv">10</span>) </span>
<span id="cb56-222"><a href="#cb56-222"></a></span>
<span id="cb56-223"><a href="#cb56-223"></a></span>
<span id="cb56-224"><a href="#cb56-224"></a><span class="in">```</span></span>
<span id="cb56-225"><a href="#cb56-225"></a></span>
<span id="cb56-226"><a href="#cb56-226"></a></span>
<span id="cb56-227"><a href="#cb56-227"></a></span>
<span id="cb56-230"><a href="#cb56-230"></a><span class="in">```{r}</span></span>
<span id="cb56-231"><a href="#cb56-231"></a><span class="co">#| warning: false</span></span>
<span id="cb56-232"><a href="#cb56-232"></a><span class="co">#| message: false</span></span>
<span id="cb56-233"><a href="#cb56-233"></a><span class="co">#| comment: ""</span></span>
<span id="cb56-234"><a href="#cb56-234"></a><span class="co">#| echo: false</span></span>
<span id="cb56-235"><a href="#cb56-235"></a><span class="co">#| label: tbl-long1</span></span>
<span id="cb56-236"><a href="#cb56-236"></a><span class="co">#| tbl-cap: Long format data frame data format</span></span>
<span id="cb56-237"><a href="#cb56-237"></a></span>
<span id="cb56-238"><a href="#cb56-238"></a></span>
<span id="cb56-239"><a href="#cb56-239"></a>aa <span class="sc">|&gt;</span> </span>
<span id="cb56-240"><a href="#cb56-240"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="dv">3</span><span class="sc">:</span><span class="dv">6</span>, <span class="at">values_to =</span> <span class="st">"catch_mt"</span>, <span class="at">names_to =</span> <span class="st">"year"</span>)  <span class="sc">|&gt;</span> </span>
<span id="cb56-241"><a href="#cb56-241"></a>  flextable<span class="sc">::</span><span class="fu">flextable</span>() <span class="sc">|&gt;</span> </span>
<span id="cb56-242"><a href="#cb56-242"></a>  flextable<span class="sc">::</span><span class="fu">autofit</span>()</span>
<span id="cb56-243"><a href="#cb56-243"></a>  </span>
<span id="cb56-244"><a href="#cb56-244"></a><span class="in">```</span></span>
<span id="cb56-245"><a href="#cb56-245"></a></span>
<span id="cb56-246"><a href="#cb56-246"></a>We can also format the same data in the wide format as in @tbl-wide. In this format the year are treated as variables and catches are values within the years.</span>
<span id="cb56-247"><a href="#cb56-247"></a></span>
<span id="cb56-250"><a href="#cb56-250"></a><span class="in">```{r}</span></span>
<span id="cb56-251"><a href="#cb56-251"></a><span class="co">#| warning: false</span></span>
<span id="cb56-252"><a href="#cb56-252"></a><span class="co">#| message: false</span></span>
<span id="cb56-253"><a href="#cb56-253"></a><span class="co">#| comment: ""</span></span>
<span id="cb56-254"><a href="#cb56-254"></a><span class="co">#| echo: false</span></span>
<span id="cb56-255"><a href="#cb56-255"></a><span class="co">#| label: tbl-wide</span></span>
<span id="cb56-256"><a href="#cb56-256"></a><span class="co">#| tbl-cap: Wide format data frame data format</span></span>
<span id="cb56-257"><a href="#cb56-257"></a></span>
<span id="cb56-258"><a href="#cb56-258"></a>aa  <span class="sc">|&gt;</span> </span>
<span id="cb56-259"><a href="#cb56-259"></a>  flextable<span class="sc">::</span><span class="fu">flextable</span>() <span class="sc">|&gt;</span> </span>
<span id="cb56-260"><a href="#cb56-260"></a>  flextable<span class="sc">::</span><span class="fu">autofit</span>()</span>
<span id="cb56-261"><a href="#cb56-261"></a>  </span>
<span id="cb56-262"><a href="#cb56-262"></a><span class="in">```</span></span>
<span id="cb56-263"><a href="#cb56-263"></a></span>
<span id="cb56-264"><a href="#cb56-264"></a></span>
<span id="cb56-265"><a href="#cb56-265"></a></span>
<span id="cb56-266"><a href="#cb56-266"></a>Whilst there’s no inherent problem with either of these formats we will sometimes need to convert between the two because some functions will require a specific format for them to work. But for the modern tidyverse function, only the dataset that is <span class="in">`long`</span> format accepted.</span>
<span id="cb56-267"><a href="#cb56-267"></a></span>
<span id="cb56-268"><a href="#cb56-268"></a>There are many ways to convert between these two formats but we’ll use the <span class="in">`pivot_longer()`</span> and <span class="in">`pivot_wider()`</span> functions from the **tidyr** package <span class="co">[</span><span class="ot">@tidyr</span><span class="co">]</span>. We will use <span class="in">`fao_capture.csv`</span> dataset in this session, we can simply load it with <span class="in">`read_csv`</span> function and specify the path our dataset reside;</span>
<span id="cb56-269"><a href="#cb56-269"></a></span>
<span id="cb56-270"><a href="#cb56-270"></a></span>
<span id="cb56-273"><a href="#cb56-273"></a><span class="in">```{r}</span></span>
<span id="cb56-274"><a href="#cb56-274"></a><span class="co">#| warning: false</span></span>
<span id="cb56-275"><a href="#cb56-275"></a><span class="co">#| message: false</span></span>
<span id="cb56-276"><a href="#cb56-276"></a><span class="co">#| comment: ""</span></span>
<span id="cb56-277"><a href="#cb56-277"></a><span class="co">#| </span></span>
<span id="cb56-278"><a href="#cb56-278"></a>capture.wide <span class="ot">=</span> <span class="fu">read_csv</span>(<span class="st">"../data/tidy/fao_capture.csv"</span>)</span>
<span id="cb56-279"><a href="#cb56-279"></a><span class="in">```</span></span>
<span id="cb56-280"><a href="#cb56-280"></a></span>
<span id="cb56-281"><a href="#cb56-281"></a></span>
<span id="cb56-284"><a href="#cb56-284"></a><span class="in">```{r}</span></span>
<span id="cb56-285"><a href="#cb56-285"></a>capture.wide  <span class="sc">|&gt;</span> </span>
<span id="cb56-286"><a href="#cb56-286"></a>  flextable<span class="sc">::</span><span class="fu">flextable</span>() <span class="sc">|&gt;</span> </span>
<span id="cb56-287"><a href="#cb56-287"></a>  flextable<span class="sc">::</span><span class="fu">autofit</span>()</span>
<span id="cb56-288"><a href="#cb56-288"></a>  </span>
<span id="cb56-289"><a href="#cb56-289"></a><span class="in">```</span></span>
<span id="cb56-290"><a href="#cb56-290"></a></span>
<span id="cb56-291"><a href="#cb56-291"></a>The <span class="in">`capture.wide`</span>object we just created is the dataframe but is in wide format. To change from wide to long format data table, we use the <span class="in">`pivot_longer`</span> function. The first argument specified in <span class="in">`pivot_longer`</span> is <span class="in">`cols = 2:9`</span> are index value of the variable in column 2 to colum 9 of the dataset we want to stack, <span class="in">`names_to = "year"`</span> argument specify that the stacked variables will all be under a new variable name called <span class="in">`year`</span> and the values in the stacked variables will all be under one variable called <span class="in">`catch`</span></span>
<span id="cb56-292"><a href="#cb56-292"></a></span>
<span id="cb56-295"><a href="#cb56-295"></a><span class="in">```{r}</span></span>
<span id="cb56-296"><a href="#cb56-296"></a><span class="co">#| warning: false</span></span>
<span id="cb56-297"><a href="#cb56-297"></a><span class="co">#| message: false</span></span>
<span id="cb56-298"><a href="#cb56-298"></a><span class="co">#| comment: ""</span></span>
<span id="cb56-299"><a href="#cb56-299"></a><span class="co">#| echo: true</span></span>
<span id="cb56-300"><a href="#cb56-300"></a>capture.long <span class="ot">=</span> capture.wide <span class="sc">%&gt;%</span> </span>
<span id="cb56-301"><a href="#cb56-301"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="dv">2</span><span class="sc">:</span><span class="dv">9</span>, <span class="at">names_to =</span> <span class="st">"year"</span>, <span class="at">values_to =</span> <span class="st">"catch"</span>)</span>
<span id="cb56-302"><a href="#cb56-302"></a><span class="in">```</span></span>
<span id="cb56-303"><a href="#cb56-303"></a></span>
<span id="cb56-304"><a href="#cb56-304"></a></span>
<span id="cb56-307"><a href="#cb56-307"></a><span class="in">```{r}</span></span>
<span id="cb56-308"><a href="#cb56-308"></a><span class="co">#| warning: false</span></span>
<span id="cb56-309"><a href="#cb56-309"></a><span class="co">#| message: false</span></span>
<span id="cb56-310"><a href="#cb56-310"></a><span class="co">#| comment: ""</span></span>
<span id="cb56-311"><a href="#cb56-311"></a><span class="co">#| label: tbl-long2</span></span>
<span id="cb56-312"><a href="#cb56-312"></a><span class="co">#| tbl-cap: Data values arranged in tidy wide format</span></span>
<span id="cb56-313"><a href="#cb56-313"></a>capture.long <span class="sc">%&gt;%</span> </span>
<span id="cb56-314"><a href="#cb56-314"></a>  FSA<span class="sc">::</span><span class="fu">headtail</span>(<span class="at">n =</span> <span class="dv">4</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb56-315"><a href="#cb56-315"></a>  gt<span class="sc">::</span><span class="fu">gt</span>()</span>
<span id="cb56-316"><a href="#cb56-316"></a><span class="in">```</span></span>
<span id="cb56-317"><a href="#cb56-317"></a></span>
<span id="cb56-318"><a href="#cb56-318"></a>The <span class="in">`pivot_wider()`</span> function is used to convert from a <span class="in">`long`</span> format data frame to a <span class="in">`wide`</span> format data frame. The first argument is <span class="in">`names_from = year`</span> is the variable of the data frame for which we want spread across and the second argument <span class="in">`values_from = catch`</span> is the corresponding values will reside in each casted variable. </span>
<span id="cb56-319"><a href="#cb56-319"></a></span>
<span id="cb56-322"><a href="#cb56-322"></a><span class="in">```{r}</span></span>
<span id="cb56-323"><a href="#cb56-323"></a><span class="co">#| warning: false</span></span>
<span id="cb56-324"><a href="#cb56-324"></a><span class="co">#| message: false</span></span>
<span id="cb56-325"><a href="#cb56-325"></a><span class="co">#| comment: ""</span></span>
<span id="cb56-326"><a href="#cb56-326"></a><span class="co">#| echo: true</span></span>
<span id="cb56-327"><a href="#cb56-327"></a>capture.wide <span class="ot">=</span> capture.long <span class="sc">%&gt;%</span> </span>
<span id="cb56-328"><a href="#cb56-328"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> year, <span class="at">values_from =</span> catch)</span>
<span id="cb56-329"><a href="#cb56-329"></a><span class="in">```</span></span>
<span id="cb56-330"><a href="#cb56-330"></a></span>
<span id="cb56-331"><a href="#cb56-331"></a></span>
<span id="cb56-334"><a href="#cb56-334"></a><span class="in">```{r}</span></span>
<span id="cb56-335"><a href="#cb56-335"></a><span class="co">#| warning: false</span></span>
<span id="cb56-336"><a href="#cb56-336"></a><span class="co">#| message: false</span></span>
<span id="cb56-337"><a href="#cb56-337"></a><span class="co">#| comment: ""</span></span>
<span id="cb56-338"><a href="#cb56-338"></a><span class="co">#| label: tbl-long</span></span>
<span id="cb56-339"><a href="#cb56-339"></a><span class="co">#| tbl-cap: Data values arranged in tidy wide format</span></span>
<span id="cb56-340"><a href="#cb56-340"></a><span class="co">#| echo: false</span></span>
<span id="cb56-341"><a href="#cb56-341"></a>capture.wide  <span class="sc">|&gt;</span> </span>
<span id="cb56-342"><a href="#cb56-342"></a>  flextable<span class="sc">::</span><span class="fu">flextable</span>() <span class="sc">|&gt;</span> </span>
<span id="cb56-343"><a href="#cb56-343"></a>  flextable<span class="sc">::</span><span class="fu">autofit</span>()</span>
<span id="cb56-344"><a href="#cb56-344"></a>  </span>
<span id="cb56-345"><a href="#cb56-345"></a><span class="in">```</span></span>
<span id="cb56-346"><a href="#cb56-346"></a></span>
<span id="cb56-347"><a href="#cb56-347"></a><span class="fu">### Saving transformed data</span></span>
<span id="cb56-348"><a href="#cb56-348"></a>Once you have transformed your data and edited variables, you may want to save your new dataframe as an external data file that your collaborators or other researchers can use. As with reading in data, for saving out data you will need the foreign package. Similarly, you can choose from a number of different data formats to export to as well. Most commonly you will want to save out data as a <span class="in">`.csv`</span> or a tab-delited text file.</span>
<span id="cb56-349"><a href="#cb56-349"></a></span>
<span id="cb56-350"><a href="#cb56-350"></a><span class="in">```r</span></span>
<span id="cb56-351"><a href="#cb56-351"></a>myfile <span class="sc">%&gt;%</span> <span class="fu">write_csv</span>(<span class="st">"my.directory/file_name.csv"</span>)</span>
<span id="cb56-352"><a href="#cb56-352"></a><span class="in">```</span></span>
<span id="cb56-353"><a href="#cb56-353"></a></span>
<span id="cb56-354"><a href="#cb56-354"></a><span class="fu">## Transforming, summarising, and analysing data</span></span>
<span id="cb56-355"><a href="#cb56-355"></a>The R universe basically builds upon two (seemingly contradictive) approaches: base R and the tidyverse. While these two approaches are often seen as two different philosophies, they can form a symbiosis. We therefore recommend to pick whichever works best for you – or to combine the two.Whereas base R is already implemented in R, using the tidyverse requires users to load new packages. People often find base R unintuitive and hard to read. This is why Hadley Wickham developed and introduced the tidyverse – a more intuitive approach to managing and wrangling data [@tidyverse.</span>
<span id="cb56-356"><a href="#cb56-356"></a></span>
<span id="cb56-357"><a href="#cb56-357"></a>Code written before 2014 was usually written in base R whereas the tidyverse style is becoming increasingly widespread. Again, which approach you prefer is rather a matter of personal taste than a decision between “right or wrong”. We first familiarize ourselves with the basic logic of the tidyverse style using some examples. For this, we use <span class="in">`LFQ_sample_1.xls`</span>. since is an Excel format, lets import it in our session;</span>
<span id="cb56-358"><a href="#cb56-358"></a></span>
<span id="cb56-361"><a href="#cb56-361"></a><span class="in">```{r}</span></span>
<span id="cb56-362"><a href="#cb56-362"></a>lfq.sample1 <span class="ot">=</span> readxl<span class="sc">::</span><span class="fu">read_excel</span>(<span class="st">"../data/LFQ_sample_1.xls"</span>)</span>
<span id="cb56-363"><a href="#cb56-363"></a></span>
<span id="cb56-364"><a href="#cb56-364"></a><span class="in">```</span></span>
<span id="cb56-365"><a href="#cb56-365"></a></span>
<span id="cb56-366"><a href="#cb56-366"></a>Let's print the assigned lfq.sample1</span>
<span id="cb56-367"><a href="#cb56-367"></a></span>
<span id="cb56-370"><a href="#cb56-370"></a><span class="in">```{r}</span></span>
<span id="cb56-371"><a href="#cb56-371"></a>lfq.sample1 <span class="sc">|&gt;</span> </span>
<span id="cb56-372"><a href="#cb56-372"></a>  FSA<span class="sc">::</span><span class="fu">headtail</span>() <span class="sc">|&gt;</span> </span>
<span id="cb56-373"><a href="#cb56-373"></a>  flextable<span class="sc">::</span><span class="fu">flextable</span>() <span class="sc">|&gt;</span> </span>
<span id="cb56-374"><a href="#cb56-374"></a>  flextable<span class="sc">::</span><span class="fu">autofit</span>()</span>
<span id="cb56-375"><a href="#cb56-375"></a>  </span>
<span id="cb56-376"><a href="#cb56-376"></a><span class="in">```</span></span>
<span id="cb56-377"><a href="#cb56-377"></a></span>
<span id="cb56-378"><a href="#cb56-378"></a></span>
<span id="cb56-379"><a href="#cb56-379"></a>As you can see from the output generated in your console, the <span class="in">`lfq.sample1`</span> data frame object contains length information of several species. The fisheries data collected in this dataset ensured that each record on a separate row and each column represents a variable. The dataset contains six variables (columns) and 779 records (rows). These variables includes;</span>
<span id="cb56-380"><a href="#cb56-380"></a></span>
<span id="cb56-381"><a href="#cb56-381"></a><span class="ss">-   </span><span class="in">`Date`</span> a sample was collected. The date is in the <span class="in">`YYYY-MM-DD`</span>, which is the format that accepted</span>
<span id="cb56-382"><a href="#cb56-382"></a><span class="ss">-   </span><span class="in">`Species`</span> the scientific name of the species</span>
<span id="cb56-383"><a href="#cb56-383"></a><span class="ss">-   </span><span class="in">`Size (cm)`</span> the length of the fish species measured in centimeter</span>
<span id="cb56-384"><a href="#cb56-384"></a><span class="ss">-   </span><span class="in">`Size Class`</span> of the individual</span>
<span id="cb56-385"><a href="#cb56-385"></a><span class="ss">-   </span><span class="in">`Gear type`</span> used to catch the recorded fish, and</span>
<span id="cb56-386"><a href="#cb56-386"></a><span class="ss">-   </span><span class="in">`Landing-site`</span> a landing station where the fish was recorded</span>
<span id="cb56-387"><a href="#cb56-387"></a></span>
<span id="cb56-388"><a href="#cb56-388"></a>This dataset is arranged in appropriate format. The data was entered in spreadsheet with a few basics. These correspond to: what, where, when it only miss who collect the data or the originator of this dataset. The way this dataset is organized is the classical example of how set out our data in a similar fashion. This makes manipulating the data more straightforward and also maintains the multi-purpose nature of the analysis work. Having your data organized is really important!</span>
<span id="cb56-389"><a href="#cb56-389"></a></span>
<span id="cb56-390"><a href="#cb56-390"></a>::: callout-warning</span>
<span id="cb56-391"><a href="#cb56-391"></a>Though the size and unit of the dataaset is provide, but it does not tell us much because we do not know whether the measurement is total length (TL), standard length (SL) or fork length (FL). It is imperative to specify in the dataset variable names what was measured and the unit</span>
<span id="cb56-392"><a href="#cb56-392"></a>:::</span>
<span id="cb56-393"><a href="#cb56-393"></a></span>
<span id="cb56-394"><a href="#cb56-394"></a></span>
<span id="cb56-395"><a href="#cb56-395"></a><span class="fu">### Renaming variables</span></span>
<span id="cb56-396"><a href="#cb56-396"></a></span>
<span id="cb56-397"><a href="#cb56-397"></a>Looking <span class="in">`lfq.sample1`</span> dataset presented in @tbl-case1, we notice that variable names do not adhere to standard variable names. The tidyverse style guide recommends snake case (words separated by underscores tl_cm) for object and column names. Let's look back at our column names for a minute. Using the <span class="in">`names()`</span> function from the  and pipe operator <span class="in">`%&gt;%`</span> from the **magrittr** package simultaneously serves as the first pipe in a chain of commands and print names in the dataset</span>
<span id="cb56-398"><a href="#cb56-398"></a></span>
<span id="cb56-401"><a href="#cb56-401"></a><span class="in">```{r}</span></span>
<span id="cb56-402"><a href="#cb56-402"></a>lfq.sample1 <span class="sc">%&gt;%</span> </span>
<span id="cb56-403"><a href="#cb56-403"></a>  <span class="fu">names</span>()</span>
<span id="cb56-404"><a href="#cb56-404"></a><span class="in">```</span></span>
<span id="cb56-405"><a href="#cb56-405"></a></span>
<span id="cb56-406"><a href="#cb56-406"></a>There are all sorts of capital letters and spaces (e.g. "Gear type" ," "Size Class" ) as well as symbols ("Size (cm)"). Therefore we mustl convert all of these to snake case for us. We can rename specific variables using the <span class="in">`rename`</span> function from the **dplyr** package [@dplyr]. Since **dplyr** is part of the **tidyverse** package <span class="co">[</span><span class="ot">@tidyverse</span><span class="co">]</span> that was loaded, we do not need to load it again but rather use its function to rename the variables. We'll begin by specifying the name of our data frame object <span class="in">`lfq.sample1`</span>, followed by the <span class="in">`=`</span> operator so that we can overwrite the existing <span class="in">`lfq.sample1`</span> frame object with one that contains the renamed variables.</span>
<span id="cb56-407"><a href="#cb56-407"></a></span>
<span id="cb56-408"><a href="#cb56-408"></a></span>
<span id="cb56-409"><a href="#cb56-409"></a>Next type <span class="in">`lfq.sample1`</span> followed by pipe operator <span class="in">`%&gt;%`</span> and then call a<span class="in">`rename`</span> function, where you parse the new names to their corresponding old names. As the first argument, let's change the <span class="in">`Date`</span> variable to <span class="in">`date`</span> by typing the name of our new variable followed by = and, in quotation marks (" "), the name of the original variable <span class="in">`date = "Date"`</span>. As the second argument, let's apply the same process as the second argument and change the <span class="in">`Species`</span> variable to <span class="in">`species`</span> by typing the name of our new variable followed by = and, in quotation marks (" "), the name of the original variable <span class="in">`species = "Species"`</span>. We follow the same naming procedure to the six variables as the chunk below highlight;</span>
<span id="cb56-410"><a href="#cb56-410"></a></span>
<span id="cb56-413"><a href="#cb56-413"></a><span class="in">```{r}</span></span>
<span id="cb56-414"><a href="#cb56-414"></a>lfq.sample1 <span class="ot">=</span> lfq.sample1 <span class="sc">%&gt;%</span> </span>
<span id="cb56-415"><a href="#cb56-415"></a>  <span class="fu">rename</span>(</span>
<span id="cb56-416"><a href="#cb56-416"></a>    <span class="at">date =</span> <span class="st">"Date"</span>,</span>
<span id="cb56-417"><a href="#cb56-417"></a>    <span class="at">species =</span> <span class="st">"Species"</span>,</span>
<span id="cb56-418"><a href="#cb56-418"></a>    <span class="at">size_cm =</span> <span class="st">"Size (cm)"</span>,</span>
<span id="cb56-419"><a href="#cb56-419"></a>    <span class="at">size_class =</span> <span class="st">"Size Class"</span>,</span>
<span id="cb56-420"><a href="#cb56-420"></a>    <span class="at">gear_type =</span> <span class="st">"Gear type"</span>,</span>
<span id="cb56-421"><a href="#cb56-421"></a>    <span class="at">landing_site =</span> <span class="st">"Landing_site"</span></span>
<span id="cb56-422"><a href="#cb56-422"></a>    )</span>
<span id="cb56-423"><a href="#cb56-423"></a></span>
<span id="cb56-424"><a href="#cb56-424"></a></span>
<span id="cb56-425"><a href="#cb56-425"></a><span class="in">```</span></span>
<span id="cb56-426"><a href="#cb56-426"></a></span>
<span id="cb56-427"><a href="#cb56-427"></a>Using the head function from base R, let's verify that we renamed the two variables successfully.</span>
<span id="cb56-428"><a href="#cb56-428"></a></span>
<span id="cb56-431"><a href="#cb56-431"></a><span class="in">```{r}</span></span>
<span id="cb56-432"><a href="#cb56-432"></a>lfq.sample1</span>
<span id="cb56-433"><a href="#cb56-433"></a><span class="in">```</span></span>
<span id="cb56-434"><a href="#cb56-434"></a></span>
<span id="cb56-435"><a href="#cb56-435"></a>As you can see, the new names have no spaces and all are written in small letters. Spaces in variables names were replaced with the underscore symbol.</span>
<span id="cb56-436"><a href="#cb56-436"></a></span>
<span id="cb56-437"><a href="#cb56-437"></a>Though the rename function is great tool to rename variables in the dataset, however there are times when you a dataset has hundred of variables names to change and using <span class="in">`rename`</span> function from dplyr package become tedious. Furtunate , a **janitor** package has a nifty <span class="in">`clean_names()`</span> function that clean all the variable names with a single line of code. I highly recommend incorporating it into your workflow.</span>
<span id="cb56-438"><a href="#cb56-438"></a></span>
<span id="cb56-441"><a href="#cb56-441"></a><span class="in">```{r}</span></span>
<span id="cb56-442"><a href="#cb56-442"></a>lfq.sample1 <span class="ot">=</span> readxl<span class="sc">::</span><span class="fu">read_excel</span>(<span class="st">"../data/LFQ_sample_1.xls"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb56-443"><a href="#cb56-443"></a>  janitor<span class="sc">::</span><span class="fu">clean_names</span>()</span>
<span id="cb56-444"><a href="#cb56-444"></a></span>
<span id="cb56-445"><a href="#cb56-445"></a>lfq.sample1</span>
<span id="cb56-446"><a href="#cb56-446"></a><span class="in">```</span></span>
<span id="cb56-447"><a href="#cb56-447"></a></span>
<span id="cb56-448"><a href="#cb56-448"></a>As you can see above, the <span class="in">`clean_names()`</span> function handled every kind of messy variable name that was present in our <span class="in">`lfq.sample1`</span> dataset. Everything now looks neat and tidy</span>
<span id="cb56-449"><a href="#cb56-449"></a></span>
<span id="cb56-450"><a href="#cb56-450"></a></span>
<span id="cb56-451"><a href="#cb56-451"></a><span class="fu">### Filtering Data</span></span>
<span id="cb56-452"><a href="#cb56-452"></a></span>
<span id="cb56-453"><a href="#cb56-453"></a>Our <span class="in">`lfq.sample1`</span> contains six variables -- date, species, size_cm, size_class, gear_type and landing_site;</span>
<span id="cb56-456"><a href="#cb56-456"></a><span class="in">```{r}</span></span>
<span id="cb56-457"><a href="#cb56-457"></a>lfq.sample1 <span class="sc">%&gt;%</span> </span>
<span id="cb56-458"><a href="#cb56-458"></a>  <span class="fu">glimpse</span>()</span>
<span id="cb56-459"><a href="#cb56-459"></a><span class="in">```</span></span>
<span id="cb56-460"><a href="#cb56-460"></a>Suppose we are only interested in *Siganus sutor* species only from the dataset. For this purpose, we can use the `filter()` function from  **dplyr** package <span class="co">[</span><span class="ot">@dplyr</span><span class="co">]</span></span>
<span id="cb56-461"><a href="#cb56-461"></a></span>
<span id="cb56-464"><a href="#cb56-464"></a><span class="in">```{r}</span></span>
<span id="cb56-465"><a href="#cb56-465"></a>lfq.sample1 <span class="sc">%&gt;%</span> </span>
<span id="cb56-466"><a href="#cb56-466"></a>  <span class="fu">filter</span>(species <span class="sc">==</span> <span class="st">"Siganus sutor"</span>)</span>
<span id="cb56-467"><a href="#cb56-467"></a><span class="in">```</span></span>
<span id="cb56-468"><a href="#cb56-468"></a></span>
<span id="cb56-469"><a href="#cb56-469"></a><span class="fu">### Select</span></span>
<span id="cb56-470"><a href="#cb56-470"></a>Sometimes, you want to select specific variables. For instance, We are interested in three variables -- date, landing_site, species, size_cm but not so much in the other variables. A <span class="in">`select()`</span> function **dplyr** package  allows you to do exactly this.</span>
<span id="cb56-471"><a href="#cb56-471"></a></span>
<span id="cb56-472"><a href="#cb56-472"></a></span>
<span id="cb56-475"><a href="#cb56-475"></a><span class="in">```{r}</span></span>
<span id="cb56-476"><a href="#cb56-476"></a>lfq.sample1 <span class="sc">%&gt;%</span> </span>
<span id="cb56-477"><a href="#cb56-477"></a>  <span class="fu">select</span>(date, landing_site, species, size_cm)</span>
<span id="cb56-478"><a href="#cb56-478"></a><span class="in">```</span></span>
<span id="cb56-479"><a href="#cb56-479"></a></span>
<span id="cb56-480"><a href="#cb56-480"></a><span class="fu">### Arranging variables</span></span>
<span id="cb56-481"><a href="#cb56-481"></a>Let’s say we want to know the species with larges and smallest size throughout the entire dataset. This can be done with the <span class="in">`arrange()`</span> function. </span>
<span id="cb56-482"><a href="#cb56-482"></a></span>
<span id="cb56-485"><a href="#cb56-485"></a><span class="in">```{r}</span></span>
<span id="cb56-486"><a href="#cb56-486"></a>lfq.sample1 <span class="sc">%&gt;%</span> </span>
<span id="cb56-487"><a href="#cb56-487"></a>  <span class="fu">arrange</span>(size_cm)</span>
<span id="cb56-488"><a href="#cb56-488"></a><span class="in">```</span></span>
<span id="cb56-489"><a href="#cb56-489"></a></span>
<span id="cb56-490"><a href="#cb56-490"></a>As we can see, *Lethrinus* are the species with the smallest size in the datase. The smallest size in the dataset is 6cm.  By default, the <span class="in">`arrange()`</span> function sorts the data in ascending order. To display the data in descending order, we add desc().</span>
<span id="cb56-491"><a href="#cb56-491"></a></span>
<span id="cb56-492"><a href="#cb56-492"></a></span>
<span id="cb56-495"><a href="#cb56-495"></a><span class="in">```{r}</span></span>
<span id="cb56-496"><a href="#cb56-496"></a>lfq.sample1 <span class="sc">%&gt;%</span> </span>
<span id="cb56-497"><a href="#cb56-497"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(size_cm))</span>
<span id="cb56-498"><a href="#cb56-498"></a><span class="in">```</span></span>
<span id="cb56-499"><a href="#cb56-499"></a></span>
<span id="cb56-500"><a href="#cb56-500"></a>As we can see, *Siganus sutor* are the species with the larges size in the dataset. The highest size in the dataset is 36.50cm.</span>
<span id="cb56-501"><a href="#cb56-501"></a></span>
<span id="cb56-502"><a href="#cb56-502"></a></span>
<span id="cb56-503"><a href="#cb56-503"></a><span class="fu">### Extracting unique observations</span></span>
<span id="cb56-504"><a href="#cb56-504"></a>Which unique species are included in the dataset? To get this information, we use the <span class="in">`distinct()`</span> function in dplyr.</span>
<span id="cb56-505"><a href="#cb56-505"></a></span>
<span id="cb56-508"><a href="#cb56-508"></a><span class="in">```{r}</span></span>
<span id="cb56-509"><a href="#cb56-509"></a>lfq.sample1 <span class="sc">%&gt;%</span> </span>
<span id="cb56-510"><a href="#cb56-510"></a>  <span class="fu">distinct</span>(species)</span>
<span id="cb56-511"><a href="#cb56-511"></a></span>
<span id="cb56-512"><a href="#cb56-512"></a><span class="in">```</span></span>
<span id="cb56-513"><a href="#cb56-513"></a></span>
<span id="cb56-514"><a href="#cb56-514"></a>As we see, there are nine species in the dataset arranged in the species variable of the dataframe. However, We might need these species in vector instead of data frame. We use the function <span class="in">`pull`</span> for that, which convert from dataframe to vector dataset. </span>
<span id="cb56-515"><a href="#cb56-515"></a></span>
<span id="cb56-518"><a href="#cb56-518"></a><span class="in">```{r}</span></span>
<span id="cb56-519"><a href="#cb56-519"></a>lfq.sample1 <span class="sc">%&gt;%</span> </span>
<span id="cb56-520"><a href="#cb56-520"></a>  <span class="fu">distinct</span>(species) <span class="sc">%&gt;%</span> </span>
<span id="cb56-521"><a href="#cb56-521"></a>  <span class="fu">pull</span>()</span>
<span id="cb56-522"><a href="#cb56-522"></a></span>
<span id="cb56-523"><a href="#cb56-523"></a><span class="in">```</span></span>
<span id="cb56-524"><a href="#cb56-524"></a></span>
<span id="cb56-525"><a href="#cb56-525"></a></span>
<span id="cb56-526"><a href="#cb56-526"></a><span class="fu">### Creating new variables</span></span>
<span id="cb56-527"><a href="#cb56-527"></a>The <span class="in">`mutate()`</span> command allows you to generate a new variable from existing. Let’s say you want to generate a day, month and year from date variables. The lubridate packaged <span class="co">[</span><span class="ot">@lubridate</span><span class="co">]</span> has functions dedicated for dealing with dates, some of these functions include <span class="in">`day()`</span>, <span class="in">`month()`</span>, and <span class="in">`year()`</span> that are used to extract values.</span>
<span id="cb56-528"><a href="#cb56-528"></a></span>
<span id="cb56-531"><a href="#cb56-531"></a><span class="in">```{r}</span></span>
<span id="cb56-532"><a href="#cb56-532"></a>lfq.sample1 <span class="sc">%&gt;%</span> </span>
<span id="cb56-533"><a href="#cb56-533"></a>  <span class="fu">select</span>(date, species, size_cm) <span class="sc">%&gt;%</span> </span>
<span id="cb56-534"><a href="#cb56-534"></a>  <span class="fu">mutate</span>(</span>
<span id="cb56-535"><a href="#cb56-535"></a>    <span class="at">year =</span> lubridate<span class="sc">::</span><span class="fu">year</span>(date),</span>
<span id="cb56-536"><a href="#cb56-536"></a>    <span class="at">month =</span> lubridate<span class="sc">::</span><span class="fu">month</span>(date),</span>
<span id="cb56-537"><a href="#cb56-537"></a>    <span class="at">day =</span> lubridate<span class="sc">::</span><span class="fu">day</span>(date)</span>
<span id="cb56-538"><a href="#cb56-538"></a>    )</span>
<span id="cb56-539"><a href="#cb56-539"></a><span class="in">```</span></span>
<span id="cb56-540"><a href="#cb56-540"></a></span>
<span id="cb56-541"><a href="#cb56-541"></a></span>
<span id="cb56-542"><a href="#cb56-542"></a><span class="fu">### Group-wise operations</span></span>
<span id="cb56-543"><a href="#cb56-543"></a>Suppose we are interested to know the sample size for each species in the dataset along with the mean, median, and standard deviation of the body size. That's is not possible with single function in the tidyverse but rather a combination of functions. We use a combination of <span class="in">`group_by()`</span> (to group our results by month), and parse the specific function we want to compute in the <span class="in">`summarise()`</span> function.</span>
<span id="cb56-544"><a href="#cb56-544"></a></span>
<span id="cb56-547"><a href="#cb56-547"></a><span class="in">```{r}</span></span>
<span id="cb56-548"><a href="#cb56-548"></a>lfq.sample1 <span class="sc">%&gt;%</span> </span>
<span id="cb56-549"><a href="#cb56-549"></a>  <span class="fu">group_by</span>(species) <span class="sc">%&gt;%</span> </span>
<span id="cb56-550"><a href="#cb56-550"></a>  <span class="fu">summarise</span>(</span>
<span id="cb56-551"><a href="#cb56-551"></a>    <span class="at">n =</span> <span class="fu">n</span>(),</span>
<span id="cb56-552"><a href="#cb56-552"></a>    <span class="at">mean_cm =</span> <span class="fu">mean</span>(size_cm),</span>
<span id="cb56-553"><a href="#cb56-553"></a>    <span class="at">median_cm =</span> <span class="fu">median</span>(size_cm),</span>
<span id="cb56-554"><a href="#cb56-554"></a>    <span class="at">std_cm =</span> <span class="fu">sd</span>(size_cm)</span>
<span id="cb56-555"><a href="#cb56-555"></a>    ) </span>
<span id="cb56-556"><a href="#cb56-556"></a><span class="in">```</span></span>
<span id="cb56-557"><a href="#cb56-557"></a></span>
<span id="cb56-558"><a href="#cb56-558"></a></span>
<span id="cb56-559"><a href="#cb56-559"></a>The computed variables are grouped after performing transformations. In this case, you can pipe another command with  <span class="in">`ungroup()`</span> to ungroup your result.</span>
<span id="cb56-560"><a href="#cb56-560"></a></span>
<span id="cb56-561"><a href="#cb56-561"></a></span>
<span id="cb56-564"><a href="#cb56-564"></a><span class="in">```{r}</span></span>
<span id="cb56-565"><a href="#cb56-565"></a>lfq.sample1 <span class="sc">%&gt;%</span> </span>
<span id="cb56-566"><a href="#cb56-566"></a>  <span class="fu">group_by</span>(species) <span class="sc">%&gt;%</span> </span>
<span id="cb56-567"><a href="#cb56-567"></a>  <span class="fu">summarise</span>(</span>
<span id="cb56-568"><a href="#cb56-568"></a>    <span class="at">n =</span> <span class="fu">n</span>(),</span>
<span id="cb56-569"><a href="#cb56-569"></a>    <span class="at">mean_cm =</span> <span class="fu">mean</span>(size_cm),</span>
<span id="cb56-570"><a href="#cb56-570"></a>    <span class="at">median_cm =</span> <span class="fu">median</span>(size_cm),</span>
<span id="cb56-571"><a href="#cb56-571"></a>    <span class="at">std_cm =</span> <span class="fu">sd</span>(size_cm)</span>
<span id="cb56-572"><a href="#cb56-572"></a>    ) <span class="sc">%&gt;%</span> </span>
<span id="cb56-573"><a href="#cb56-573"></a>  <span class="fu">ungroup</span>()</span>
<span id="cb56-574"><a href="#cb56-574"></a><span class="in">```</span></span>
<span id="cb56-575"><a href="#cb56-575"></a></span>
<span id="cb56-576"><a href="#cb56-576"></a>In some cases, you might wish to arrange the sample size from lowest to highest sample size along with the computed values. You just add the <span class="in">`arrange`</span> function</span>
<span id="cb56-577"><a href="#cb56-577"></a></span>
<span id="cb56-580"><a href="#cb56-580"></a><span class="in">```{r}</span></span>
<span id="cb56-581"><a href="#cb56-581"></a>lfq.sample1 <span class="sc">%&gt;%</span> </span>
<span id="cb56-582"><a href="#cb56-582"></a>  <span class="fu">group_by</span>(species) <span class="sc">%&gt;%</span> </span>
<span id="cb56-583"><a href="#cb56-583"></a>  <span class="fu">summarise</span>(</span>
<span id="cb56-584"><a href="#cb56-584"></a>    <span class="at">n =</span> <span class="fu">n</span>(),</span>
<span id="cb56-585"><a href="#cb56-585"></a>    <span class="at">mean_cm =</span> <span class="fu">mean</span>(size_cm),</span>
<span id="cb56-586"><a href="#cb56-586"></a>    <span class="at">median_cm =</span> <span class="fu">median</span>(size_cm),</span>
<span id="cb56-587"><a href="#cb56-587"></a>    <span class="at">std_cm =</span> <span class="fu">sd</span>(size_cm)</span>
<span id="cb56-588"><a href="#cb56-588"></a>    ) <span class="sc">%&gt;%</span> </span>
<span id="cb56-589"><a href="#cb56-589"></a>  <span class="fu">arrange</span>(n)</span>
<span id="cb56-590"><a href="#cb56-590"></a><span class="in">```</span></span>
<span id="cb56-591"><a href="#cb56-591"></a></span>
<span id="cb56-592"><a href="#cb56-592"></a>You notice that *Cheilinus chlorourus* has a only four observation where as *Siganus sutor* has 196 records in the dataset. You can also explore the summary statistics to see whether the mean and median values are close (indicator of normal distribution) or differ (indication of skewness)</span>
</code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div></div></div></div></div>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
      &nbsp;
    </div>   
    <div class="nav-footer-center">

<div class="cookie-consent-footer"><a href="#" id="open_preferences_center">Cookie Preferences</a></div></div>
    <div class="nav-footer-right">
      &nbsp;
    </div>
  </div>
</footer>




</body></html>